import{cy as Hw,cz as si,cA as Fn,cB as st,L as Jr,M as Hu,_ as Bw}from"./index-s6c4EPi7.js";import{e as Fr,$ as Bu}from"./events-aiOwJqkz.js";var Ku={},oa={},Le={},Wd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(f,y){var p=f>>>16&65535,v=f&65535,S=y>>>16&65535,D=y&65535;return v*D+(p*D+v*S<<16>>>0)|0}i.mul=Math.imul||e;function t(f,y){return f+y|0}i.add=t;function s(f,y){return f-y|0}i.sub=s;function o(f,y){return f<<y|f>>>32-y}i.rotl=o;function c(f,y){return f<<32-y|f>>>y}i.rotr=c;function l(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}i.isInteger=Number.isInteger||l,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(f){return i.isInteger(f)&&f>=-i.MAX_SAFE_INTEGER&&f<=i.MAX_SAFE_INTEGER}})(Wd);Object.defineProperty(Le,"__esModule",{value:!0});var Yd=Wd;function Kw(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Le.readInt16BE=Kw;function Vw(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Le.readUint16BE=Vw;function kw(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Le.readInt16LE=kw;function Gw(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Le.readUint16LE=Gw;function Jd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}Le.writeUint16BE=Jd;Le.writeInt16BE=Jd;function Qd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}Le.writeUint16LE=Qd;Le.writeInt16LE=Qd;function lu(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Le.readInt32BE=lu;function fu(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Le.readUint32BE=fu;function du(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Le.readInt32LE=du;function pu(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Le.readUint32LE=pu;function Zo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}Le.writeUint32BE=Zo;Le.writeInt32BE=Zo;function ea(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}Le.writeUint32LE=ea;Le.writeInt32LE=ea;function Ww(i,e){e===void 0&&(e=0);var t=lu(i,e),s=lu(i,e+4);return t*4294967296+s-(s>>31)*4294967296}Le.readInt64BE=Ww;function Yw(i,e){e===void 0&&(e=0);var t=fu(i,e),s=fu(i,e+4);return t*4294967296+s}Le.readUint64BE=Yw;function Jw(i,e){e===void 0&&(e=0);var t=du(i,e),s=du(i,e+4);return s*4294967296+t-(t>>31)*4294967296}Le.readInt64LE=Jw;function Qw(i,e){e===void 0&&(e=0);var t=pu(i,e),s=pu(i,e+4);return s*4294967296+t}Le.readUint64LE=Qw;function Xd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Zo(i/4294967296>>>0,e,t),Zo(i>>>0,e,t+4),e}Le.writeUint64BE=Xd;Le.writeInt64BE=Xd;function Zd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),ea(i>>>0,e,t),ea(i/4294967296>>>0,e,t+4),e}Le.writeUint64LE=Zd;Le.writeInt64LE=Zd;function Xw(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=i/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Le.readUintBE=Xw;function Zw(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+i/8;c++)s+=e[c]*o,o*=256;return s}Le.readUintLE=Zw;function eb(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Yd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=i/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Le.writeUintBE=eb;function tb(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Yd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+i/8;c++)t[c]=e/o&255,o*=256;return t}Le.writeUintLE=tb;function rb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}Le.readFloat32BE=rb;function ib(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}Le.readFloat32LE=ib;function nb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}Le.readFloat64BE=nb;function sb(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}Le.readFloat64LE=sb;function ob(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}Le.writeFloat32BE=ob;function ab(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}Le.writeFloat32LE=ab;function cb(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}Le.writeFloat64BE=cb;function ub(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}Le.writeFloat64LE=ub;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});function hb(i){for(var e=0;e<i.length;e++)i[e]=0;return i}Cr.wipe=hb;Object.defineProperty(oa,"__esModule",{value:!0});var er=Le,gu=Cr,lb=20;function fb(i,e,t){for(var s=1634760805,o=857760878,c=2036477234,l=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],S=t[19]<<24|t[18]<<16|t[17]<<8|t[16],D=t[23]<<24|t[22]<<16|t[21]<<8|t[20],x=t[27]<<24|t[26]<<16|t[25]<<8|t[24],O=t[31]<<24|t[30]<<16|t[29]<<8|t[28],z=e[3]<<24|e[2]<<16|e[1]<<8|e[0],B=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ne=e[11]<<24|e[10]<<16|e[9]<<8|e[8],$=e[15]<<24|e[14]<<16|e[13]<<8|e[12],L=s,P=o,R=c,E=l,u=f,w=y,G=p,W=v,se=S,ce=D,de=x,b=O,A=z,ee=B,Q=ne,V=$,k=0;k<lb;k+=2)L=L+u|0,A^=L,A=A>>>16|A<<16,se=se+A|0,u^=se,u=u>>>20|u<<12,P=P+w|0,ee^=P,ee=ee>>>16|ee<<16,ce=ce+ee|0,w^=ce,w=w>>>20|w<<12,R=R+G|0,Q^=R,Q=Q>>>16|Q<<16,de=de+Q|0,G^=de,G=G>>>20|G<<12,E=E+W|0,V^=E,V=V>>>16|V<<16,b=b+V|0,W^=b,W=W>>>20|W<<12,R=R+G|0,Q^=R,Q=Q>>>24|Q<<8,de=de+Q|0,G^=de,G=G>>>25|G<<7,E=E+W|0,V^=E,V=V>>>24|V<<8,b=b+V|0,W^=b,W=W>>>25|W<<7,P=P+w|0,ee^=P,ee=ee>>>24|ee<<8,ce=ce+ee|0,w^=ce,w=w>>>25|w<<7,L=L+u|0,A^=L,A=A>>>24|A<<8,se=se+A|0,u^=se,u=u>>>25|u<<7,L=L+w|0,V^=L,V=V>>>16|V<<16,de=de+V|0,w^=de,w=w>>>20|w<<12,P=P+G|0,A^=P,A=A>>>16|A<<16,b=b+A|0,G^=b,G=G>>>20|G<<12,R=R+W|0,ee^=R,ee=ee>>>16|ee<<16,se=se+ee|0,W^=se,W=W>>>20|W<<12,E=E+u|0,Q^=E,Q=Q>>>16|Q<<16,ce=ce+Q|0,u^=ce,u=u>>>20|u<<12,R=R+W|0,ee^=R,ee=ee>>>24|ee<<8,se=se+ee|0,W^=se,W=W>>>25|W<<7,E=E+u|0,Q^=E,Q=Q>>>24|Q<<8,ce=ce+Q|0,u^=ce,u=u>>>25|u<<7,P=P+G|0,A^=P,A=A>>>24|A<<8,b=b+A|0,G^=b,G=G>>>25|G<<7,L=L+w|0,V^=L,V=V>>>24|V<<8,de=de+V|0,w^=de,w=w>>>25|w<<7;er.writeUint32LE(L+s|0,i,0),er.writeUint32LE(P+o|0,i,4),er.writeUint32LE(R+c|0,i,8),er.writeUint32LE(E+l|0,i,12),er.writeUint32LE(u+f|0,i,16),er.writeUint32LE(w+y|0,i,20),er.writeUint32LE(G+p|0,i,24),er.writeUint32LE(W+v|0,i,28),er.writeUint32LE(se+S|0,i,32),er.writeUint32LE(ce+D|0,i,36),er.writeUint32LE(de+x|0,i,40),er.writeUint32LE(b+O|0,i,44),er.writeUint32LE(A+z|0,i,48),er.writeUint32LE(ee+B|0,i,52),er.writeUint32LE(Q+ne|0,i,56),er.writeUint32LE(V+$|0,i,60)}function ep(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var f=new Uint8Array(64),y=0;y<t.length;y+=64){fb(f,c,i);for(var p=y;p<y+64&&p<t.length;p++)s[p]=t[p]^f[p-y];pb(c,0,l)}return gu.wipe(f),o===0&&gu.wipe(c),s}oa.streamXOR=ep;function db(i,e,t,s){return s===void 0&&(s=0),gu.wipe(t),ep(i,e,t,t,s)}oa.stream=db;function pb(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var tp={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});function gb(i,e,t){return~(i-1)&e|i-1&t}Fi.select=gb;function yb(i,e){return(i|0)-(e|0)-1>>>31&1}Fi.lessOrEqual=yb;function rp(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}Fi.compare=rp;function vb(i,e){return i.length===0||e.length===0?!1:rp(i,e)!==0}Fi.equal=vb;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Fi,t=Cr;i.DIGEST_LENGTH=16;var s=function(){function l(f){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=f[0]|f[1]<<8;this._r[0]=y&8191;var p=f[2]|f[3]<<8;this._r[1]=(y>>>13|p<<3)&8191;var v=f[4]|f[5]<<8;this._r[2]=(p>>>10|v<<6)&7939;var S=f[6]|f[7]<<8;this._r[3]=(v>>>7|S<<9)&8191;var D=f[8]|f[9]<<8;this._r[4]=(S>>>4|D<<12)&255,this._r[5]=D>>>1&8190;var x=f[10]|f[11]<<8;this._r[6]=(D>>>14|x<<2)&8191;var O=f[12]|f[13]<<8;this._r[7]=(x>>>11|O<<5)&8065;var z=f[14]|f[15]<<8;this._r[8]=(O>>>8|z<<8)&8191,this._r[9]=z>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return l.prototype._blocks=function(f,y,p){for(var v=this._fin?0:2048,S=this._h[0],D=this._h[1],x=this._h[2],O=this._h[3],z=this._h[4],B=this._h[5],ne=this._h[6],$=this._h[7],L=this._h[8],P=this._h[9],R=this._r[0],E=this._r[1],u=this._r[2],w=this._r[3],G=this._r[4],W=this._r[5],se=this._r[6],ce=this._r[7],de=this._r[8],b=this._r[9];p>=16;){var A=f[y+0]|f[y+1]<<8;S+=A&8191;var ee=f[y+2]|f[y+3]<<8;D+=(A>>>13|ee<<3)&8191;var Q=f[y+4]|f[y+5]<<8;x+=(ee>>>10|Q<<6)&8191;var V=f[y+6]|f[y+7]<<8;O+=(Q>>>7|V<<9)&8191;var k=f[y+8]|f[y+9]<<8;z+=(V>>>4|k<<12)&8191,B+=k>>>1&8191;var J=f[y+10]|f[y+11]<<8;ne+=(k>>>14|J<<2)&8191;var re=f[y+12]|f[y+13]<<8;$+=(J>>>11|re<<5)&8191;var we=f[y+14]|f[y+15]<<8;L+=(re>>>8|we<<8)&8191,P+=we>>>5|v;var oe=0,be=oe;be+=S*R,be+=D*(5*b),be+=x*(5*de),be+=O*(5*ce),be+=z*(5*se),oe=be>>>13,be&=8191,be+=B*(5*W),be+=ne*(5*G),be+=$*(5*w),be+=L*(5*u),be+=P*(5*E),oe+=be>>>13,be&=8191;var le=oe;le+=S*E,le+=D*R,le+=x*(5*b),le+=O*(5*de),le+=z*(5*ce),oe=le>>>13,le&=8191,le+=B*(5*se),le+=ne*(5*W),le+=$*(5*G),le+=L*(5*w),le+=P*(5*u),oe+=le>>>13,le&=8191;var _e=oe;_e+=S*u,_e+=D*E,_e+=x*R,_e+=O*(5*b),_e+=z*(5*de),oe=_e>>>13,_e&=8191,_e+=B*(5*ce),_e+=ne*(5*se),_e+=$*(5*W),_e+=L*(5*G),_e+=P*(5*w),oe+=_e>>>13,_e&=8191;var H=oe;H+=S*w,H+=D*u,H+=x*E,H+=O*R,H+=z*(5*b),oe=H>>>13,H&=8191,H+=B*(5*de),H+=ne*(5*ce),H+=$*(5*se),H+=L*(5*W),H+=P*(5*G),oe+=H>>>13,H&=8191;var F=oe;F+=S*G,F+=D*w,F+=x*u,F+=O*E,F+=z*R,oe=F>>>13,F&=8191,F+=B*(5*b),F+=ne*(5*de),F+=$*(5*ce),F+=L*(5*se),F+=P*(5*W),oe+=F>>>13,F&=8191;var U=oe;U+=S*W,U+=D*G,U+=x*w,U+=O*u,U+=z*E,oe=U>>>13,U&=8191,U+=B*R,U+=ne*(5*b),U+=$*(5*de),U+=L*(5*ce),U+=P*(5*se),oe+=U>>>13,U&=8191;var d=oe;d+=S*se,d+=D*W,d+=x*G,d+=O*w,d+=z*u,oe=d>>>13,d&=8191,d+=B*E,d+=ne*R,d+=$*(5*b),d+=L*(5*de),d+=P*(5*ce),oe+=d>>>13,d&=8191;var T=oe;T+=S*ce,T+=D*se,T+=x*W,T+=O*G,T+=z*w,oe=T>>>13,T&=8191,T+=B*u,T+=ne*E,T+=$*R,T+=L*(5*b),T+=P*(5*de),oe+=T>>>13,T&=8191;var ae=oe;ae+=S*de,ae+=D*ce,ae+=x*se,ae+=O*W,ae+=z*G,oe=ae>>>13,ae&=8191,ae+=B*w,ae+=ne*u,ae+=$*E,ae+=L*R,ae+=P*(5*b),oe+=ae>>>13,ae&=8191;var fe=oe;fe+=S*b,fe+=D*de,fe+=x*ce,fe+=O*se,fe+=z*W,oe=fe>>>13,fe&=8191,fe+=B*G,fe+=ne*w,fe+=$*u,fe+=L*E,fe+=P*R,oe+=fe>>>13,fe&=8191,oe=(oe<<2)+oe|0,oe=oe+be|0,be=oe&8191,oe=oe>>>13,le+=oe,S=be,D=le,x=_e,O=H,z=F,B=U,ne=d,$=T,L=ae,P=fe,y+=16,p-=16}this._h[0]=S,this._h[1]=D,this._h[2]=x,this._h[3]=O,this._h[4]=z,this._h[5]=B,this._h[6]=ne,this._h[7]=$,this._h[8]=L,this._h[9]=P},l.prototype.finish=function(f,y){y===void 0&&(y=0);var p=new Uint16Array(10),v,S,D,x;if(this._leftover){for(x=this._leftover,this._buffer[x++]=1;x<16;x++)this._buffer[x]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(v=this._h[1]>>>13,this._h[1]&=8191,x=2;x<10;x++)this._h[x]+=v,v=this._h[x]>>>13,this._h[x]&=8191;for(this._h[0]+=v*5,v=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=v,v=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=v,p[0]=this._h[0]+5,v=p[0]>>>13,p[0]&=8191,x=1;x<10;x++)p[x]=this._h[x]+v,v=p[x]>>>13,p[x]&=8191;for(p[9]-=8192,S=(v^1)-1,x=0;x<10;x++)p[x]&=S;for(S=~S,x=0;x<10;x++)this._h[x]=this._h[x]&S|p[x];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,D=this._h[0]+this._pad[0],this._h[0]=D&65535,x=1;x<8;x++)D=(this._h[x]+this._pad[x]|0)+(D>>>16)|0,this._h[x]=D&65535;return f[y+0]=this._h[0]>>>0,f[y+1]=this._h[0]>>>8,f[y+2]=this._h[1]>>>0,f[y+3]=this._h[1]>>>8,f[y+4]=this._h[2]>>>0,f[y+5]=this._h[2]>>>8,f[y+6]=this._h[3]>>>0,f[y+7]=this._h[3]>>>8,f[y+8]=this._h[4]>>>0,f[y+9]=this._h[4]>>>8,f[y+10]=this._h[5]>>>0,f[y+11]=this._h[5]>>>8,f[y+12]=this._h[6]>>>0,f[y+13]=this._h[6]>>>8,f[y+14]=this._h[7]>>>0,f[y+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(f){var y=0,p=f.length,v;if(this._leftover){v=16-this._leftover,v>p&&(v=p);for(var S=0;S<v;S++)this._buffer[this._leftover+S]=f[y+S];if(p-=v,y+=v,this._leftover+=v,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(v=p-p%16,this._blocks(f,y,v),y+=v,p-=v),p){for(var S=0;S<p;S++)this._buffer[this._leftover+S]=f[y+S];this._leftover+=p}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},l.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();i.Poly1305=s;function o(l,f){var y=new s(l);y.update(f);var p=y.digest();return y.clean(),p}i.oneTimeAuth=o;function c(l,f){return l.length!==i.DIGEST_LENGTH||f.length!==i.DIGEST_LENGTH?!1:e.equal(l,f)}i.equal=c})(tp);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=oa,t=tp,s=Cr,o=Le,c=Fi;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var l=new Uint8Array(16),f=function(){function y(p){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,p.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return y.prototype.seal=function(p,v,S,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var x=new Uint8Array(16);x.set(p,x.length-p.length);var O=new Uint8Array(32);e.stream(this._key,x,O,4);var z=v.length+this.tagLength,B;if(D){if(D.length!==z)throw new Error("ChaCha20Poly1305: incorrect destination length");B=D}else B=new Uint8Array(z);return e.streamXOR(this._key,x,v,B,4),this._authenticate(B.subarray(B.length-this.tagLength,B.length),O,B.subarray(0,B.length-this.tagLength),S),s.wipe(x),B},y.prototype.open=function(p,v,S,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(v.length<this.tagLength)return null;var x=new Uint8Array(16);x.set(p,x.length-p.length);var O=new Uint8Array(32);e.stream(this._key,x,O,4);var z=new Uint8Array(this.tagLength);if(this._authenticate(z,O,v.subarray(0,v.length-this.tagLength),S),!c.equal(z,v.subarray(v.length-this.tagLength,v.length)))return null;var B=v.length-this.tagLength,ne;if(D){if(D.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");ne=D}else ne=new Uint8Array(B);return e.streamXOR(this._key,x,v.subarray(0,v.length-this.tagLength),ne,4),s.wipe(x),ne},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(p,v,S,D){var x=new t.Poly1305(v);D&&(x.update(D),D.length%16>0&&x.update(l.subarray(D.length%16))),x.update(S),S.length%16>0&&x.update(l.subarray(S.length%16));var O=new Uint8Array(8);D&&o.writeUint64LE(D.length,O),x.update(O),o.writeUint64LE(S.length,O),x.update(O);for(var z=x.digest(),B=0;B<z.length;B++)p[B]=z[B];x.clean(),s.wipe(z),s.wipe(O)},y}();i.ChaCha20Poly1305=f})(Ku);var ip={},Ts={},Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});function _b(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Vu.isSerializableHash=_b;Object.defineProperty(Ts,"__esModule",{value:!0});var ii=Vu,mb=Fi,wb=Cr,np=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ii.isSerializableHash(this._inner)&&ii.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),wb.wipe(s)}return i.prototype.reset=function(){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ii.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ii.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();Ts.HMAC=np;function bb(i,e,t){var s=new np(i,e);s.update(t);var o=s.digest();return s.clean(),o}Ts.hmac=bb;Ts.equal=mb.equal;Object.defineProperty(ip,"__esModule",{value:!0});var lf=Ts,ff=Cr,Eb=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=lf.hmac(this._hash,s,t);this._hmac=new lf.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),ff.wipe(this._buffer),ff.wipe(this._counter),this._bufpos=0},i}(),Db=ip.HKDF=Eb,zn={},aa={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.BrowserRandomSource=void 0;const df=65536;class Sb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=df)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,df)));return t}}ca.BrowserRandomSource=Sb;function Ib(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.NodeRandomSource=void 0;const xb=Cr;class Ob{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Ib<"u"){const e=Hw;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,xb.wipe)(t),s}}ua.NodeRandomSource=Ob;Object.defineProperty(aa,"__esModule",{value:!0});aa.SystemRandomSource=void 0;const Pb=ca,Cb=ua;class Ab{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Pb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Cb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}aa.SystemRandomSource=Ab;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=aa,t=Le,s=Cr;i.defaultRandomSource=new e.SystemRandomSource;function o(p,v=i.defaultRandomSource){return v.randomBytes(p)}i.randomBytes=o;function c(p=i.defaultRandomSource){const v=o(4,p),S=(0,t.readUint32LE)(v);return(0,s.wipe)(v),S}i.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(p,v=l,S=i.defaultRandomSource){if(v.length<2)throw new Error("randomString charset is too short");if(v.length>256)throw new Error("randomString charset is too long");let D="";const x=v.length,O=256-256%x;for(;p>0;){const z=o(Math.ceil(p*256/O),S);for(let B=0;B<z.length&&p>0;B++){const ne=z[B];ne<O&&(D+=v.charAt(ne%x),p--)}(0,s.wipe)(z)}return D}i.randomString=f;function y(p,v=l,S=i.defaultRandomSource){const D=Math.ceil(p/(Math.log(v.length)/Math.LN2));return f(D,v,S)}i.randomStringForEntropy=y})(zn);var ha={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Le,t=Cr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=y[v++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._temp,this._state,y,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[v++],p--;return this},f.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,S=p/536870912|0,D=p<<3,x=p%64<56?64:128;this._buffer[v]=128;for(var O=v+1;O<x-8;O++)this._buffer[O]=0;e.writeUint32BE(S,this._buffer,x-8),e.writeUint32BE(D,this._buffer,x-4),c(this._temp,this._state,this._buffer,0,x),this._finished=!0}for(var O=0;O<this.digestLength/4;O++)e.writeUint32BE(this._state[O],y,O*4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.state),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(f,y,p,v,S){for(;S>=64;){for(var D=y[0],x=y[1],O=y[2],z=y[3],B=y[4],ne=y[5],$=y[6],L=y[7],P=0;P<16;P++){var R=v+P*4;f[P]=e.readUint32BE(p,R)}for(var P=16;P<64;P++){var E=f[P-2],u=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=f[P-15];var w=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;f[P]=(u+f[P-7]|0)+(w+f[P-16]|0)}for(var P=0;P<64;P++){var u=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&ne^~B&$)|0)+(L+(o[P]+f[P]|0)|0)|0,w=((D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10))+(D&x^D&O^x&O)|0;L=$,$=ne,ne=B,B=z+u|0,z=O,O=x,x=D,D=u+w|0}y[0]+=D,y[1]+=x,y[2]+=O,y[3]+=z,y[4]+=B,y[5]+=ne,y[6]+=$,y[7]+=L,v+=64,S-=64}return v}function l(f){var y=new s;y.update(f);var p=y.digest();return y.clean(),p}i.hash=l})(ha);var ku={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=zn,t=Cr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(P){const R=new Float64Array(16);if(P)for(let E=0;E<P.length;E++)R[E]=P[E];return R}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function l(P){let R=1;for(let E=0;E<16;E++){let u=P[E]+R+65535;R=Math.floor(u/65536),P[E]=u-R*65536}P[0]+=R-1+37*(R-1)}function f(P,R,E){const u=~(E-1);for(let w=0;w<16;w++){const G=u&(P[w]^R[w]);P[w]^=G,R[w]^=G}}function y(P,R){const E=s(),u=s();for(let w=0;w<16;w++)u[w]=R[w];l(u),l(u),l(u);for(let w=0;w<2;w++){E[0]=u[0]-65517;for(let W=1;W<15;W++)E[W]=u[W]-65535-(E[W-1]>>16&1),E[W-1]&=65535;E[15]=u[15]-32767-(E[14]>>16&1);const G=E[15]>>16&1;E[14]&=65535,f(u,E,1-G)}for(let w=0;w<16;w++)P[2*w]=u[w]&255,P[2*w+1]=u[w]>>8}function p(P,R){for(let E=0;E<16;E++)P[E]=R[2*E]+(R[2*E+1]<<8);P[15]&=32767}function v(P,R,E){for(let u=0;u<16;u++)P[u]=R[u]+E[u]}function S(P,R,E){for(let u=0;u<16;u++)P[u]=R[u]-E[u]}function D(P,R,E){let u,w,G=0,W=0,se=0,ce=0,de=0,b=0,A=0,ee=0,Q=0,V=0,k=0,J=0,re=0,we=0,oe=0,be=0,le=0,_e=0,H=0,F=0,U=0,d=0,T=0,ae=0,fe=0,Ie=0,He=0,Ve=0,je=0,gt=0,yt=0,qe=E[0],xe=E[1],Ne=E[2],$e=E[3],Fe=E[4],Pe=E[5],Ue=E[6],Se=E[7],Ce=E[8],Be=E[9],Oe=E[10],ke=E[11],We=E[12],et=E[13],tt=E[14],Qe=E[15];u=R[0],G+=u*qe,W+=u*xe,se+=u*Ne,ce+=u*$e,de+=u*Fe,b+=u*Pe,A+=u*Ue,ee+=u*Se,Q+=u*Ce,V+=u*Be,k+=u*Oe,J+=u*ke,re+=u*We,we+=u*et,oe+=u*tt,be+=u*Qe,u=R[1],W+=u*qe,se+=u*xe,ce+=u*Ne,de+=u*$e,b+=u*Fe,A+=u*Pe,ee+=u*Ue,Q+=u*Se,V+=u*Ce,k+=u*Be,J+=u*Oe,re+=u*ke,we+=u*We,oe+=u*et,be+=u*tt,le+=u*Qe,u=R[2],se+=u*qe,ce+=u*xe,de+=u*Ne,b+=u*$e,A+=u*Fe,ee+=u*Pe,Q+=u*Ue,V+=u*Se,k+=u*Ce,J+=u*Be,re+=u*Oe,we+=u*ke,oe+=u*We,be+=u*et,le+=u*tt,_e+=u*Qe,u=R[3],ce+=u*qe,de+=u*xe,b+=u*Ne,A+=u*$e,ee+=u*Fe,Q+=u*Pe,V+=u*Ue,k+=u*Se,J+=u*Ce,re+=u*Be,we+=u*Oe,oe+=u*ke,be+=u*We,le+=u*et,_e+=u*tt,H+=u*Qe,u=R[4],de+=u*qe,b+=u*xe,A+=u*Ne,ee+=u*$e,Q+=u*Fe,V+=u*Pe,k+=u*Ue,J+=u*Se,re+=u*Ce,we+=u*Be,oe+=u*Oe,be+=u*ke,le+=u*We,_e+=u*et,H+=u*tt,F+=u*Qe,u=R[5],b+=u*qe,A+=u*xe,ee+=u*Ne,Q+=u*$e,V+=u*Fe,k+=u*Pe,J+=u*Ue,re+=u*Se,we+=u*Ce,oe+=u*Be,be+=u*Oe,le+=u*ke,_e+=u*We,H+=u*et,F+=u*tt,U+=u*Qe,u=R[6],A+=u*qe,ee+=u*xe,Q+=u*Ne,V+=u*$e,k+=u*Fe,J+=u*Pe,re+=u*Ue,we+=u*Se,oe+=u*Ce,be+=u*Be,le+=u*Oe,_e+=u*ke,H+=u*We,F+=u*et,U+=u*tt,d+=u*Qe,u=R[7],ee+=u*qe,Q+=u*xe,V+=u*Ne,k+=u*$e,J+=u*Fe,re+=u*Pe,we+=u*Ue,oe+=u*Se,be+=u*Ce,le+=u*Be,_e+=u*Oe,H+=u*ke,F+=u*We,U+=u*et,d+=u*tt,T+=u*Qe,u=R[8],Q+=u*qe,V+=u*xe,k+=u*Ne,J+=u*$e,re+=u*Fe,we+=u*Pe,oe+=u*Ue,be+=u*Se,le+=u*Ce,_e+=u*Be,H+=u*Oe,F+=u*ke,U+=u*We,d+=u*et,T+=u*tt,ae+=u*Qe,u=R[9],V+=u*qe,k+=u*xe,J+=u*Ne,re+=u*$e,we+=u*Fe,oe+=u*Pe,be+=u*Ue,le+=u*Se,_e+=u*Ce,H+=u*Be,F+=u*Oe,U+=u*ke,d+=u*We,T+=u*et,ae+=u*tt,fe+=u*Qe,u=R[10],k+=u*qe,J+=u*xe,re+=u*Ne,we+=u*$e,oe+=u*Fe,be+=u*Pe,le+=u*Ue,_e+=u*Se,H+=u*Ce,F+=u*Be,U+=u*Oe,d+=u*ke,T+=u*We,ae+=u*et,fe+=u*tt,Ie+=u*Qe,u=R[11],J+=u*qe,re+=u*xe,we+=u*Ne,oe+=u*$e,be+=u*Fe,le+=u*Pe,_e+=u*Ue,H+=u*Se,F+=u*Ce,U+=u*Be,d+=u*Oe,T+=u*ke,ae+=u*We,fe+=u*et,Ie+=u*tt,He+=u*Qe,u=R[12],re+=u*qe,we+=u*xe,oe+=u*Ne,be+=u*$e,le+=u*Fe,_e+=u*Pe,H+=u*Ue,F+=u*Se,U+=u*Ce,d+=u*Be,T+=u*Oe,ae+=u*ke,fe+=u*We,Ie+=u*et,He+=u*tt,Ve+=u*Qe,u=R[13],we+=u*qe,oe+=u*xe,be+=u*Ne,le+=u*$e,_e+=u*Fe,H+=u*Pe,F+=u*Ue,U+=u*Se,d+=u*Ce,T+=u*Be,ae+=u*Oe,fe+=u*ke,Ie+=u*We,He+=u*et,Ve+=u*tt,je+=u*Qe,u=R[14],oe+=u*qe,be+=u*xe,le+=u*Ne,_e+=u*$e,H+=u*Fe,F+=u*Pe,U+=u*Ue,d+=u*Se,T+=u*Ce,ae+=u*Be,fe+=u*Oe,Ie+=u*ke,He+=u*We,Ve+=u*et,je+=u*tt,gt+=u*Qe,u=R[15],be+=u*qe,le+=u*xe,_e+=u*Ne,H+=u*$e,F+=u*Fe,U+=u*Pe,d+=u*Ue,T+=u*Se,ae+=u*Ce,fe+=u*Be,Ie+=u*Oe,He+=u*ke,Ve+=u*We,je+=u*et,gt+=u*tt,yt+=u*Qe,G+=38*le,W+=38*_e,se+=38*H,ce+=38*F,de+=38*U,b+=38*d,A+=38*T,ee+=38*ae,Q+=38*fe,V+=38*Ie,k+=38*He,J+=38*Ve,re+=38*je,we+=38*gt,oe+=38*yt,w=1,u=G+w+65535,w=Math.floor(u/65536),G=u-w*65536,u=W+w+65535,w=Math.floor(u/65536),W=u-w*65536,u=se+w+65535,w=Math.floor(u/65536),se=u-w*65536,u=ce+w+65535,w=Math.floor(u/65536),ce=u-w*65536,u=de+w+65535,w=Math.floor(u/65536),de=u-w*65536,u=b+w+65535,w=Math.floor(u/65536),b=u-w*65536,u=A+w+65535,w=Math.floor(u/65536),A=u-w*65536,u=ee+w+65535,w=Math.floor(u/65536),ee=u-w*65536,u=Q+w+65535,w=Math.floor(u/65536),Q=u-w*65536,u=V+w+65535,w=Math.floor(u/65536),V=u-w*65536,u=k+w+65535,w=Math.floor(u/65536),k=u-w*65536,u=J+w+65535,w=Math.floor(u/65536),J=u-w*65536,u=re+w+65535,w=Math.floor(u/65536),re=u-w*65536,u=we+w+65535,w=Math.floor(u/65536),we=u-w*65536,u=oe+w+65535,w=Math.floor(u/65536),oe=u-w*65536,u=be+w+65535,w=Math.floor(u/65536),be=u-w*65536,G+=w-1+37*(w-1),w=1,u=G+w+65535,w=Math.floor(u/65536),G=u-w*65536,u=W+w+65535,w=Math.floor(u/65536),W=u-w*65536,u=se+w+65535,w=Math.floor(u/65536),se=u-w*65536,u=ce+w+65535,w=Math.floor(u/65536),ce=u-w*65536,u=de+w+65535,w=Math.floor(u/65536),de=u-w*65536,u=b+w+65535,w=Math.floor(u/65536),b=u-w*65536,u=A+w+65535,w=Math.floor(u/65536),A=u-w*65536,u=ee+w+65535,w=Math.floor(u/65536),ee=u-w*65536,u=Q+w+65535,w=Math.floor(u/65536),Q=u-w*65536,u=V+w+65535,w=Math.floor(u/65536),V=u-w*65536,u=k+w+65535,w=Math.floor(u/65536),k=u-w*65536,u=J+w+65535,w=Math.floor(u/65536),J=u-w*65536,u=re+w+65535,w=Math.floor(u/65536),re=u-w*65536,u=we+w+65535,w=Math.floor(u/65536),we=u-w*65536,u=oe+w+65535,w=Math.floor(u/65536),oe=u-w*65536,u=be+w+65535,w=Math.floor(u/65536),be=u-w*65536,G+=w-1+37*(w-1),P[0]=G,P[1]=W,P[2]=se,P[3]=ce,P[4]=de,P[5]=b,P[6]=A,P[7]=ee,P[8]=Q,P[9]=V,P[10]=k,P[11]=J,P[12]=re,P[13]=we,P[14]=oe,P[15]=be}function x(P,R){D(P,R,R)}function O(P,R){const E=s();for(let u=0;u<16;u++)E[u]=R[u];for(let u=253;u>=0;u--)x(E,E),u!==2&&u!==4&&D(E,E,R);for(let u=0;u<16;u++)P[u]=E[u]}function z(P,R){const E=new Uint8Array(32),u=new Float64Array(80),w=s(),G=s(),W=s(),se=s(),ce=s(),de=s();for(let Q=0;Q<31;Q++)E[Q]=P[Q];E[31]=P[31]&127|64,E[0]&=248,p(u,R);for(let Q=0;Q<16;Q++)G[Q]=u[Q];w[0]=se[0]=1;for(let Q=254;Q>=0;--Q){const V=E[Q>>>3]>>>(Q&7)&1;f(w,G,V),f(W,se,V),v(ce,w,W),S(w,w,W),v(W,G,se),S(G,G,se),x(se,ce),x(de,w),D(w,W,w),D(W,G,ce),v(ce,w,W),S(w,w,W),x(G,w),S(W,se,de),D(w,W,c),v(w,w,se),D(W,W,w),D(w,se,de),D(se,G,u),x(G,ce),f(w,G,V),f(W,se,V)}for(let Q=0;Q<16;Q++)u[Q+16]=w[Q],u[Q+32]=W[Q],u[Q+48]=G[Q],u[Q+64]=se[Q];const b=u.subarray(32),A=u.subarray(16);O(b,b),D(A,A,b);const ee=new Uint8Array(32);return y(ee,A),ee}i.scalarMult=z;function B(P){return z(P,o)}i.scalarMultBase=B;function ne(P){if(P.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const R=new Uint8Array(P);return{publicKey:B(R),secretKey:R}}i.generateKeyPairFromSeed=ne;function $(P){const R=(0,e.randomBytes)(32,P),E=ne(R);return(0,t.wipe)(R),E}i.generateKeyPair=$;function L(P,R,E=!1){if(P.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(R.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=z(P,R);if(E){let w=0;for(let G=0;G<u.length;G++)w|=u[G];if(w===0)throw new Error("X25519: invalid shared key")}return u}i.sharedKey=L})(ku);function Gu(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function sp(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Gu(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function yu(i,e){e||(e=i.reduce((o,c)=>o+c.length,0));const t=sp(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return Gu(t)}function Tb(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=i.length,y=i.charAt(0),p=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function S(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var z=0,B=0,ne=0,$=O.length;ne!==$&&O[ne]===0;)ne++,z++;for(var L=($-ne)*v+1>>>0,P=new Uint8Array(L);ne!==$;){for(var R=O[ne],E=0,u=L-1;(R!==0||E<B)&&u!==-1;u--,E++)R+=256*P[u]>>>0,P[u]=R%f>>>0,R=R/f>>>0;if(R!==0)throw new Error("Non-zero carry");B=E,ne++}for(var w=L-B;w!==L&&P[w]===0;)w++;for(var G=y.repeat(z);w<L;++w)G+=i.charAt(P[w]);return G}function D(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var z=0;if(O[z]!==" "){for(var B=0,ne=0;O[z]===y;)B++,z++;for(var $=(O.length-z)*p+1>>>0,L=new Uint8Array($);O[z];){var P=t[O.charCodeAt(z)];if(P===255)return;for(var R=0,E=$-1;(P!==0||R<ne)&&E!==-1;E--,R++)P+=f*L[E]>>>0,L[E]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ne=R,z++}if(O[z]!==" "){for(var u=$-ne;u!==$&&L[u]===0;)u++;for(var w=new Uint8Array(B+($-u)),G=B;u!==$;)w[G++]=L[u++];return w}}}function x(O){var z=D(O);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:D,decode:x}}var Rb=Tb,Nb=Rb;const $b=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Ub=i=>new TextEncoder().encode(i),Lb=i=>new TextDecoder().decode(i);class jb{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Mb{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return op(this,e)}}class qb{constructor(e){this.decoders=e}or(e){return op(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const op=(i,e)=>new qb({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class Fb{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new jb(e,t,s),this.decoder=new Mb(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const la=({name:i,prefix:e,encode:t,decode:s})=>new Fb(i,e,t,s),Rs=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=Nb(t,e);return la({prefix:i,name:e,encode:s,decode:c=>$b(o(c))})},zb=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,y=0,p=0;for(let v=0;v<c;++v){const S=o[i[v]];if(S===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|S,f+=t,f>=8&&(f-=8,l[p++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return l},Hb=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let y=0;y<i.length;++y)for(f=f<<8|i[y],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>la({prefix:e,name:i,encode(o){return Hb(o,s,t)},decode(o){return zb(o,s,t,i)}}),Bb=la({prefix:"\0",name:"identity",encode:i=>Lb(i),decode:i=>Ub(i)}),Kb=Object.freeze(Object.defineProperty({__proto__:null,identity:Bb},Symbol.toStringTag,{value:"Module"})),Vb=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),kb=Object.freeze(Object.defineProperty({__proto__:null,base2:Vb},Symbol.toStringTag,{value:"Module"})),Gb=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Wb=Object.freeze(Object.defineProperty({__proto__:null,base8:Gb},Symbol.toStringTag,{value:"Module"})),Yb=Rs({prefix:"9",name:"base10",alphabet:"0123456789"}),Jb=Object.freeze(Object.defineProperty({__proto__:null,base10:Yb},Symbol.toStringTag,{value:"Module"})),Qb=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Xb=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Zb=Object.freeze(Object.defineProperty({__proto__:null,base16:Qb,base16upper:Xb},Symbol.toStringTag,{value:"Module"})),e1=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),t1=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),r1=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),i1=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),n1=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),s1=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),o1=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),a1=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),c1=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),u1=Object.freeze(Object.defineProperty({__proto__:null,base32:e1,base32hex:n1,base32hexpad:o1,base32hexpadupper:a1,base32hexupper:s1,base32pad:r1,base32padupper:i1,base32upper:t1,base32z:c1},Symbol.toStringTag,{value:"Module"})),h1=Rs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),l1=Rs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),f1=Object.freeze(Object.defineProperty({__proto__:null,base36:h1,base36upper:l1},Symbol.toStringTag,{value:"Module"})),d1=Rs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),p1=Rs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),g1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:d1,base58flickr:p1},Symbol.toStringTag,{value:"Module"})),y1=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),v1=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_1=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),m1=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),w1=Object.freeze(Object.defineProperty({__proto__:null,base64:y1,base64pad:v1,base64url:_1,base64urlpad:m1},Symbol.toStringTag,{value:"Module"})),ap=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),b1=ap.reduce((i,e,t)=>(i[t]=e,i),[]),E1=ap.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function D1(i){return i.reduce((e,t)=>(e+=b1[t],e),"")}function S1(i){const e=[];for(const t of i){const s=E1[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const I1=la({prefix:"🚀",name:"base256emoji",encode:D1,decode:S1}),x1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:I1},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const pf={...Kb,...kb,...Wb,...Jb,...Zb,...u1,...f1,...g1,...w1,...x1};function cp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const gf=cp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Bc=cp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=sp(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),up={utf8:gf,"utf-8":gf,hex:pf.base16,latin1:Bc,ascii:Bc,binary:Bc,...pf};function br(i,e="utf8"){const t=up[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Gu(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function lr(i,e="utf8"){const t=up[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var yf=function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},O1=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),P1=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=si.platform}return i}(),C1=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),A1=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),T1=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),R1=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,N1=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,vf=3,$1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",R1]],_f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function U1(i){return i?mf(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new T1:typeof navigator<"u"?mf(navigator.userAgent):M1()}function L1(i){return i!==""&&$1.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(i);return!!c&&[s,c]},!1)}function mf(i){var e=L1(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new A1;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<vf&&(o=yf(yf([],o,!0),q1(vf-o.length),!0)):o=[];var c=o.join("."),l=j1(i),f=N1.exec(i);return f&&f[1]?new C1(t,c,l,f[1]):new O1(t,c,l)}function j1(i){for(var e=0,t=_f.length;e<t;e++){var s=_f[e],o=s[0],c=s[1],l=c.exec(i);if(l)return o}return null}function M1(){var i=typeof si<"u"&&si.version;return i?new P1(si.version.slice(1)):null}function q1(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var ve={};var vu=function(i,e){return vu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},vu(i,e)};function F1(i,e){vu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _u=function(){return _u=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},_u.apply(this,arguments)};function z1(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function H1(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function B1(i,e){return function(t,s){e(t,s,i)}}function K1(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function V1(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function k1(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function G1(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function W1(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function mu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function Y1(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(hp(arguments[e]));return i}function J1(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function Is(i){return this instanceof Is?(this.v=i,this):new Is(i)}function Q1(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof Is?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function X1(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:Is(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function Z1(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof mu=="function"?mu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function eE(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function tE(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function rE(i){return i&&i.__esModule?i:{default:i}}function iE(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function nE(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const sE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return _u},__asyncDelegator:X1,__asyncGenerator:Q1,__asyncValues:Z1,__await:Is,__awaiter:V1,__classPrivateFieldGet:iE,__classPrivateFieldSet:nE,__createBinding:G1,__decorate:H1,__exportStar:W1,__extends:F1,__generator:k1,__importDefault:rE,__importStar:tE,__makeTemplateObject:eE,__metadata:K1,__param:B1,__read:hp,__rest:z1,__spread:Y1,__spreadArrays:J1,__values:mu},Symbol.toStringTag,{value:"Module"})),fa=Fn(sE);var Kc={},fs={},wf;function oE(){if(wf)return fs;wf=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return fs.delay=i,fs}var rn={},Vc={},nn={},bf;function aE(){return bf||(bf=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ONE_THOUSAND=nn.ONE_HUNDRED=void 0,nn.ONE_HUNDRED=100,nn.ONE_THOUSAND=1e3),nn}var kc={},Ef;function cE(){return Ef||(Ef=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(kc)),kc}var Df;function lp(){return Df||(Df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=fa;e.__exportStar(aE(),i),e.__exportStar(cE(),i)}(Vc)),Vc}var Sf;function uE(){if(Sf)return rn;Sf=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.fromMiliseconds=rn.toMiliseconds=void 0;const i=lp();function e(s){return s*i.ONE_THOUSAND}rn.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return rn.fromMiliseconds=t,rn}var If;function hE(){return If||(If=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=fa;e.__exportStar(oE(),i),e.__exportStar(uE(),i)}(Kc)),Kc}var $n={},xf;function lE(){if(xf)return $n;xf=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return $n.Watch=i,$n.default=i,$n}var Gc={},ds={},Of;function fE(){if(Of)return ds;Of=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.IWatch=void 0;class i{}return ds.IWatch=i,ds}var Pf;function dE(){return Pf||(Pf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),fa.__exportStar(fE(),i)}(Gc)),Gc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=fa;e.__exportStar(hE(),i),e.__exportStar(lE(),i),e.__exportStar(dE(),i),e.__exportStar(lp(),i)})(ve);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=fp=ft.getLocation=ft.getLocationOrThrow=Yu=ft.getNavigator=ft.getNavigatorOrThrow=Wu=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function un(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}ft.getFromWindow=un;function Hn(i){const e=un(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}ft.getFromWindowOrThrow=Hn;function pE(){return Hn("document")}ft.getDocumentOrThrow=pE;function gE(){return un("document")}var Wu=ft.getDocument=gE;function yE(){return Hn("navigator")}ft.getNavigatorOrThrow=yE;function vE(){return un("navigator")}var Yu=ft.getNavigator=vE;function _E(){return Hn("location")}ft.getLocationOrThrow=_E;function mE(){return un("location")}var fp=ft.getLocation=mE;function wE(){return Hn("crypto")}ft.getCryptoOrThrow=wE;function bE(){return un("crypto")}ft.getCrypto=bE;function EE(){return Hn("localStorage")}ft.getLocalStorageOrThrow=EE;function DE(){return un("localStorage")}ft.getLocalStorage=DE;var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});var dp=Ju.getWindowMetadata=void 0;const Cf=ft;function SE(){let i,e;try{i=Cf.getDocumentOrThrow(),e=Cf.getLocationOrThrow()}catch{return null}function t(){const S=i.getElementsByTagName("link"),D=[];for(let x=0;x<S.length;x++){const O=S[x],z=O.getAttribute("rel");if(z&&z.toLowerCase().indexOf("icon")>-1){const B=O.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let ne=e.protocol+"//"+e.host;if(B.indexOf("/")===0)ne+=B;else{const $=e.pathname.split("/");$.pop();const L=$.join("/");ne+=L+"/"+B}D.push(ne)}else if(B.indexOf("//")===0){const ne=e.protocol+B;D.push(ne)}else D.push(B)}}return D}function s(...S){const D=i.getElementsByTagName("meta");for(let x=0;x<D.length;x++){const O=D[x],z=["itemprop","property","name"].map(B=>O.getAttribute(B)).filter(B=>B?S.includes(B):!1);if(z.length&&z){const B=O.getAttribute("content");if(B)return B}}return""}function o(){let S=s("name","og:site_name","og:title","twitter:title");return S||(S=i.title),S}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),f=c(),y=e.origin,p=t();return{description:f,url:y,icons:p,name:l}}dp=Ju.getWindowMetadata=SE;var xs={},IE=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),pp="%[a-f0-9]{2}",Af=new RegExp("("+pp+")|([^%]+?)","gi"),Tf=new RegExp("("+pp+")+","gi");function wu(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],wu(t),wu(s))}function xE(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(Af)||[],t=1;t<e.length;t++)i=wu(e,t).join(""),e=i.match(Af)||[];return i}}function OE(i){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=Tf.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=xE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Tf.exec(i)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var l=o[c];i=i.replace(new RegExp(l,"g"),e[l])}return i}var PE=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return OE(i)}},CE=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},AE=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),c=0;c<s.length;c++){var l=s[c],f=i[l];(o?e.indexOf(l)!==-1:e(l,f,i))&&(t[l]=f)}return t};(function(i){const e=IE,t=PE,s=CE,o=AE,c=$=>$==null,l=Symbol("encodeFragmentIdentifier");function f($){switch($.arrayFormat){case"index":return L=>(P,R)=>{const E=P.length;return R===void 0||$.skipNull&&R===null||$.skipEmptyString&&R===""?P:R===null?[...P,[v(L,$),"[",E,"]"].join("")]:[...P,[v(L,$),"[",v(E,$),"]=",v(R,$)].join("")]};case"bracket":return L=>(P,R)=>R===void 0||$.skipNull&&R===null||$.skipEmptyString&&R===""?P:R===null?[...P,[v(L,$),"[]"].join("")]:[...P,[v(L,$),"[]=",v(R,$)].join("")];case"colon-list-separator":return L=>(P,R)=>R===void 0||$.skipNull&&R===null||$.skipEmptyString&&R===""?P:R===null?[...P,[v(L,$),":list="].join("")]:[...P,[v(L,$),":list=",v(R,$)].join("")];case"comma":case"separator":case"bracket-separator":{const L=$.arrayFormat==="bracket-separator"?"[]=":"=";return P=>(R,E)=>E===void 0||$.skipNull&&E===null||$.skipEmptyString&&E===""?R:(E=E===null?"":E,R.length===0?[[v(P,$),L,v(E,$)].join("")]:[[R,v(E,$)].join($.arrayFormatSeparator)])}default:return L=>(P,R)=>R===void 0||$.skipNull&&R===null||$.skipEmptyString&&R===""?P:R===null?[...P,v(L,$)]:[...P,[v(L,$),"=",v(R,$)].join("")]}}function y($){let L;switch($.arrayFormat){case"index":return(P,R,E)=>{if(L=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!L){E[P]=R;return}E[P]===void 0&&(E[P]={}),E[P][L[1]]=R};case"bracket":return(P,R,E)=>{if(L=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!L){E[P]=R;return}if(E[P]===void 0){E[P]=[R];return}E[P]=[].concat(E[P],R)};case"colon-list-separator":return(P,R,E)=>{if(L=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!L){E[P]=R;return}if(E[P]===void 0){E[P]=[R];return}E[P]=[].concat(E[P],R)};case"comma":case"separator":return(P,R,E)=>{const u=typeof R=="string"&&R.includes($.arrayFormatSeparator),w=typeof R=="string"&&!u&&S(R,$).includes($.arrayFormatSeparator);R=w?S(R,$):R;const G=u||w?R.split($.arrayFormatSeparator).map(W=>S(W,$)):R===null?R:S(R,$);E[P]=G};case"bracket-separator":return(P,R,E)=>{const u=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!u){E[P]=R&&S(R,$);return}const w=R===null?[]:R.split($.arrayFormatSeparator).map(G=>S(G,$));if(E[P]===void 0){E[P]=w;return}E[P]=[].concat(E[P],w)};default:return(P,R,E)=>{if(E[P]===void 0){E[P]=R;return}E[P]=[].concat(E[P],R)}}}function p($){if(typeof $!="string"||$.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function v($,L){return L.encode?L.strict?e($):encodeURIComponent($):$}function S($,L){return L.decode?t($):$}function D($){return Array.isArray($)?$.sort():typeof $=="object"?D(Object.keys($)).sort((L,P)=>Number(L)-Number(P)).map(L=>$[L]):$}function x($){const L=$.indexOf("#");return L!==-1&&($=$.slice(0,L)),$}function O($){let L="";const P=$.indexOf("#");return P!==-1&&(L=$.slice(P)),L}function z($){$=x($);const L=$.indexOf("?");return L===-1?"":$.slice(L+1)}function B($,L){return L.parseNumbers&&!Number.isNaN(Number($))&&typeof $=="string"&&$.trim()!==""?$=Number($):L.parseBooleans&&$!==null&&($.toLowerCase()==="true"||$.toLowerCase()==="false")&&($=$.toLowerCase()==="true"),$}function ne($,L){L=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},L),p(L.arrayFormatSeparator);const P=y(L),R=Object.create(null);if(typeof $!="string"||($=$.trim().replace(/^[?#&]/,""),!$))return R;for(const E of $.split("&")){if(E==="")continue;let[u,w]=s(L.decode?E.replace(/\+/g," "):E,"=");w=w===void 0?null:["comma","separator","bracket-separator"].includes(L.arrayFormat)?w:S(w,L),P(S(u,L),w,R)}for(const E of Object.keys(R)){const u=R[E];if(typeof u=="object"&&u!==null)for(const w of Object.keys(u))u[w]=B(u[w],L);else R[E]=B(u,L)}return L.sort===!1?R:(L.sort===!0?Object.keys(R).sort():Object.keys(R).sort(L.sort)).reduce((E,u)=>{const w=R[u];return w&&typeof w=="object"&&!Array.isArray(w)?E[u]=D(w):E[u]=w,E},Object.create(null))}i.extract=z,i.parse=ne,i.stringify=($,L)=>{if(!$)return"";L=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},L),p(L.arrayFormatSeparator);const P=w=>L.skipNull&&c($[w])||L.skipEmptyString&&$[w]==="",R=f(L),E={};for(const w of Object.keys($))P(w)||(E[w]=$[w]);const u=Object.keys(E);return L.sort!==!1&&u.sort(L.sort),u.map(w=>{const G=$[w];return G===void 0?"":G===null?v(w,L):Array.isArray(G)?G.length===0&&L.arrayFormat==="bracket-separator"?v(w,L)+"[]":G.reduce(R(w),[]).join("&"):v(w,L)+"="+v(G,L)}).filter(w=>w.length>0).join("&")},i.parseUrl=($,L)=>{L=Object.assign({decode:!0},L);const[P,R]=s($,"#");return Object.assign({url:P.split("?")[0]||"",query:ne(z($),L)},L&&L.parseFragmentIdentifier&&R?{fragmentIdentifier:S(R,L)}:{})},i.stringifyUrl=($,L)=>{L=Object.assign({encode:!0,strict:!0,[l]:!0},L);const P=x($.url).split("?")[0]||"",R=i.extract($.url),E=i.parse(R,{sort:!1}),u=Object.assign(E,$.query);let w=i.stringify(u,L);w&&(w=`?${w}`);let G=O($.url);return $.fragmentIdentifier&&(G=`#${L[l]?v($.fragmentIdentifier,L):$.fragmentIdentifier}`),`${P}${w}${G}`},i.pick=($,L,P)=>{P=Object.assign({parseFragmentIdentifier:!0,[l]:!1},P);const{url:R,query:E,fragmentIdentifier:u}=i.parseUrl($,P);return i.stringifyUrl({url:R,query:o(E,L),fragmentIdentifier:u},P)},i.exclude=($,L,P)=>{const R=Array.isArray(L)?E=>!L.includes(E):(E,u)=>!L(E,u);return i.pick($,R,P)}})(xs);const TE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},RE=":";function NE(i){const[e,t]=i.split(RE);return{namespace:e,reference:t}}function $E(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}function gp(i,e){return i.includes(":")?[i]:e.chains||[]}const yp="base10",hr="base16",bu="base64pad",Qu="utf8",vp=0,hn=1,UE=0,Rf=1,Eu=12,Xu=32;function LE(){const i=ku.generateKeyPair();return{privateKey:lr(i.secretKey,hr),publicKey:lr(i.publicKey,hr)}}function Du(){const i=zn.randomBytes(Xu);return lr(i,hr)}function jE(i,e){const t=ku.sharedKey(br(i,hr),br(e,hr),!0),s=new Db(ha.SHA256,t).expand(Xu);return lr(s,hr)}function ME(i){const e=ha.hash(br(i,hr));return lr(e,hr)}function jn(i){const e=ha.hash(br(i,Qu));return lr(e,hr)}function qE(i){return br(`${i}`,yp)}function Ns(i){return Number(lr(i,yp))}function FE(i){const e=qE(typeof i.type<"u"?i.type:vp);if(Ns(e)===hn&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?br(i.senderPublicKey,hr):void 0,s=typeof i.iv<"u"?br(i.iv,hr):zn.randomBytes(Eu),o=new Ku.ChaCha20Poly1305(br(i.symKey,hr)).seal(s,br(i.message,Qu));return HE({type:e,sealed:o,iv:s,senderPublicKey:t})}function zE(i){const e=new Ku.ChaCha20Poly1305(br(i.symKey,hr)),{sealed:t,iv:s}=ta(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return lr(o,Qu)}function HE(i){if(Ns(i.type)===hn){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return lr(yu([i.type,i.senderPublicKey,i.iv,i.sealed]),bu)}return lr(yu([i.type,i.iv,i.sealed]),bu)}function ta(i){const e=br(i,bu),t=e.slice(UE,Rf),s=Rf;if(Ns(t)===hn){const f=s+Xu,y=f+Eu,p=e.slice(s,f),v=e.slice(f,y),S=e.slice(y);return{type:t,sealed:S,iv:v,senderPublicKey:p}}const o=s+Eu,c=e.slice(s,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function BE(i,e){const t=ta(i);return _p({type:Ns(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?lr(t.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function _p(i){const e=(i==null?void 0:i.type)||vp;if(e===hn){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function Nf(i){return i.type===hn&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var KE=Object.defineProperty,$f=Object.getOwnPropertySymbols,VE=Object.prototype.hasOwnProperty,kE=Object.prototype.propertyIsEnumerable,Uf=(i,e,t)=>e in i?KE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Lf=(i,e)=>{for(var t in e||(e={}))VE.call(e,t)&&Uf(i,t,e[t]);if($f)for(var t of $f(e))kE.call(e,t)&&Uf(i,t,e[t]);return i};const GE="ReactNative",Pr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},WE="js";function Zu(){return typeof si<"u"&&typeof si.versions<"u"&&typeof si.versions.node<"u"}function Bn(){return!Wu()&&!!Yu()&&navigator.product===GE}function Kn(){return!Zu()&&!!Yu()&&!!Wu()}function $s(){return Bn()?Pr.reactNative:Zu()?Pr.node:Kn()?Pr.browser:Pr.unknown}function YE(){var i;try{return Bn()&&typeof st<"u"&&typeof(st==null?void 0:st.Application)<"u"?(i=st.Application)==null?void 0:i.applicationId:void 0}catch{return}}function JE(i,e){let t=xs.parse(i);return t=Lf(Lf({},t),e),i=xs.stringify(t),i}function QE(){return dp()||{name:"",description:"",url:"",icons:[""]}}function XE(){if($s()===Pr.reactNative&&typeof st<"u"&&typeof(st==null?void 0:st.Platform)<"u"){const{OS:t,Version:s}=st.Platform;return[t,s].join("-")}const i=U1();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function ZE(){var i;const e=$s();return e===Pr.browser?[e,((i=fp())==null?void 0:i.host)||"unknown"].join(":"):e}function e3(i,e,t){const s=XE(),o=ZE();return[[i,e].join("-"),[WE,t].join("-"),s,o].join("/")}function t3({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:l,bundleId:f}){const y=t.split("?"),p=e3(i,e,s),v={auth:o,ua:p,projectId:c,useOnCloseEvent:l||void 0,origin:f||void 0},S=JE(y[1]||"",v);return y[0]+"?"+S}function an(i,e){return i.filter(t=>e.includes(t)).length===i.length}function mp(i){return Object.fromEntries(i.entries())}function wp(i){return new Map(Object.entries(i))}function Un(i=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(i||ve.FIVE_MINUTES);let s,o,c;return{resolve:l=>{c&&s&&(clearTimeout(c),s(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,f)=>{c=setTimeout(()=>{f(new Error(e))},t),s=l,o=f})}}function Os(i,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await i;s(l)}catch(l){o(l)}clearTimeout(c)})}function bp(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function r3(i){return bp("topic",i)}function i3(i){return bp("id",i)}function Ep(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Wr(i,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(i))}function ji(i){return Date.now()>=ve.toMiliseconds(i)}function Ht(i,e){return`${i}${e?`:${e}`:""}`}function Wc(i=[],e=[]){return[...new Set([...i,...e])]}async function n3({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${i}&sessionTopic=${e}`,l=$s();l===Pr.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):l===Pr.reactNative&&typeof(st==null?void 0:st.Linking)<"u"&&await st.Linking.openURL(c)}catch(s){console.error(s)}}async function s3(i,e){try{return await i.getItem(e)||(Kn()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}const o3="irn";function Su(i){return(i==null?void 0:i.relay)||{protocol:o3}}function Yo(i){const e=TE[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var a3=Object.defineProperty,jf=Object.getOwnPropertySymbols,c3=Object.prototype.hasOwnProperty,u3=Object.prototype.propertyIsEnumerable,Mf=(i,e,t)=>e in i?a3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,h3=(i,e)=>{for(var t in e||(e={}))c3.call(e,t)&&Mf(i,t,e[t]);if(jf)for(var t of jf(e))u3.call(e,t)&&Mf(i,t,e[t]);return i};function l3(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),l=i[o];t[c]=l}}),t}function qf(i){i=i.includes("wc://")?i.replace("wc://",""):i,i=i.includes("wc:")?i.replace("wc:",""):i;const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",l=xs.parse(c);return{protocol:s,topic:f3(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:l3(l)}}function f3(i){return i.startsWith("//")?i.substring(2):i}function d3(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const c=t+e+o;i[o]&&(s[c]=i[o])}),s}function p3(i){return`${i.protocol}:${i.topic}@${i.version}?`+xs.stringify(h3({symKey:i.symKey},d3(i.relay)))}function Vn(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function g3(i){const e=[];return Object.values(i).forEach(t=>{e.push(...Vn(t.accounts))}),e}function y3(i,e){const t=[];return Object.values(i).forEach(s=>{Vn(s.accounts).includes(e)&&t.push(...s.methods)}),t}function v3(i,e){const t=[];return Object.values(i).forEach(s=>{Vn(s.accounts).includes(e)&&t.push(...s.events)}),t}function _3(i,e){const t=Jo(i,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(i))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(l=>`${l.split(":")[0]}:${l.split(":")[1]}`)};return s}function eh(i){return i.includes(":")}function bs(i){return eh(i)?i.split(":")[0]:i}const m3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},w3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(i,e){const{message:t,code:s}=w3[i];return{message:e?`${t} ${e}`:t,code:s}}function At(i,e){const{message:t,code:s}=m3[i];return{message:e?`${t} ${e}`:t,code:s}}function oi(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function Mn(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ur(i){return typeof i>"u"}function Wt(i,e){return e&&ur(i)?!0:typeof i=="string"&&!!i.trim().length}function th(i,e){return e&&ur(i)?!0:typeof i=="number"&&!isNaN(i)}function b3(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let c=!0;return an(o,s)?(s.forEach(l=>{const{accounts:f,methods:y,events:p}=i.namespaces[l],v=Vn(f),S=t[l];(!an(gp(l,S),v)||!an(S.methods,y)||!an(S.events,p))&&(c=!1)}),c):!1}function ra(i){return Wt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function E3(i){if(Wt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ra(t)}}return!1}function D3(i){if(Wt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function S3(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function I3(i){return i==null?void 0:i.topic}function x3(i,e){let t=null;return Wt(i==null?void 0:i.publicKey,!1)||(t=ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Ff(i){let e=!0;return oi(i)?i.length&&(e=i.every(t=>Wt(t,!1))):e=!1,e}function O3(i,e,t){let s=null;return oi(e)&&e.length?e.forEach(o=>{s||ra(o)||(s=At("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):ra(i)||(s=At("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function P3(i,e,t){let s=null;return Object.entries(i).forEach(([o,c])=>{if(s)return;const l=O3(o,gp(o,c),`${e} ${t}`);l&&(s=l)}),s}function C3(i,e){let t=null;return oi(i)?i.forEach(s=>{t||E3(s)||(t=At("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=At("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function A3(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=C3(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function T3(i,e){let t=null;return Ff(i==null?void 0:i.methods)?Ff(i==null?void 0:i.events)||(t=At("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=At("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Dp(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=T3(s,`${e}, namespace`);o&&(t=o)}),t}function R3(i,e,t){let s=null;if(i&&Mn(i)){const o=Dp(i,e);o&&(s=o);const c=P3(i,e,t);c&&(s=c)}else s=ue("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function Jo(i,e){let t=null;if(i&&Mn(i)){const s=Dp(i,e);s&&(t=s);const o=A3(i,e);o&&(t=o)}else t=ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Sp(i){return Wt(i.protocol,!0)}function N3(i,e){let t=!1;return e&&!i?t=!0:i&&oi(i)&&i.length&&i.forEach(s=>{t=Sp(s)}),t}function $3(i){return typeof i=="number"}function wr(i){return typeof i<"u"&&typeof i!==null}function U3(i){return!(!i||typeof i!="object"||!i.code||!th(i.code,!1)||!i.message||!Wt(i.message,!1))}function L3(i){return!(ur(i)||!Wt(i.method,!1))}function j3(i){return!(ur(i)||ur(i.result)&&ur(i.error)||!th(i.id,!1)||!Wt(i.jsonrpc,!1))}function M3(i){return!(ur(i)||!Wt(i.name,!1))}function zf(i,e){return!(!ra(e)||!g3(i).includes(e))}function q3(i,e,t){return Wt(t,!1)?y3(i,e).includes(t):!1}function F3(i,e,t){return Wt(t,!1)?v3(i,e).includes(t):!1}function Hf(i,e,t){let s=null;const o=z3(i),c=H3(e),l=Object.keys(o),f=Object.keys(c),y=Bf(Object.keys(i)),p=Bf(Object.keys(e)),v=y.filter(S=>!p.includes(S));return v.length&&(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${v.toString()}
      Received: ${Object.keys(e).toString()}`)),an(l,f)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(S=>{if(!S.includes(":")||s)return;const D=Vn(e[S].accounts);D.includes(S)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${S}
        Required: ${S}
        Approved: ${D.toString()}`))}),l.forEach(S=>{s||(an(o[S].methods,c[S].methods)?an(o[S].events,c[S].events)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${S}`)):s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${S}`))}),s}function z3(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function Bf(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function H3(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=Vn(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(c=>c.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function B3(i,e){return th(i,!1)&&i<=e.max&&i>=e.min}function Kf(){const i=$s();return new Promise(e=>{switch(i){case Pr.browser:e(K3());break;case Pr.reactNative:e(V3());break;case Pr.node:e(k3());break;default:e(!0)}})}function K3(){return Kn()&&(navigator==null?void 0:navigator.onLine)}async function V3(){if(Bn()&&typeof st<"u"&&st!=null&&st.NetInfo){const i=await(st==null?void 0:st.NetInfo.fetch());return i==null?void 0:i.isConnected}return!0}function k3(){return!0}function G3(i){switch($s()){case Pr.browser:W3(i);break;case Pr.reactNative:Y3(i);break}}function W3(i){!Bn()&&Kn()&&(window.addEventListener("online",()=>i(!0)),window.addEventListener("offline",()=>i(!1)))}function Y3(i){var e;Bn()&&typeof st<"u"&&st!=null&&st.NetInfo&&((e=st)==null||e.NetInfo.addEventListener(t=>i(t==null?void 0:t.isConnected)))}const Yc={};let Bo=class{static get(e){return Yc[e]}static set(e,t){Yc[e]=t}static delete(e){delete Yc[e]}};const J3=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Q3=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,X3=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Z3(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){eD(i);return}return e}function eD(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function Ko(i,e={}){if(typeof i!="string")return i;const t=i.trim();if(i[0]==='"'&&i.at(-1)==='"'&&!i.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!X3.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(J3.test(i)||Q3.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,Z3)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function tD(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function Gt(i,...e){try{return tD(i(...e))}catch(t){return Promise.reject(t)}}function rD(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function iD(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function Qo(i){if(rD(i))return String(i);if(iD(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return Qo(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Ip(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Iu="base64:";function nD(i){if(typeof i=="string")return i;Ip();const e=Buffer.from(i).toString("base64");return Iu+e}function sD(i){return typeof i!="string"||!i.startsWith(Iu)?i:(Ip(),Buffer.from(i.slice(Iu.length),"base64"))}function mr(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function oD(...i){return mr(i.join(":"))}function Vo(i){return i=mr(i),i?i+":":""}const aD="memory",cD=()=>{const i=new Map;return{name:aD,options:{},hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,t){i.set(e,t)},setItemRaw(e,t){i.set(e,t)},removeItem(e){i.delete(e)},getKeys(){return Array.from(i.keys())},clear(){i.clear()},dispose(){i.clear()}}};function uD(i={}){const e={mounts:{"":i.driver||cD()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const v of e.mountpoints)if(p.startsWith(v))return{base:v,relativeKey:p.slice(v.length),driver:e.mounts[v]};return{base:"",relativeKey:p,driver:e.mounts[""]}},s=(p,v)=>e.mountpoints.filter(S=>S.startsWith(p)||v&&p.startsWith(S)).map(S=>({relativeBase:p.length>S.length?p.slice(S.length):void 0,mountpoint:S,driver:e.mounts[S]})),o=(p,v)=>{if(e.watching){v=mr(v);for(const S of e.watchListeners)S(p,v)}},c=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await Vf(e.mounts[p],o,p)}},l=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},f=(p,v,S)=>{const D=new Map,x=O=>{let z=D.get(O.base);return z||(z={driver:O.driver,base:O.base,items:[]},D.set(O.base,z)),z};for(const O of p){const z=typeof O=="string",B=mr(z?O:O.key),ne=z?void 0:O.value,$=z||!O.options?v:{...v,...O.options},L=t(B);x(L).items.push({key:B,value:ne,relativeKey:L.relativeKey,options:$})}return Promise.all([...D.values()].map(O=>S(O))).then(O=>O.flat())},y={hasItem(p,v={}){p=mr(p);const{relativeKey:S,driver:D}=t(p);return Gt(D.hasItem,S,v)},getItem(p,v={}){p=mr(p);const{relativeKey:S,driver:D}=t(p);return Gt(D.getItem,S,v).then(x=>Ko(x))},getItems(p,v){return f(p,v,S=>S.driver.getItems?Gt(S.driver.getItems,S.items.map(D=>({key:D.relativeKey,options:D.options})),v).then(D=>D.map(x=>({key:oD(S.base,x.key),value:Ko(x.value)}))):Promise.all(S.items.map(D=>Gt(S.driver.getItem,D.relativeKey,D.options).then(x=>({key:D.key,value:Ko(x)})))))},getItemRaw(p,v={}){p=mr(p);const{relativeKey:S,driver:D}=t(p);return D.getItemRaw?Gt(D.getItemRaw,S,v):Gt(D.getItem,S,v).then(x=>sD(x))},async setItem(p,v,S={}){if(v===void 0)return y.removeItem(p);p=mr(p);const{relativeKey:D,driver:x}=t(p);x.setItem&&(await Gt(x.setItem,D,Qo(v),S),x.watch||o("update",p))},async setItems(p,v){await f(p,v,async S=>{S.driver.setItems&&await Gt(S.driver.setItems,S.items.map(D=>({key:D.relativeKey,value:Qo(D.value),options:D.options})),v),S.driver.setItem&&await Promise.all(S.items.map(D=>Gt(S.driver.setItem,D.relativeKey,Qo(D.value),D.options)))})},async setItemRaw(p,v,S={}){if(v===void 0)return y.removeItem(p,S);p=mr(p);const{relativeKey:D,driver:x}=t(p);if(x.setItemRaw)await Gt(x.setItemRaw,D,v,S);else if(x.setItem)await Gt(x.setItem,D,nD(v),S);else return;x.watch||o("update",p)},async removeItem(p,v={}){typeof v=="boolean"&&(v={removeMeta:v}),p=mr(p);const{relativeKey:S,driver:D}=t(p);D.removeItem&&(await Gt(D.removeItem,S,v),(v.removeMeta||v.removeMata)&&await Gt(D.removeItem,S+"$",v),D.watch||o("remove",p))},async getMeta(p,v={}){typeof v=="boolean"&&(v={nativeOnly:v}),p=mr(p);const{relativeKey:S,driver:D}=t(p),x=Object.create(null);if(D.getMeta&&Object.assign(x,await Gt(D.getMeta,S,v)),!v.nativeOnly){const O=await Gt(D.getItem,S+"$",v).then(z=>Ko(z));O&&typeof O=="object"&&(typeof O.atime=="string"&&(O.atime=new Date(O.atime)),typeof O.mtime=="string"&&(O.mtime=new Date(O.mtime)),Object.assign(x,O))}return x},setMeta(p,v,S={}){return this.setItem(p+"$",v,S)},removeMeta(p,v={}){return this.removeItem(p+"$",v)},async getKeys(p,v={}){p=Vo(p);const S=s(p,!0);let D=[];const x=[];for(const O of S){const B=(await Gt(O.driver.getKeys,O.relativeBase,v)).map(ne=>O.mountpoint+mr(ne)).filter(ne=>!D.some($=>ne.startsWith($)));x.push(...B),D=[O.mountpoint,...D.filter(ne=>!ne.startsWith(O.mountpoint))]}return p?x.filter(O=>O.startsWith(p)&&!O.endsWith("$")):x.filter(O=>!O.endsWith("$"))},async clear(p,v={}){p=Vo(p),await Promise.all(s(p,!1).map(async S=>{if(S.driver.clear)return Gt(S.driver.clear,S.relativeBase,v);if(S.driver.removeItem){const D=await S.driver.getKeys(S.relativeBase||"",v);return Promise.all(D.map(x=>S.driver.removeItem(x,v)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>kf(p)))},async watch(p){return await c(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(v=>v!==p),e.watchListeners.length===0&&await l()}},async unwatch(){e.watchListeners=[],await l()},mount(p,v){if(p=Vo(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((S,D)=>D.length-S.length)),e.mounts[p]=v,e.watching&&Promise.resolve(Vf(v,o,p)).then(S=>{e.unwatch[p]=S}).catch(console.error),y},async unmount(p,v=!0){p=Vo(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),v&&await kf(e.mounts[p]),e.mountpoints=e.mountpoints.filter(S=>S!==p),delete e.mounts[p])},getMount(p=""){p=mr(p)+":";const v=t(p);return{driver:v.driver,base:v.base}},getMounts(p="",v={}){return p=mr(p),s(p,v.parents).map(D=>({driver:D.driver,base:D.mountpoint}))}};return y}function Vf(i,e,t){return i.watch?i.watch((s,o)=>e(s,t+o)):()=>{}}async function kf(i){typeof i.dispose=="function"&&await Gt(i.dispose)}function ln(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function xp(i,e){const t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=ln(t);return(o,c)=>s.then(l=>c(l.transaction(e,o).objectStore(e)))}let Jc;function Us(){return Jc||(Jc=xp("keyval-store","keyval")),Jc}function Gf(i,e=Us()){return e("readonly",t=>ln(t.get(i)))}function hD(i,e,t=Us()){return t("readwrite",s=>(s.put(e,i),ln(s.transaction)))}function lD(i,e=Us()){return e("readwrite",t=>(t.delete(i),ln(t.transaction)))}function fD(i=Us()){return i("readwrite",e=>(e.clear(),ln(e.transaction)))}function dD(i,e){return i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ln(i.transaction)}function pD(i=Us()){return i("readonly",e=>{if(e.getAllKeys)return ln(e.getAllKeys());const t=[];return dD(e,s=>t.push(s.key)).then(()=>t)})}const gD=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),yD=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Ls(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return yD(i)}catch{return i}}function cn(i){return typeof i=="string"?i:gD(i)||""}const vD="idb-keyval";var _D=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",t=o=>e+o;let s;return i.dbName&&i.storeName&&(s=xp(i.dbName,i.storeName)),{name:vD,options:i,async hasItem(o){return!(typeof await Gf(t(o),s)>"u")},async getItem(o){return await Gf(t(o),s)??null},setItem(o,c){return hD(t(o),c,s)},removeItem(o){return lD(t(o),s)},getKeys(){return pD(s)},clear(){return fD(s)}}};const mD="WALLET_CONNECT_V2_INDEXED_DB",wD="keyvaluestorage";let bD=class{constructor(){this.indexedDb=uD({driver:_D({dbName:mD,storeName:wD})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,cn(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof st<"u"?st:typeof self<"u"?self:{},Xo={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Qc<"u"&&Qc.localStorage?Xo.exports=Qc.localStorage:typeof window<"u"&&window.localStorage?Xo.exports=window.localStorage:Xo.exports=new e})();function ED(i){var e;return[i[0],Ls((e=i[1])!=null?e:"")]}class DD{constructor(){this.localStorage=Xo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(ED)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Ls(t)}async setItem(e,t){this.localStorage.setItem(e,cn(t))}async removeItem(e){this.localStorage.removeItem(e)}}const SD="wc_storage_version",Wf=1,ID=async(i,e,t)=>{const s=SD,o=await e.getItem(s);if(o&&o>=Wf){t(e);return}const c=await i.getKeys();if(!c.length){t(e);return}const l=[];for(;c.length;){const f=c.shift();if(!f)continue;const y=f.toLowerCase();if(y.includes("wc@")||y.includes("walletconnect")||y.includes("wc_")||y.includes("wallet_connect")){const p=await i.getItem(f);await e.setItem(f,p),l.push(f)}}await e.setItem(s,Wf),t(e),xD(i,l)},xD=async(i,e)=>{e.length&&e.forEach(async t=>{await i.removeItem(t)})};let OD=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new DD;this.storage=e;try{const t=new bD;ID(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var kn={};var xu=function(i,e){return xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},xu(i,e)};function PD(i,e){xu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ou=function(){return Ou=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Ou.apply(this,arguments)};function CD(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function AD(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function TD(i,e){return function(t,s){e(t,s,i)}}function RD(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function ND(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function $D(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function UD(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function LD(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Pu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Op(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function jD(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Op(arguments[e]));return i}function MD(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function Ps(i){return this instanceof Ps?(this.v=i,this):new Ps(i)}function qD(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof Ps?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function FD(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:Ps(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function zD(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Pu=="function"?Pu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function HD(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function BD(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function KD(i){return i&&i.__esModule?i:{default:i}}function VD(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function kD(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const GD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ou},__asyncDelegator:FD,__asyncGenerator:qD,__asyncValues:zD,__await:Ps,__awaiter:ND,__classPrivateFieldGet:VD,__classPrivateFieldSet:kD,__createBinding:UD,__decorate:AD,__exportStar:LD,__extends:PD,__generator:$D,__importDefault:KD,__importStar:BD,__makeTemplateObject:HD,__metadata:RD,__param:TD,__read:Op,__rest:CD,__spread:jD,__spreadArrays:MD,__values:Pu},Symbol.toStringTag,{value:"Module"})),da=Fn(GD);var ps={},Xc={},gs={};let fn=class{};const WD=Object.freeze(Object.defineProperty({__proto__:null,IEvents:fn},Symbol.toStringTag,{value:"Module"})),YD=Fn(WD);var Yf;function JD(){if(Yf)return gs;Yf=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.IHeartBeat=void 0;const i=YD;class e extends i.IEvents{constructor(s){super()}}return gs.IHeartBeat=e,gs}var Jf;function Pp(){return Jf||(Jf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),da.__exportStar(JD(),i)}(Xc)),Xc}var Zc={},sn={},Qf;function QD(){if(Qf)return sn;Qf=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.HEARTBEAT_EVENTS=sn.HEARTBEAT_INTERVAL=void 0;const i=ve;return sn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,sn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},sn}var Xf;function Cp(){return Xf||(Xf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),da.__exportStar(QD(),i)}(Zc)),Zc}var Zf;function XD(){if(Zf)return ps;Zf=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.HeartBeat=void 0;const i=da,e=Fr,t=ve,s=Pp(),o=Cp();class c extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||o.HEARTBEAT_INTERVAL}static init(f){return i.__awaiter(this,void 0,void 0,function*(){const y=new c(f);return yield y.init(),y})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,y){this.events.on(f,y)}once(f,y){this.events.once(f,y)}off(f,y){this.events.off(f,y)}removeListener(f,y){this.events.removeListener(f,y)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return ps.HeartBeat=c,ps}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=da;e.__exportStar(XD(),i),e.__exportStar(Pp(),i),e.__exportStar(Cp(),i)})(kn);var Je={};var Cu=function(i,e){return Cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Cu(i,e)};function ZD(i,e){Cu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Au=function(){return Au=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Au.apply(this,arguments)};function eS(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function tS(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function rS(i,e){return function(t,s){e(t,s,i)}}function iS(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function nS(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function sS(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function oS(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function aS(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function Tu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ap(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function cS(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Ap(arguments[e]));return i}function uS(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function Cs(i){return this instanceof Cs?(this.v=i,this):new Cs(i)}function hS(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof Cs?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function lS(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:Cs(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function fS(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Tu=="function"?Tu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function dS(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function pS(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function gS(i){return i&&i.__esModule?i:{default:i}}function yS(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function vS(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const _S=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Au},__asyncDelegator:lS,__asyncGenerator:hS,__asyncValues:fS,__await:Cs,__awaiter:nS,__classPrivateFieldGet:yS,__classPrivateFieldSet:vS,__createBinding:oS,__decorate:tS,__exportStar:aS,__extends:ZD,__generator:sS,__importDefault:gS,__importStar:pS,__makeTemplateObject:dS,__metadata:iS,__param:rS,__read:Ap,__rest:eS,__spread:cS,__spreadArrays:uS,__values:Tu},Symbol.toStringTag,{value:"Module"})),mS=Fn(_S);var eu,ed;function wS(){if(ed)return eu;ed=1;function i(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}eu=e;function e(t,s,o){var c=o&&o.stringify||i,l=1;if(typeof t=="object"&&t!==null){var f=s.length+l;if(f===1)return t;var y=new Array(f);y[0]=c(t);for(var p=1;p<f;p++)y[p]=c(s[p]);return y.join(" ")}if(typeof t!="string")return t;var v=s.length;if(v===0)return t;for(var S="",D=1-l,x=-1,O=t&&t.length||0,z=0;z<O;){if(t.charCodeAt(z)===37&&z+1<O){switch(x=x>-1?x:0,t.charCodeAt(z+1)){case 100:case 102:if(D>=v||s[D]==null)break;x<z&&(S+=t.slice(x,z)),S+=Number(s[D]),x=z+2,z++;break;case 105:if(D>=v||s[D]==null)break;x<z&&(S+=t.slice(x,z)),S+=Math.floor(Number(s[D])),x=z+2,z++;break;case 79:case 111:case 106:if(D>=v||s[D]===void 0)break;x<z&&(S+=t.slice(x,z));var B=typeof s[D];if(B==="string"){S+="'"+s[D]+"'",x=z+2,z++;break}if(B==="function"){S+=s[D].name||"<anonymous>",x=z+2,z++;break}S+=c(s[D]),x=z+2,z++;break;case 115:if(D>=v)break;x<z&&(S+=t.slice(x,z)),S+=String(s[D]),x=z+2,z++;break;case 37:x<z&&(S+=t.slice(x,z)),S+="%",x=z+2,z++,D--;break}++D}++z}return x===-1?t:(x<O&&(S+=t.slice(x)),S)}return eu}var tu,td;function bS(){if(td)return tu;td=1;const i=wS();tu=o;const e=R().console||{},t={mapHttpRequest:O,mapHttpResponse:O,wrapRequestSerializer:z,wrapResponseSerializer:z,wrapErrorSerializer:z,req:O,res:O,err:D};function s(E,u){return Array.isArray(E)?E.filter(function(G){return G!=="!stdSerializers.err"}):E===!0?Object.keys(u):!1}function o(E){E=E||{},E.browser=E.browser||{};const u=E.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const w=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const G=E.serializers||{},W=s(E.browser.serialize,G);let se=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof w=="function"&&(w.error=w.fatal=w.warn=w.info=w.debug=w.trace=w),E.enabled===!1&&(E.level="silent");const de=E.level||"info",b=Object.create(w);b.log||(b.log=B),Object.defineProperty(b,"levelVal",{get:ee}),Object.defineProperty(b,"level",{get:Q,set:V});const A={transmit:u,serialize:W,asObject:E.browser.asObject,levels:ce,timestamp:x(E)};b.levels=o.levels,b.level=de,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=B,b.serializers=G,b._serialize=W,b._stdErrSerialize=se,b.child=k,u&&(b._logEvent=S());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Q(){return this._level}function V(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(A,b,"error","log"),c(A,b,"fatal","error"),c(A,b,"warn","error"),c(A,b,"info","log"),c(A,b,"debug","log"),c(A,b,"trace","log")}function k(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},W&&J.serializers&&(re.serializers=J.serializers);const we=re.serializers;if(W&&we){var oe=Object.assign({},G,we),be=E.browser.serialize===!0?Object.keys(oe):W;delete J.serializers,y([J],be,oe,this._stdErrSerialize)}function le(_e){this._childLevel=(_e._childLevel|0)+1,this.error=p(_e,J,"error"),this.fatal=p(_e,J,"fatal"),this.warn=p(_e,J,"warn"),this.info=p(_e,J,"info"),this.debug=p(_e,J,"debug"),this.trace=p(_e,J,"trace"),oe&&(this.serializers=oe,this._serialize=be),u&&(this._logEvent=S([].concat(_e._logEvent.bindings,J)))}return le.prototype=this,new le(this)}return b}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ne,epochTime:$,unixTime:L,isoTime:P});function c(E,u,w,G){const W=Object.getPrototypeOf(u);u[w]=u.levelVal>u.levels.values[w]?B:W[w]?W[w]:e[w]||e[G]||B,l(E,u,w)}function l(E,u,w){!E.transmit&&u[w]===B||(u[w]=function(G){return function(){const se=E.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var b=0;b<ce.length;b++)ce[b]=arguments[b];if(E.serialize&&!E.asObject&&y(ce,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?G.call(de,f(this,w,ce,se)):G.apply(de,ce),E.transmit){const A=E.transmit.level||u.level,ee=o.levels.values[A],Q=o.levels.values[w];if(Q<ee)return;v(this,{ts:se,methodLevel:w,methodValue:Q,transmitLevel:A,transmitValue:o.levels.values[E.transmit.level||u.level],send:E.transmit.send,val:u.levelVal},ce)}}}(u[w]))}function f(E,u,w,G){E._serialize&&y(w,E._serialize,E.serializers,E._stdErrSerialize);const W=w.slice();let se=W[0];const ce={};G&&(ce.time=G),ce.level=o.levels.values[u];let de=(E._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof W[0]=="object";)Object.assign(ce,W.shift());se=W.length?i(W.shift(),W):void 0}else typeof se=="string"&&(se=i(W.shift(),W));return se!==void 0&&(ce.msg=se),ce}function y(E,u,w,G){for(const W in E)if(G&&E[W]instanceof Error)E[W]=o.stdSerializers.err(E[W]);else if(typeof E[W]=="object"&&!Array.isArray(E[W]))for(const se in E[W])u&&u.indexOf(se)>-1&&se in w&&(E[W][se]=w[se](E[W][se]))}function p(E,u,w){return function(){const G=new Array(1+arguments.length);G[0]=u;for(var W=1;W<G.length;W++)G[W]=arguments[W-1];return E[w].apply(this,G)}}function v(E,u,w){const G=u.send,W=u.ts,se=u.methodLevel,ce=u.methodValue,de=u.val,b=E._logEvent.bindings;y(w,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=W,E._logEvent.messages=w.filter(function(A){return b.indexOf(A)===-1}),E._logEvent.level.label=se,E._logEvent.level.value=ce,G(se,E._logEvent,de),E._logEvent=S(b)}function S(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function D(E){const u={type:E.constructor.name,msg:E.message,stack:E.stack};for(const w in E)u[w]===void 0&&(u[w]=E[w]);return u}function x(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?ne:$}function O(){return{}}function z(E){return E}function B(){}function ne(){return!1}function $(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function R(){function E(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return tu}var on={},rd;function Tp(){return rd||(rd=1,Object.defineProperty(on,"__esModule",{value:!0}),on.PINO_CUSTOM_CONTEXT_KEY=on.PINO_LOGGER_DEFAULTS=void 0,on.PINO_LOGGER_DEFAULTS={level:"info"},on.PINO_CUSTOM_CONTEXT_KEY="custom_context"),on}var cr={},id;function ES(){if(id)return cr;id=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const i=Tp();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||i.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(f,y=i.PINO_CUSTOM_CONTEXT_KEY){return f[y]||""}cr.getBrowserLoggerContext=t;function s(f,y,p=i.PINO_CUSTOM_CONTEXT_KEY){return f[p]=y,f}cr.setBrowserLoggerContext=s;function o(f,y=i.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof f.bindings>"u"?p=t(f,y):p=f.bindings().context||"",p}cr.getLoggerContext=o;function c(f,y,p=i.PINO_CUSTOM_CONTEXT_KEY){const v=o(f,p);return v.trim()?`${v}/${y}`:y}cr.formatChildLoggerContext=c;function l(f,y,p=i.PINO_CUSTOM_CONTEXT_KEY){const v=c(f,y,p),S=f.child({context:v});return s(S,v,p)}return cr.generateChildLogger=l,cr}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=mS,t=e.__importDefault(bS());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(Tp(),i),e.__exportStar(ES(),i)})(Je);class DS extends fn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let SS=class extends fn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},IS=class{constructor(e,t){this.logger=e,this.core=t}},xS=class extends fn{constructor(e,t){super(),this.relayer=e,this.logger=t}},OS=class extends fn{constructor(e){super()}},PS=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class CS extends fn{constructor(e,t){super(),this.relayer=e,this.logger=t}}let AS=class extends fn{constructor(e,t){super(),this.core=e,this.logger=t}},TS=class{constructor(e,t){this.projectId=e,this.logger=t}},RS=class{constructor(e,t){this.projectId=e,this.logger=t}},NS=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},$S=class{constructor(e){this.client=e}};var rh={},Rp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Le,t=Cr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=y[v++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[v++],p--;return this},f.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,S=p/536870912|0,D=p<<3,x=p%128<112?128:256;this._buffer[v]=128;for(var O=v+1;O<x-8;O++)this._buffer[O]=0;e.writeUint32BE(S,this._buffer,x-8),e.writeUint32BE(D,this._buffer,x-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,x),this._finished=!0}for(var O=0;O<this.digestLength/8;O++)e.writeUint32BE(this._stateHi[O],y,O*8),e.writeUint32BE(this._stateLo[O],y,O*8+4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,y,p,v,S,D,x){for(var O=p[0],z=p[1],B=p[2],ne=p[3],$=p[4],L=p[5],P=p[6],R=p[7],E=v[0],u=v[1],w=v[2],G=v[3],W=v[4],se=v[5],ce=v[6],de=v[7],b,A,ee,Q,V,k,J,re;x>=128;){for(var we=0;we<16;we++){var oe=8*we+D;f[we]=e.readUint32BE(S,oe),y[we]=e.readUint32BE(S,oe+4)}for(var we=0;we<80;we++){var be=O,le=z,_e=B,H=ne,F=$,U=L,d=P,T=R,ae=E,fe=u,Ie=w,He=G,Ve=W,je=se,gt=ce,yt=de;if(b=R,A=de,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=($>>>14|W<<18)^($>>>18|W<<14)^(W>>>9|$<<23),A=(W>>>14|$<<18)^(W>>>18|$<<14)^($>>>9|W<<23),V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,b=$&L^~$&P,A=W&se^~W&ce,V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,b=o[we*2],A=o[we*2+1],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,b=f[we%16],A=y[we%16],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,ee=J&65535|re<<16,Q=V&65535|k<<16,b=ee,A=Q,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=(O>>>28|E<<4)^(E>>>2|O<<30)^(E>>>7|O<<25),A=(E>>>28|O<<4)^(O>>>2|E<<30)^(O>>>7|E<<25),V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,b=O&z^O&B^z&B,A=E&u^E&w^u&w,V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,T=J&65535|re<<16,yt=V&65535|k<<16,b=H,A=He,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=ee,A=Q,V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,H=J&65535|re<<16,He=V&65535|k<<16,z=be,B=le,ne=_e,$=H,L=F,P=U,R=d,O=T,u=ae,w=fe,G=Ie,W=He,se=Ve,ce=je,de=gt,E=yt,we%16===15)for(var oe=0;oe<16;oe++)b=f[oe],A=y[oe],V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=f[(oe+9)%16],A=y[(oe+9)%16],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,ee=f[(oe+1)%16],Q=y[(oe+1)%16],b=(ee>>>1|Q<<31)^(ee>>>8|Q<<24)^ee>>>7,A=(Q>>>1|ee<<31)^(Q>>>8|ee<<24)^(Q>>>7|ee<<25),V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,ee=f[(oe+14)%16],Q=y[(oe+14)%16],b=(ee>>>19|Q<<13)^(Q>>>29|ee<<3)^ee>>>6,A=(Q>>>19|ee<<13)^(ee>>>29|Q<<3)^(Q>>>6|ee<<26),V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,f[oe]=J&65535|re<<16,y[oe]=V&65535|k<<16}b=O,A=E,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[0],A=v[0],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[0]=O=J&65535|re<<16,v[0]=E=V&65535|k<<16,b=z,A=u,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[1],A=v[1],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[1]=z=J&65535|re<<16,v[1]=u=V&65535|k<<16,b=B,A=w,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[2],A=v[2],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[2]=B=J&65535|re<<16,v[2]=w=V&65535|k<<16,b=ne,A=G,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[3],A=v[3],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[3]=ne=J&65535|re<<16,v[3]=G=V&65535|k<<16,b=$,A=W,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[4],A=v[4],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[4]=$=J&65535|re<<16,v[4]=W=V&65535|k<<16,b=L,A=se,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[5],A=v[5],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[5]=L=J&65535|re<<16,v[5]=se=V&65535|k<<16,b=P,A=ce,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[6],A=v[6],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[6]=P=J&65535|re<<16,v[6]=ce=V&65535|k<<16,b=R,A=de,V=A&65535,k=A>>>16,J=b&65535,re=b>>>16,b=p[7],A=v[7],V+=A&65535,k+=A>>>16,J+=b&65535,re+=b>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[7]=R=J&65535|re<<16,v[7]=de=V&65535|k<<16,D+=128,x-=128}return D}function l(f){var y=new s;y.update(f);var p=y.digest();return y.clean(),p}i.hash=l})(Rp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=zn,t=Rp,s=Cr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(H){const F=new Float64Array(16);if(H)for(let U=0;U<H.length;U++)F[U]=H[U];return F}const c=new Uint8Array(32);c[0]=9;const l=o(),f=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function x(H,F){for(let U=0;U<16;U++)H[U]=F[U]|0}function O(H){let F=1;for(let U=0;U<16;U++){let d=H[U]+F+65535;F=Math.floor(d/65536),H[U]=d-F*65536}H[0]+=F-1+37*(F-1)}function z(H,F,U){const d=~(U-1);for(let T=0;T<16;T++){const ae=d&(H[T]^F[T]);H[T]^=ae,F[T]^=ae}}function B(H,F){const U=o(),d=o();for(let T=0;T<16;T++)d[T]=F[T];O(d),O(d),O(d);for(let T=0;T<2;T++){U[0]=d[0]-65517;for(let fe=1;fe<15;fe++)U[fe]=d[fe]-65535-(U[fe-1]>>16&1),U[fe-1]&=65535;U[15]=d[15]-32767-(U[14]>>16&1);const ae=U[15]>>16&1;U[14]&=65535,z(d,U,1-ae)}for(let T=0;T<16;T++)H[2*T]=d[T]&255,H[2*T+1]=d[T]>>8}function ne(H,F){let U=0;for(let d=0;d<32;d++)U|=H[d]^F[d];return(1&U-1>>>8)-1}function $(H,F){const U=new Uint8Array(32),d=new Uint8Array(32);return B(U,H),B(d,F),ne(U,d)}function L(H){const F=new Uint8Array(32);return B(F,H),F[0]&1}function P(H,F){for(let U=0;U<16;U++)H[U]=F[2*U]+(F[2*U+1]<<8);H[15]&=32767}function R(H,F,U){for(let d=0;d<16;d++)H[d]=F[d]+U[d]}function E(H,F,U){for(let d=0;d<16;d++)H[d]=F[d]-U[d]}function u(H,F,U){let d,T,ae=0,fe=0,Ie=0,He=0,Ve=0,je=0,gt=0,yt=0,qe=0,xe=0,Ne=0,$e=0,Fe=0,Pe=0,Ue=0,Se=0,Ce=0,Be=0,Oe=0,ke=0,We=0,et=0,tt=0,Qe=0,rr=0,fr=0,Qr=0,ir=0,ai=0,xi=0,Hi=0,Dt=U[0],vt=U[1],St=U[2],It=U[3],bt=U[4],_t=U[5],Ut=U[6],Lt=U[7],xt=U[8],jt=U[9],Ot=U[10],Tt=U[11],Pt=U[12],lt=U[13],Mt=U[14],qt=U[15];d=F[0],ae+=d*Dt,fe+=d*vt,Ie+=d*St,He+=d*It,Ve+=d*bt,je+=d*_t,gt+=d*Ut,yt+=d*Lt,qe+=d*xt,xe+=d*jt,Ne+=d*Ot,$e+=d*Tt,Fe+=d*Pt,Pe+=d*lt,Ue+=d*Mt,Se+=d*qt,d=F[1],fe+=d*Dt,Ie+=d*vt,He+=d*St,Ve+=d*It,je+=d*bt,gt+=d*_t,yt+=d*Ut,qe+=d*Lt,xe+=d*xt,Ne+=d*jt,$e+=d*Ot,Fe+=d*Tt,Pe+=d*Pt,Ue+=d*lt,Se+=d*Mt,Ce+=d*qt,d=F[2],Ie+=d*Dt,He+=d*vt,Ve+=d*St,je+=d*It,gt+=d*bt,yt+=d*_t,qe+=d*Ut,xe+=d*Lt,Ne+=d*xt,$e+=d*jt,Fe+=d*Ot,Pe+=d*Tt,Ue+=d*Pt,Se+=d*lt,Ce+=d*Mt,Be+=d*qt,d=F[3],He+=d*Dt,Ve+=d*vt,je+=d*St,gt+=d*It,yt+=d*bt,qe+=d*_t,xe+=d*Ut,Ne+=d*Lt,$e+=d*xt,Fe+=d*jt,Pe+=d*Ot,Ue+=d*Tt,Se+=d*Pt,Ce+=d*lt,Be+=d*Mt,Oe+=d*qt,d=F[4],Ve+=d*Dt,je+=d*vt,gt+=d*St,yt+=d*It,qe+=d*bt,xe+=d*_t,Ne+=d*Ut,$e+=d*Lt,Fe+=d*xt,Pe+=d*jt,Ue+=d*Ot,Se+=d*Tt,Ce+=d*Pt,Be+=d*lt,Oe+=d*Mt,ke+=d*qt,d=F[5],je+=d*Dt,gt+=d*vt,yt+=d*St,qe+=d*It,xe+=d*bt,Ne+=d*_t,$e+=d*Ut,Fe+=d*Lt,Pe+=d*xt,Ue+=d*jt,Se+=d*Ot,Ce+=d*Tt,Be+=d*Pt,Oe+=d*lt,ke+=d*Mt,We+=d*qt,d=F[6],gt+=d*Dt,yt+=d*vt,qe+=d*St,xe+=d*It,Ne+=d*bt,$e+=d*_t,Fe+=d*Ut,Pe+=d*Lt,Ue+=d*xt,Se+=d*jt,Ce+=d*Ot,Be+=d*Tt,Oe+=d*Pt,ke+=d*lt,We+=d*Mt,et+=d*qt,d=F[7],yt+=d*Dt,qe+=d*vt,xe+=d*St,Ne+=d*It,$e+=d*bt,Fe+=d*_t,Pe+=d*Ut,Ue+=d*Lt,Se+=d*xt,Ce+=d*jt,Be+=d*Ot,Oe+=d*Tt,ke+=d*Pt,We+=d*lt,et+=d*Mt,tt+=d*qt,d=F[8],qe+=d*Dt,xe+=d*vt,Ne+=d*St,$e+=d*It,Fe+=d*bt,Pe+=d*_t,Ue+=d*Ut,Se+=d*Lt,Ce+=d*xt,Be+=d*jt,Oe+=d*Ot,ke+=d*Tt,We+=d*Pt,et+=d*lt,tt+=d*Mt,Qe+=d*qt,d=F[9],xe+=d*Dt,Ne+=d*vt,$e+=d*St,Fe+=d*It,Pe+=d*bt,Ue+=d*_t,Se+=d*Ut,Ce+=d*Lt,Be+=d*xt,Oe+=d*jt,ke+=d*Ot,We+=d*Tt,et+=d*Pt,tt+=d*lt,Qe+=d*Mt,rr+=d*qt,d=F[10],Ne+=d*Dt,$e+=d*vt,Fe+=d*St,Pe+=d*It,Ue+=d*bt,Se+=d*_t,Ce+=d*Ut,Be+=d*Lt,Oe+=d*xt,ke+=d*jt,We+=d*Ot,et+=d*Tt,tt+=d*Pt,Qe+=d*lt,rr+=d*Mt,fr+=d*qt,d=F[11],$e+=d*Dt,Fe+=d*vt,Pe+=d*St,Ue+=d*It,Se+=d*bt,Ce+=d*_t,Be+=d*Ut,Oe+=d*Lt,ke+=d*xt,We+=d*jt,et+=d*Ot,tt+=d*Tt,Qe+=d*Pt,rr+=d*lt,fr+=d*Mt,Qr+=d*qt,d=F[12],Fe+=d*Dt,Pe+=d*vt,Ue+=d*St,Se+=d*It,Ce+=d*bt,Be+=d*_t,Oe+=d*Ut,ke+=d*Lt,We+=d*xt,et+=d*jt,tt+=d*Ot,Qe+=d*Tt,rr+=d*Pt,fr+=d*lt,Qr+=d*Mt,ir+=d*qt,d=F[13],Pe+=d*Dt,Ue+=d*vt,Se+=d*St,Ce+=d*It,Be+=d*bt,Oe+=d*_t,ke+=d*Ut,We+=d*Lt,et+=d*xt,tt+=d*jt,Qe+=d*Ot,rr+=d*Tt,fr+=d*Pt,Qr+=d*lt,ir+=d*Mt,ai+=d*qt,d=F[14],Ue+=d*Dt,Se+=d*vt,Ce+=d*St,Be+=d*It,Oe+=d*bt,ke+=d*_t,We+=d*Ut,et+=d*Lt,tt+=d*xt,Qe+=d*jt,rr+=d*Ot,fr+=d*Tt,Qr+=d*Pt,ir+=d*lt,ai+=d*Mt,xi+=d*qt,d=F[15],Se+=d*Dt,Ce+=d*vt,Be+=d*St,Oe+=d*It,ke+=d*bt,We+=d*_t,et+=d*Ut,tt+=d*Lt,Qe+=d*xt,rr+=d*jt,fr+=d*Ot,Qr+=d*Tt,ir+=d*Pt,ai+=d*lt,xi+=d*Mt,Hi+=d*qt,ae+=38*Ce,fe+=38*Be,Ie+=38*Oe,He+=38*ke,Ve+=38*We,je+=38*et,gt+=38*tt,yt+=38*Qe,qe+=38*rr,xe+=38*fr,Ne+=38*Qr,$e+=38*ir,Fe+=38*ai,Pe+=38*xi,Ue+=38*Hi,T=1,d=ae+T+65535,T=Math.floor(d/65536),ae=d-T*65536,d=fe+T+65535,T=Math.floor(d/65536),fe=d-T*65536,d=Ie+T+65535,T=Math.floor(d/65536),Ie=d-T*65536,d=He+T+65535,T=Math.floor(d/65536),He=d-T*65536,d=Ve+T+65535,T=Math.floor(d/65536),Ve=d-T*65536,d=je+T+65535,T=Math.floor(d/65536),je=d-T*65536,d=gt+T+65535,T=Math.floor(d/65536),gt=d-T*65536,d=yt+T+65535,T=Math.floor(d/65536),yt=d-T*65536,d=qe+T+65535,T=Math.floor(d/65536),qe=d-T*65536,d=xe+T+65535,T=Math.floor(d/65536),xe=d-T*65536,d=Ne+T+65535,T=Math.floor(d/65536),Ne=d-T*65536,d=$e+T+65535,T=Math.floor(d/65536),$e=d-T*65536,d=Fe+T+65535,T=Math.floor(d/65536),Fe=d-T*65536,d=Pe+T+65535,T=Math.floor(d/65536),Pe=d-T*65536,d=Ue+T+65535,T=Math.floor(d/65536),Ue=d-T*65536,d=Se+T+65535,T=Math.floor(d/65536),Se=d-T*65536,ae+=T-1+37*(T-1),T=1,d=ae+T+65535,T=Math.floor(d/65536),ae=d-T*65536,d=fe+T+65535,T=Math.floor(d/65536),fe=d-T*65536,d=Ie+T+65535,T=Math.floor(d/65536),Ie=d-T*65536,d=He+T+65535,T=Math.floor(d/65536),He=d-T*65536,d=Ve+T+65535,T=Math.floor(d/65536),Ve=d-T*65536,d=je+T+65535,T=Math.floor(d/65536),je=d-T*65536,d=gt+T+65535,T=Math.floor(d/65536),gt=d-T*65536,d=yt+T+65535,T=Math.floor(d/65536),yt=d-T*65536,d=qe+T+65535,T=Math.floor(d/65536),qe=d-T*65536,d=xe+T+65535,T=Math.floor(d/65536),xe=d-T*65536,d=Ne+T+65535,T=Math.floor(d/65536),Ne=d-T*65536,d=$e+T+65535,T=Math.floor(d/65536),$e=d-T*65536,d=Fe+T+65535,T=Math.floor(d/65536),Fe=d-T*65536,d=Pe+T+65535,T=Math.floor(d/65536),Pe=d-T*65536,d=Ue+T+65535,T=Math.floor(d/65536),Ue=d-T*65536,d=Se+T+65535,T=Math.floor(d/65536),Se=d-T*65536,ae+=T-1+37*(T-1),H[0]=ae,H[1]=fe,H[2]=Ie,H[3]=He,H[4]=Ve,H[5]=je,H[6]=gt,H[7]=yt,H[8]=qe,H[9]=xe,H[10]=Ne,H[11]=$e,H[12]=Fe,H[13]=Pe,H[14]=Ue,H[15]=Se}function w(H,F){u(H,F,F)}function G(H,F){const U=o();let d;for(d=0;d<16;d++)U[d]=F[d];for(d=253;d>=0;d--)w(U,U),d!==2&&d!==4&&u(U,U,F);for(d=0;d<16;d++)H[d]=U[d]}function W(H,F){const U=o();let d;for(d=0;d<16;d++)U[d]=F[d];for(d=250;d>=0;d--)w(U,U),d!==1&&u(U,U,F);for(d=0;d<16;d++)H[d]=U[d]}function se(H,F){const U=o(),d=o(),T=o(),ae=o(),fe=o(),Ie=o(),He=o(),Ve=o(),je=o();E(U,H[1],H[0]),E(je,F[1],F[0]),u(U,U,je),R(d,H[0],H[1]),R(je,F[0],F[1]),u(d,d,je),u(T,H[3],F[3]),u(T,T,p),u(ae,H[2],F[2]),R(ae,ae,ae),E(fe,d,U),E(Ie,ae,T),R(He,ae,T),R(Ve,d,U),u(H[0],fe,Ie),u(H[1],Ve,He),u(H[2],He,Ie),u(H[3],fe,Ve)}function ce(H,F,U){for(let d=0;d<4;d++)z(H[d],F[d],U)}function de(H,F){const U=o(),d=o(),T=o();G(T,F[2]),u(U,F[0],T),u(d,F[1],T),B(H,d),H[31]^=L(U)<<7}function b(H,F,U){x(H[0],l),x(H[1],f),x(H[2],f),x(H[3],l);for(let d=255;d>=0;--d){const T=U[d/8|0]>>(d&7)&1;ce(H,F,T),se(F,H),se(H,H),ce(H,F,T)}}function A(H,F){const U=[o(),o(),o(),o()];x(U[0],v),x(U[1],S),x(U[2],f),u(U[3],v,S),b(H,U,F)}function ee(H){if(H.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const F=(0,t.hash)(H);F[0]&=248,F[31]&=127,F[31]|=64;const U=new Uint8Array(32),d=[o(),o(),o(),o()];A(d,F),de(U,d);const T=new Uint8Array(64);return T.set(H),T.set(U,32),{publicKey:U,secretKey:T}}i.generateKeyPairFromSeed=ee;function Q(H){const F=(0,e.randomBytes)(32,H),U=ee(F);return(0,s.wipe)(F),U}i.generateKeyPair=Q;function V(H){if(H.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(H.subarray(32))}i.extractPublicKeyFromSecretKey=V;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(H,F){let U,d,T,ae;for(d=63;d>=32;--d){for(U=0,T=d-32,ae=d-12;T<ae;++T)F[T]+=U-16*F[d]*k[T-(d-32)],U=Math.floor((F[T]+128)/256),F[T]-=U*256;F[T]+=U,F[d]=0}for(U=0,T=0;T<32;T++)F[T]+=U-(F[31]>>4)*k[T],U=F[T]>>8,F[T]&=255;for(T=0;T<32;T++)F[T]-=U*k[T];for(d=0;d<32;d++)F[d+1]+=F[d]>>8,H[d]=F[d]&255}function re(H){const F=new Float64Array(64);for(let U=0;U<64;U++)F[U]=H[U];for(let U=0;U<64;U++)H[U]=0;J(H,F)}function we(H,F){const U=new Float64Array(64),d=[o(),o(),o(),o()],T=(0,t.hash)(H.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const ae=new Uint8Array(64);ae.set(T.subarray(32),32);const fe=new t.SHA512;fe.update(ae.subarray(32)),fe.update(F);const Ie=fe.digest();fe.clean(),re(Ie),A(d,Ie),de(ae,d),fe.reset(),fe.update(ae.subarray(0,32)),fe.update(H.subarray(32)),fe.update(F);const He=fe.digest();re(He);for(let Ve=0;Ve<32;Ve++)U[Ve]=Ie[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)U[Ve+je]+=He[Ve]*T[je];return J(ae.subarray(32),U),ae}i.sign=we;function oe(H,F){const U=o(),d=o(),T=o(),ae=o(),fe=o(),Ie=o(),He=o();return x(H[2],f),P(H[1],F),w(T,H[1]),u(ae,T,y),E(T,T,H[2]),R(ae,H[2],ae),w(fe,ae),w(Ie,fe),u(He,Ie,fe),u(U,He,T),u(U,U,ae),W(U,U),u(U,U,T),u(U,U,ae),u(U,U,ae),u(H[0],U,ae),w(d,H[0]),u(d,d,ae),$(d,T)&&u(H[0],H[0],D),w(d,H[0]),u(d,d,ae),$(d,T)?-1:(L(H[0])===F[31]>>7&&E(H[0],l,H[0]),u(H[3],H[0],H[1]),0)}function be(H,F,U){const d=new Uint8Array(32),T=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(U.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(oe(ae,H))return!1;const fe=new t.SHA512;fe.update(U.subarray(0,32)),fe.update(H),fe.update(F);const Ie=fe.digest();return re(Ie),b(T,ae,Ie),A(ae,U.subarray(32)),se(T,ae),de(d,T),!ne(U,d)}i.verify=be;function le(H){let F=[o(),o(),o(),o()];if(oe(F,H))throw new Error("Ed25519: invalid public key");let U=o(),d=o(),T=F[1];R(U,f,T),E(d,f,T),G(d,d),u(U,U,d);let ae=new Uint8Array(32);return B(ae,U),ae}i.convertPublicKeyToX25519=le;function _e(H){const F=(0,t.hash)(H.subarray(0,32));F[0]&=248,F[31]&=127,F[31]|=64;const U=new Uint8Array(F.subarray(0,32));return(0,s.wipe)(F),U}i.convertSecretKeyToX25519=_e})(rh);const US="EdDSA",LS="JWT",Np=".",$p="base64url",jS="utf8",MS="utf8",qS=":",FS="did",zS="key",nd="base58btc",HS="z",BS="K36",KS=32;function ia(i){return lr(br(cn(i),jS),$p)}function Up(i){const e=br(BS,nd),t=HS+lr(yu([e,i]),nd);return[FS,zS,t].join(qS)}function VS(i){return lr(i,$p)}function kS(i){return br([ia(i.header),ia(i.payload)].join(Np),MS)}function GS(i){return[ia(i.header),ia(i.payload),VS(i.signature)].join(Np)}function sd(i=zn.randomBytes(KS)){return rh.generateKeyPairFromSeed(i)}async function WS(i,e,t,s,o=ve.fromMiliseconds(Date.now())){const c={alg:US,typ:LS},l=Up(s.publicKey),f=o+t,y={iss:l,sub:i,aud:e,iat:o,exp:f},p=kS({header:c,payload:y}),v=rh.sign(s.secretKey,p);return GS({header:c,payload:y,signature:v})}const YS="PARSE_ERROR",JS="INVALID_REQUEST",QS="METHOD_NOT_FOUND",XS="INVALID_PARAMS",Lp="INTERNAL_ERROR",ih="SERVER_ERROR",ZS=[-32700,-32600,-32601,-32602,-32603],Ss={[YS]:{code:-32700,message:"Parse error"},[JS]:{code:-32600,message:"Invalid Request"},[QS]:{code:-32601,message:"Method not found"},[XS]:{code:-32602,message:"Invalid params"},[Lp]:{code:-32603,message:"Internal error"},[ih]:{code:-32e3,message:"Server error"}},jp=ih;function e2(i){return ZS.includes(i)}function od(i){return Object.keys(Ss).includes(i)?Ss[i]:Ss[jp]}function t2(i){const e=Object.values(Ss).find(t=>t.code===i);return e||Ss[jp]}function Mp(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var qp={};var Ru=function(i,e){return Ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Ru(i,e)};function r2(i,e){Ru(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nu=function(){return Nu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Nu.apply(this,arguments)};function i2(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function n2(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function s2(i,e){return function(t,s){e(t,s,i)}}function o2(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function a2(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function c2(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function u2(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function h2(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function $u(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function l2(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Fp(arguments[e]));return i}function f2(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function As(i){return this instanceof As?(this.v=i,this):new As(i)}function d2(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof As?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function p2(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:As(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function g2(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof $u=="function"?$u(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function y2(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function v2(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function _2(i){return i&&i.__esModule?i:{default:i}}function m2(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function w2(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const b2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Nu},__asyncDelegator:p2,__asyncGenerator:d2,__asyncValues:g2,__await:As,__awaiter:a2,__classPrivateFieldGet:m2,__classPrivateFieldSet:w2,__createBinding:u2,__decorate:n2,__exportStar:h2,__extends:r2,__generator:c2,__importDefault:_2,__importStar:v2,__makeTemplateObject:y2,__metadata:o2,__param:s2,__read:Fp,__rest:i2,__spread:l2,__spreadArrays:f2,__values:$u},Symbol.toStringTag,{value:"Module"})),E2=Fn(b2);var mi={},ad;function D2(){if(ad)return mi;ad=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.isBrowserCryptoAvailable=mi.getSubtleCrypto=mi.getBrowerCrypto=void 0;function i(){return(Jr===null||Jr===void 0?void 0:Jr.crypto)||(Jr===null||Jr===void 0?void 0:Jr.msCrypto)||{}}mi.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}mi.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return mi.isBrowserCryptoAvailable=t,mi}var wi={},cd;function S2(){if(cd)return wi;cd=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.isBrowser=wi.isNode=wi.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}wi.isReactNative=i;function e(){return typeof si<"u"&&typeof si.versions<"u"&&typeof si.versions.node<"u"}wi.isNode=e;function t(){return!i()&&!e()}return wi.isBrowser=t,wi}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=E2;e.__exportStar(D2(),i),e.__exportStar(S2(),i)})(qp);function nh(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function zp(i=6){return BigInt(nh(i))}function qn(i,e,t){return{id:t||nh(),jsonrpc:"2.0",method:i,params:e}}function pa(i,e){return{id:i,jsonrpc:"2.0",result:e}}function ga(i,e,t){return{id:i,jsonrpc:"2.0",error:I2(e,t)}}function I2(i,e){return typeof i>"u"?od(Lp):(typeof i=="string"&&(i=Object.assign(Object.assign({},od(ih)),{message:i})),typeof e<"u"&&(i.data=e),e2(i.code)&&(i=t2(i.code)),i)}class x2{}class O2 extends x2{constructor(){super()}}class P2 extends O2{constructor(e){super()}}const C2="^https?:",A2="^wss?:";function T2(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Hp(i,e){const t=T2(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function ud(i){return Hp(i,C2)}function hd(i){return Hp(i,A2)}function R2(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function Bp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function sh(i){return Bp(i)&&"method"in i}function ya(i){return Bp(i)&&(Di(i)||Yr(i))}function Di(i){return"result"in i}function Yr(i){return"error"in i}class Si extends P2{constructor(e){super(e),this.events=new Fr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(qn(e.method,e.params||[],e.id||zp().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Yr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ya(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const N2=()=>typeof WebSocket<"u"?WebSocket:typeof st<"u"&&typeof st.WebSocket<"u"?st.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),$2=()=>typeof WebSocket<"u"||typeof st<"u"&&typeof st.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ld=i=>i.split("?")[0],fd=10,U2=N2();let L2=class{constructor(e){if(this.url=e,this.events=new Fr.EventEmitter,this.registering=!1,!hd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(cn(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!hd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=new URLSearchParams(e).get("origin"),c=qp.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!R2(e)},l=new U2(e,[],c);$2()?l.onerror=f=>{const y=f;s(this.emitError(y.error))}:l.on("error",f=>{s(this.emitError(f))}),l.onopen=()=>{this.onOpen(l),t(l)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ls(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ga(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Mp(e,ld(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>fd&&this.events.setMaxListeners(fd)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ld(this.url)}`));return this.events.emit("register_error",t),t}};var na={exports:{}};na.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,l=9007199254740991,f="[object Arguments]",y="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",S="[object Date]",D="[object Error]",x="[object Function]",O="[object GeneratorFunction]",z="[object Map]",B="[object Number]",ne="[object Null]",$="[object Object]",L="[object Promise]",P="[object Proxy]",R="[object RegExp]",E="[object Set]",u="[object String]",w="[object Symbol]",G="[object Undefined]",W="[object WeakMap]",se="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",b="[object Float64Array]",A="[object Int8Array]",ee="[object Int16Array]",Q="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[b]=le[A]=le[ee]=le[Q]=le[V]=le[k]=le[J]=le[re]=!0,le[f]=le[y]=le[se]=le[v]=le[ce]=le[S]=le[D]=le[x]=le[z]=le[B]=le[$]=le[R]=le[E]=le[u]=le[W]=!1;var _e=typeof Jr=="object"&&Jr&&Jr.Object===Object&&Jr,H=typeof self=="object"&&self&&self.Object===Object&&self,F=_e||H||Function("return this")(),U=e&&!e.nodeType&&e,d=U&&!0&&i&&!i.nodeType&&i,T=d&&d.exports===U,ae=T&&_e.process,fe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=fe&&fe.isTypedArray;function He(I,j){for(var te=-1,pe=I==null?0:I.length,ct=0,Te=[];++te<pe;){var dt=I[te];j(dt,te,I)&&(Te[ct++]=dt)}return Te}function Ve(I,j){for(var te=-1,pe=j.length,ct=I.length;++te<pe;)I[ct+te]=j[te];return I}function je(I,j){for(var te=-1,pe=I==null?0:I.length;++te<pe;)if(j(I[te],te,I))return!0;return!1}function gt(I,j){for(var te=-1,pe=Array(I);++te<I;)pe[te]=j(te);return pe}function yt(I){return function(j){return I(j)}}function qe(I,j){return I.has(j)}function xe(I,j){return I==null?void 0:I[j]}function Ne(I){var j=-1,te=Array(I.size);return I.forEach(function(pe,ct){te[++j]=[ct,pe]}),te}function $e(I,j){return function(te){return I(j(te))}}function Fe(I){var j=-1,te=Array(I.size);return I.forEach(function(pe){te[++j]=pe}),te}var Pe=Array.prototype,Ue=Function.prototype,Se=Object.prototype,Ce=F["__core-js_shared__"],Be=Ue.toString,Oe=Se.hasOwnProperty,ke=function(){var I=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),We=Se.toString,et=RegExp("^"+Be.call(Oe).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=T?F.Buffer:void 0,Qe=F.Symbol,rr=F.Uint8Array,fr=Se.propertyIsEnumerable,Qr=Pe.splice,ir=Qe?Qe.toStringTag:void 0,ai=Object.getOwnPropertySymbols,xi=tt?tt.isBuffer:void 0,Hi=$e(Object.keys,Object),Dt=Er(F,"DataView"),vt=Er(F,"Map"),St=Er(F,"Promise"),It=Er(F,"Set"),bt=Er(F,"WeakMap"),_t=Er(Object,"create"),Ut=ui(Dt),Lt=ui(vt),xt=ui(St),jt=ui(It),Ot=ui(bt),Tt=Qe?Qe.prototype:void 0,Pt=Tt?Tt.valueOf:void 0;function lt(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function Mt(){this.__data__=_t?_t(null):{},this.size=0}function qt(I){var j=this.has(I)&&delete this.__data__[I];return this.size-=j?1:0,j}function ma(I){var j=this.__data__;if(_t){var te=j[I];return te===s?void 0:te}return Oe.call(j,I)?j[I]:void 0}function wa(I){var j=this.__data__;return _t?j[I]!==void 0:Oe.call(j,I)}function ba(I,j){var te=this.__data__;return this.size+=this.has(I)?0:1,te[I]=_t&&j===void 0?s:j,this}lt.prototype.clear=Mt,lt.prototype.delete=qt,lt.prototype.get=ma,lt.prototype.has=wa,lt.prototype.set=ba;function Ar(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function Ea(){this.__data__=[],this.size=0}function Da(I){var j=this.__data__,te=Bi(j,I);if(te<0)return!1;var pe=j.length-1;return te==pe?j.pop():Qr.call(j,te,1),--this.size,!0}function Sa(I){var j=this.__data__,te=Bi(j,I);return te<0?void 0:j[te][1]}function Ia(I){return Bi(this.__data__,I)>-1}function xa(I,j){var te=this.__data__,pe=Bi(te,I);return pe<0?(++this.size,te.push([I,j])):te[pe][1]=j,this}Ar.prototype.clear=Ea,Ar.prototype.delete=Da,Ar.prototype.get=Sa,Ar.prototype.has=Ia,Ar.prototype.set=xa;function ci(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function pn(){this.size=0,this.__data__={hash:new lt,map:new(vt||Ar),string:new lt}}function Oa(I){var j=Oi(this,I).delete(I);return this.size-=j?1:0,j}function gn(I){return Oi(this,I).get(I)}function Pa(I){return Oi(this,I).has(I)}function Ca(I,j){var te=Oi(this,I),pe=te.size;return te.set(I,j),this.size+=te.size==pe?0:1,this}ci.prototype.clear=pn,ci.prototype.delete=Oa,ci.prototype.get=gn,ci.prototype.has=Pa,ci.prototype.set=Ca;function yn(I){var j=-1,te=I==null?0:I.length;for(this.__data__=new ci;++j<te;)this.add(I[j])}function Ms(I){return this.__data__.set(I,s),this}function qs(I){return this.__data__.has(I)}yn.prototype.add=yn.prototype.push=Ms,yn.prototype.has=qs;function zr(I){var j=this.__data__=new Ar(I);this.size=j.size}function Aa(){this.__data__=new Ar,this.size=0}function Ta(I){var j=this.__data__,te=j.delete(I);return this.size=j.size,te}function Ra(I){return this.__data__.get(I)}function Na(I){return this.__data__.has(I)}function Fs(I,j){var te=this.__data__;if(te instanceof Ar){var pe=te.__data__;if(!vt||pe.length<t-1)return pe.push([I,j]),this.size=++te.size,this;te=this.__data__=new ci(pe)}return te.set(I,j),this.size=te.size,this}zr.prototype.clear=Aa,zr.prototype.delete=Ta,zr.prototype.get=Ra,zr.prototype.has=Na,zr.prototype.set=Fs;function zs(I,j){var te=mn(I),pe=!te&&Zs(I),ct=!te&&!pe&&Yn(I),Te=!te&&!pe&&!ct&&ro(I),dt=te||pe||ct||Te,Ft=dt?gt(I.length,String):[],Xe=Ft.length;for(var ut in I)(j||Oe.call(I,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Ws(ut,Xe)))&&Ft.push(ut);return Ft}function Bi(I,j){for(var te=I.length;te--;)if(Xs(I[te][0],j))return te;return-1}function Gn(I,j,te){var pe=j(I);return mn(I)?pe:Ve(pe,te(I))}function Ki(I){return I==null?I===void 0?G:ne:ir&&ir in Object(I)?ks(I):La(I)}function Wn(I){return ki(I)&&Ki(I)==f}function Vi(I,j,te,pe,ct){return I===j?!0:I==null||j==null||!ki(I)&&!ki(j)?I!==I&&j!==j:Hs(I,j,te,pe,Vi,ct)}function Hs(I,j,te,pe,ct,Te){var dt=mn(I),Ft=mn(j),Xe=dt?y:Xr(I),ut=Ft?y:Xr(j);Xe=Xe==f?$:Xe,ut=ut==f?$:ut;var Rt=Xe==$,dr=ut==$,zt=Xe==ut;if(zt&&Yn(I)){if(!Yn(j))return!1;dt=!0,Rt=!1}if(zt&&!Rt)return Te||(Te=new zr),dt||ro(I)?vn(I,j,te,pe,ct,Te):Ua(I,j,Xe,te,pe,ct,Te);if(!(te&o)){var pt=Rt&&Oe.call(I,"__wrapped__"),nr=dr&&Oe.call(j,"__wrapped__");if(pt||nr){var Hr=pt?I.value():I,Tr=nr?j.value():j;return Te||(Te=new zr),ct(Hr,Tr,te,pe,Te)}}return zt?(Te||(Te=new zr),Vs(I,j,te,pe,ct,Te)):!1}function $a(I){if(!to(I)||Js(I))return!1;var j=wn(I)?et:oe;return j.test(ui(I))}function Bs(I){return ki(I)&&eo(I.length)&&!!le[Ki(I)]}function Ks(I){if(!Qs(I))return Hi(I);var j=[];for(var te in Object(I))Oe.call(I,te)&&te!="constructor"&&j.push(te);return j}function vn(I,j,te,pe,ct,Te){var dt=te&o,Ft=I.length,Xe=j.length;if(Ft!=Xe&&!(dt&&Xe>Ft))return!1;var ut=Te.get(I);if(ut&&Te.get(j))return ut==j;var Rt=-1,dr=!0,zt=te&c?new yn:void 0;for(Te.set(I,j),Te.set(j,I);++Rt<Ft;){var pt=I[Rt],nr=j[Rt];if(pe)var Hr=dt?pe(nr,pt,Rt,j,I,Te):pe(pt,nr,Rt,I,j,Te);if(Hr!==void 0){if(Hr)continue;dr=!1;break}if(zt){if(!je(j,function(Tr,Zr){if(!qe(zt,Zr)&&(pt===Tr||ct(pt,Tr,te,pe,Te)))return zt.push(Zr)})){dr=!1;break}}else if(!(pt===nr||ct(pt,nr,te,pe,Te))){dr=!1;break}}return Te.delete(I),Te.delete(j),dr}function Ua(I,j,te,pe,ct,Te,dt){switch(te){case ce:if(I.byteLength!=j.byteLength||I.byteOffset!=j.byteOffset)return!1;I=I.buffer,j=j.buffer;case se:return!(I.byteLength!=j.byteLength||!Te(new rr(I),new rr(j)));case v:case S:case B:return Xs(+I,+j);case D:return I.name==j.name&&I.message==j.message;case R:case u:return I==j+"";case z:var Ft=Ne;case E:var Xe=pe&o;if(Ft||(Ft=Fe),I.size!=j.size&&!Xe)return!1;var ut=dt.get(I);if(ut)return ut==j;pe|=c,dt.set(I,j);var Rt=vn(Ft(I),Ft(j),pe,ct,Te,dt);return dt.delete(I),Rt;case w:if(Pt)return Pt.call(I)==Pt.call(j)}return!1}function Vs(I,j,te,pe,ct,Te){var dt=te&o,Ft=_n(I),Xe=Ft.length,ut=_n(j),Rt=ut.length;if(Xe!=Rt&&!dt)return!1;for(var dr=Xe;dr--;){var zt=Ft[dr];if(!(dt?zt in j:Oe.call(j,zt)))return!1}var pt=Te.get(I);if(pt&&Te.get(j))return pt==j;var nr=!0;Te.set(I,j),Te.set(j,I);for(var Hr=dt;++dr<Xe;){zt=Ft[dr];var Tr=I[zt],Zr=j[zt];if(pe)var Jn=dt?pe(Zr,Tr,zt,j,I,Te):pe(Tr,Zr,zt,I,j,Te);if(!(Jn===void 0?Tr===Zr||ct(Tr,Zr,te,pe,Te):Jn)){nr=!1;break}Hr||(Hr=zt=="constructor")}if(nr&&!Hr){var Gi=I.constructor,Vt=j.constructor;Gi!=Vt&&"constructor"in I&&"constructor"in j&&!(typeof Gi=="function"&&Gi instanceof Gi&&typeof Vt=="function"&&Vt instanceof Vt)&&(nr=!1)}return Te.delete(I),Te.delete(j),nr}function _n(I){return Gn(I,qa,Gs)}function Oi(I,j){var te=I.__data__;return Ys(j)?te[typeof j=="string"?"string":"hash"]:te.map}function Er(I,j){var te=xe(I,j);return $a(te)?te:void 0}function ks(I){var j=Oe.call(I,ir),te=I[ir];try{I[ir]=void 0;var pe=!0}catch{}var ct=We.call(I);return pe&&(j?I[ir]=te:delete I[ir]),ct}var Gs=ai?function(I){return I==null?[]:(I=Object(I),He(ai(I),function(j){return fr.call(I,j)}))}:at,Xr=Ki;(Dt&&Xr(new Dt(new ArrayBuffer(1)))!=ce||vt&&Xr(new vt)!=z||St&&Xr(St.resolve())!=L||It&&Xr(new It)!=E||bt&&Xr(new bt)!=W)&&(Xr=function(I){var j=Ki(I),te=j==$?I.constructor:void 0,pe=te?ui(te):"";if(pe)switch(pe){case Ut:return ce;case Lt:return z;case xt:return L;case jt:return E;case Ot:return W}return j});function Ws(I,j){return j=j??l,!!j&&(typeof I=="number"||be.test(I))&&I>-1&&I%1==0&&I<j}function Ys(I){var j=typeof I;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?I!=="__proto__":I===null}function Js(I){return!!ke&&ke in I}function Qs(I){var j=I&&I.constructor,te=typeof j=="function"&&j.prototype||Se;return I===te}function La(I){return We.call(I)}function ui(I){if(I!=null){try{return Be.call(I)}catch{}try{return I+""}catch{}}return""}function Xs(I,j){return I===j||I!==I&&j!==j}var Zs=Wn(function(){return arguments}())?Wn:function(I){return ki(I)&&Oe.call(I,"callee")&&!fr.call(I,"callee")},mn=Array.isArray;function ja(I){return I!=null&&eo(I.length)&&!wn(I)}var Yn=xi||ot;function Ma(I,j){return Vi(I,j)}function wn(I){if(!to(I))return!1;var j=Ki(I);return j==x||j==O||j==p||j==P}function eo(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=l}function to(I){var j=typeof I;return I!=null&&(j=="object"||j=="function")}function ki(I){return I!=null&&typeof I=="object"}var ro=Ie?yt(Ie):Bs;function qa(I){return ja(I)?zs(I):Ks(I)}function at(){return[]}function ot(){return!1}i.exports=Ma})(na,na.exports);var j2=na.exports;const M2=Hu(j2);function q2(i,e){return e=e||{},new Promise(function(t,s){var o=new XMLHttpRequest,c=[],l=[],f={},y=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:y,headers:{keys:function(){return c},entries:function(){return l},get:function(v){return f[v.toLowerCase()]},has:function(v){return v.toLowerCase()in f}}}};for(var p in o.open(e.method||"get",i,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(v,S,D){c.push(S=S.toLowerCase()),l.push([S,D]),f[S]=f[S]?f[S]+","+D:D}),t(y())},o.onerror=s,o.withCredentials=e.credentials=="include",e.headers)o.setRequestHeader(p,e.headers[p]);o.send(e.body||null)})}const F2=Object.freeze(Object.defineProperty({__proto__:null,default:q2},Symbol.toStringTag,{value:"Module"})),dd=Fn(F2);var z2=self.fetch||(self.fetch=dd.default||dd);const H2=Hu(z2);var B2={};function K2(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=i.length,y=i.charAt(0),p=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function S(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var z=0,B=0,ne=0,$=O.length;ne!==$&&O[ne]===0;)ne++,z++;for(var L=($-ne)*v+1>>>0,P=new Uint8Array(L);ne!==$;){for(var R=O[ne],E=0,u=L-1;(R!==0||E<B)&&u!==-1;u--,E++)R+=256*P[u]>>>0,P[u]=R%f>>>0,R=R/f>>>0;if(R!==0)throw new Error("Non-zero carry");B=E,ne++}for(var w=L-B;w!==L&&P[w]===0;)w++;for(var G=y.repeat(z);w<L;++w)G+=i.charAt(P[w]);return G}function D(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var z=0;if(O[z]!==" "){for(var B=0,ne=0;O[z]===y;)B++,z++;for(var $=(O.length-z)*p+1>>>0,L=new Uint8Array($);O[z];){var P=t[O.charCodeAt(z)];if(P===255)return;for(var R=0,E=$-1;(P!==0||R<ne)&&E!==-1;E--,R++)P+=f*L[E]>>>0,L[E]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ne=R,z++}if(O[z]!==" "){for(var u=$-ne;u!==$&&L[u]===0;)u++;for(var w=new Uint8Array(B+($-u)),G=B;u!==$;)w[G++]=L[u++];return w}}}function x(O){var z=D(O);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:D,decode:x}}var V2=K2,k2=V2;const Kp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},G2=i=>new TextEncoder().encode(i),W2=i=>new TextDecoder().decode(i);class Y2{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class J2{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Vp(this,e)}}class Q2{constructor(e){this.decoders=e}or(e){return Vp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Vp=(i,e)=>new Q2({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class X2{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new Y2(e,t,s),this.decoder=new J2(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const va=({name:i,prefix:e,encode:t,decode:s})=>new X2(i,e,t,s),js=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=k2(t,e);return va({prefix:i,name:e,encode:s,decode:c=>Kp(o(c))})},Z2=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,y=0,p=0;for(let v=0;v<c;++v){const S=o[i[v]];if(S===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|S,f+=t,f>=8&&(f-=8,l[p++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return l},e6=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let y=0;y<i.length;++y)for(f=f<<8|i[y],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Qt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>va({prefix:e,name:i,encode(o){return e6(o,s,t)},decode(o){return Z2(o,s,t,i)}}),t6=va({prefix:"\0",name:"identity",encode:i=>W2(i),decode:i=>G2(i)});var r6=Object.freeze({__proto__:null,identity:t6});const i6=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var n6=Object.freeze({__proto__:null,base2:i6});const s6=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var o6=Object.freeze({__proto__:null,base8:s6});const a6=js({prefix:"9",name:"base10",alphabet:"0123456789"});var c6=Object.freeze({__proto__:null,base10:a6});const u6=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),h6=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var l6=Object.freeze({__proto__:null,base16:u6,base16upper:h6});const f6=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d6=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),p6=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),g6=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),y6=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),v6=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_6=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),m6=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),w6=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var b6=Object.freeze({__proto__:null,base32:f6,base32upper:d6,base32pad:p6,base32padupper:g6,base32hex:y6,base32hexupper:v6,base32hexpad:_6,base32hexpadupper:m6,base32z:w6});const E6=js({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),D6=js({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var S6=Object.freeze({__proto__:null,base36:E6,base36upper:D6});const I6=js({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),x6=js({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var O6=Object.freeze({__proto__:null,base58btc:I6,base58flickr:x6});const P6=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),C6=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),A6=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),T6=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var R6=Object.freeze({__proto__:null,base64:P6,base64pad:C6,base64url:A6,base64urlpad:T6});const kp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),N6=kp.reduce((i,e,t)=>(i[t]=e,i),[]),$6=kp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function U6(i){return i.reduce((e,t)=>(e+=N6[t],e),"")}function L6(i){const e=[];for(const t of i){const s=$6[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const j6=va({prefix:"🚀",name:"base256emoji",encode:U6,decode:L6});var M6=Object.freeze({__proto__:null,base256emoji:j6}),q6=Gp,pd=128,F6=127,z6=~F6,H6=Math.pow(2,31);function Gp(i,e,t){e=e||[],t=t||0;for(var s=t;i>=H6;)e[t++]=i&255|pd,i/=128;for(;i&z6;)e[t++]=i&255|pd,i>>>=7;return e[t]=i|0,Gp.bytes=t-s+1,e}var B6=Uu,K6=128,gd=127;function Uu(i,s){var t=0,s=s||0,o=0,c=s,l,f=i.length;do{if(c>=f)throw Uu.bytes=0,new RangeError("Could not decode varint");l=i[c++],t+=o<28?(l&gd)<<o:(l&gd)*Math.pow(2,o),o+=7}while(l>=K6);return Uu.bytes=c-s,t}var V6=Math.pow(2,7),k6=Math.pow(2,14),G6=Math.pow(2,21),W6=Math.pow(2,28),Y6=Math.pow(2,35),J6=Math.pow(2,42),Q6=Math.pow(2,49),X6=Math.pow(2,56),Z6=Math.pow(2,63),eI=function(i){return i<V6?1:i<k6?2:i<G6?3:i<W6?4:i<Y6?5:i<J6?6:i<Q6?7:i<X6?8:i<Z6?9:10},tI={encode:q6,decode:B6,encodingLength:eI},Wp=tI;const yd=(i,e,t=0)=>(Wp.encode(i,e,t),e),vd=i=>Wp.encodingLength(i),Lu=(i,e)=>{const t=e.byteLength,s=vd(i),o=s+vd(t),c=new Uint8Array(o+t);return yd(i,c,0),yd(t,c,s),c.set(e,o),new rI(i,t,e,c)};class rI{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const Yp=({name:i,code:e,encode:t})=>new iI(i,e,t);class iI{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Lu(this.code,t):t.then(s=>Lu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Jp=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),nI=Yp({name:"sha2-256",code:18,encode:Jp("SHA-256")}),sI=Yp({name:"sha2-512",code:19,encode:Jp("SHA-512")});var oI=Object.freeze({__proto__:null,sha256:nI,sha512:sI});const Qp=0,aI="identity",Xp=Kp,cI=i=>Lu(Qp,Xp(i)),uI={code:Qp,name:aI,encode:Xp,digest:cI};var hI=Object.freeze({__proto__:null,identity:uI});new TextEncoder,new TextDecoder;const _d={...r6,...n6,...o6,...c6,...l6,...b6,...S6,...O6,...R6,...M6};({...oI,...hI});function Zp(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function lI(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Zp(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function eg(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const md=eg("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),ru=eg("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=lI(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),fI={utf8:md,"utf-8":md,hex:_d.base16,latin1:ru,ascii:ru,binary:ru,..._d};function dI(i,e="utf8"){const t=fI[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Zp(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const tg="wc",pI=2,oh="core",Mi=`${tg}@2:${oh}:`,gI={name:oh,logger:"error"},yI={database:":memory:"},vI="crypto",wd="client_ed25519_seed",_I=ve.ONE_DAY,mI="keychain",wI="0.3",bI="messages",EI="0.3",DI=ve.SIX_HOURS,SI="publisher",rg="irn",II="error",ig="wss://relay.walletconnect.com",bd="wss://relay.walletconnect.org",xI="relayer",tr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},OI="_subscription",bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},PI=ve.ONE_SECOND,CI="2.11.0",AI=1e4,TI="0.3",RI="WALLETCONNECT_CLIENT_ID",Gr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},NI="subscription",$I="0.3",UI=ve.FIVE_SECONDS*1e3,LI="pairing",jI="0.3",ys={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},Es={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},MI="history",qI="0.3",FI="expirer",qr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},zI="0.3",iu="verify-api",Ln="https://verify.walletconnect.com",ju="https://verify.walletconnect.org",HI=[Ln,ju],BI="echo",KI="https://echo.walletconnect.com";class VI{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=mI,this.version=wI,this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ue("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,mp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?wp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class kI{constructor(e,t,s){this.core=e,this.logger=t,this.name=vI,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=sd(o);return Up(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=LE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=sd(c),f=Du();return await WS(f,o,_I,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const f=this.getPrivateKey(o),y=jE(f,c);return this.setSymKey(y,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||ME(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const f=_p(l),y=cn(c);if(Nf(f)){const D=f.senderPublicKey,x=f.receiverPublicKey;o=await this.generateSharedKey(D,x)}const p=this.getSymKey(o),{type:v,senderPublicKey:S}=f;return FE({type:v,symKey:p,message:y,senderPublicKey:S})},this.decode=async(o,c,l)=>{this.isInitialized();const f=BE(c,l);if(Nf(f)){const y=f.receiverPublicKey,p=f.senderPublicKey;o=await this.generateSharedKey(y,p)}try{const y=this.getSymKey(o),p=zE({symKey:y,encoded:c});return Ls(p)}catch(y){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(y)}},this.getPayloadType=o=>{const c=ta(o);return Ns(c.type)},this.getPayloadSenderPublicKey=o=>{const c=ta(o);return c.senderPublicKey?lr(c.senderPublicKey,hr):void 0},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.keychain=s||new VI(this.core,this.logger)}get context(){return Je.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(wd)}catch{e=Du(),await this.keychain.set(wd,e)}return dI(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class GI extends IS{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=bI,this.version=EI,this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=jn(o);let l=this.messages.get(s);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(s,l),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),l=jn(o);return typeof c[l]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Je.generateChildLogger(e,this.name),this.core=t}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,mp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?wp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class WI extends xS{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Fr.EventEmitter,this.name=SI,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const f=(c==null?void 0:c.ttl)||DI,y=Su(c),p=(c==null?void 0:c.prompt)||!1,v=(c==null?void 0:c.tag)||0,S=(c==null?void 0:c.id)||zp().toString(),D={topic:s,message:o,opts:{ttl:f,relay:y,prompt:p,tag:v,id:S}},x=setTimeout(()=>this.queue.set(S,D),this.publishTimeout);try{await await Os(this.rpcPublish(s,o,f,y,p,v,S),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(S),this.relayer.events.emit(tr.publish,D)}catch(O){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(l=c==null?void 0:c.internal)!=null&&l.throwOnFailedPublish)throw this.removeRequestFromQueue(S),O;return}finally{clearTimeout(x)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Je.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,l,f){var y,p,v,S;const D={method:Yo(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:l},id:f};return ur((y=D.params)==null?void 0:y.prompt)&&((p=D.params)==null||delete p.prompt),ur((v=D.params)==null?void 0:v.tag)&&((S=D.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tr.connection_stalled);return}this.checkQueue()}),this.relayer.on(tr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class YI{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var JI=Object.defineProperty,QI=Object.defineProperties,XI=Object.getOwnPropertyDescriptors,Ed=Object.getOwnPropertySymbols,ZI=Object.prototype.hasOwnProperty,e5=Object.prototype.propertyIsEnumerable,Dd=(i,e,t)=>e in i?JI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,vs=(i,e)=>{for(var t in e||(e={}))ZI.call(e,t)&&Dd(i,t,e[t]);if(Ed)for(var t of Ed(e))e5.call(e,t)&&Dd(i,t,e[t]);return i},nu=(i,e)=>QI(i,XI(e));class t5 extends CS{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new YI,this.events=new Fr.EventEmitter,this.name=NI,this.version=$I,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Mi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=Su(o),l={topic:s,relay:c};this.pending.set(s,l);const f=await this.rpcSubscribe(s,c);return this.onSubscribe(f,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const l=new ve.Watch;l.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),l.stop(this.pendingSubscriptionWatchLabel),o(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=UI&&(clearInterval(f),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.clientId=""}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=Su(s);await this.rpcUnsubscribe(e,t,o);const c=At("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Yo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Os(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}return jn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Yo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Os(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Yo(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,nu(vs({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,vs({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,vs({},t)),this.topicMap.set(t.topic,e),this.events.emit(Gr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Gr.deleted,nu(vs({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Gr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Gr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);oi(t)&&this.onBatchSubscribe(t.map((s,o)=>nu(vs({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tr.connect,async()=>{await this.onConnect()}),this.relayer.on(tr.disconnect,()=>{this.onDisconnect()}),this.events.on(Gr.created,async e=>{const t=Gr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Gr.deleted,async e=>{const t=Gr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var r5=Object.defineProperty,Sd=Object.getOwnPropertySymbols,i5=Object.prototype.hasOwnProperty,n5=Object.prototype.propertyIsEnumerable,Id=(i,e,t)=>e in i?r5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,s5=(i,e)=>{for(var t in e||(e={}))i5.call(e,t)&&Id(i,t,e[t]);if(Sd)for(var t of Sd(e))n5.call(e,t)&&Id(i,t,e[t]);return i};class o5 extends OS{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Fr.EventEmitter,this.name=xI,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(tr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(tr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(bi.payload,this.onPayloadHandler),this.provider.on(bi.connect,this.onConnectHandler),this.provider.on(bi.disconnect,this.onDisconnectHandler),this.provider.on(bi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Je.generateChildLogger(e.logger,this.name):Je.pino(Je.getDefaultLoggerOptions({level:e.logger||II})),this.messages=new GI(this.logger,e.core),this.subscriber=new t5(this,this.logger),this.publisher=new WI(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||ig,this.projectId=e.projectId,this.bundleId=YE(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${bd}...`),await this.restartTransport(bd)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},AI)}get context(){return Je.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";if(o)return o;let c;const l=f=>{f.topic===e&&(this.subscriber.off(Gr.created,l),c())};return await Promise.all([new Promise(f=>{c=f,this.subscriber.on(Gr.created,l)}),new Promise(async f=>{o=await this.subscriber.subscribe(e,t),f()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Os(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Gr.resubscribed,()=>{t()})}),new Promise(async(t,s)=>{try{await Os(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){s(o);return}t()})])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.provider.events.emit(bi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Kf())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Si(new L2(t3({sdkVersion:CI,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),sh(e)){if(!e.method.endsWith(OI))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,l={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(s5({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else ya(e)&&this.events.emit(tr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(tr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=pa(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(bi.payload,this.onPayloadHandler),this.provider.off(bi.connect,this.onConnectHandler),this.provider.off(bi.disconnect,this.onDisconnectHandler),this.provider.off(bi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tr.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await Kf();G3(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(tr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ve.toMiliseconds(PI)))}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var a5=Object.defineProperty,xd=Object.getOwnPropertySymbols,c5=Object.prototype.hasOwnProperty,u5=Object.prototype.propertyIsEnumerable,Od=(i,e,t)=>e in i?a5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Pd=(i,e)=>{for(var t in e||(e={}))c5.call(e,t)&&Od(i,t,e[t]);if(xd)for(var t of xd(e))u5.call(e,t)&&Od(i,t,e[t]);return i};class _a extends PS{constructor(e,t,s,o=Mi,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=TI,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!ur(l)?this.map.set(this.getKey(l),l):S3(l)?this.map.set(l.id,l):I3(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,f)=>{this.isInitialized(),this.map.has(l)?await this.update(l,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:f}),this.map.set(l,f),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(f=>Object.keys(l).every(y=>M2(f[y],l[y]))):this.values),this.update=async(l,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:f});const y=Pd(Pd({},this.getData(l)),f);this.map.set(l,y),await this.persist()},this.delete=async(l,f)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:f}),this.map.delete(l),await this.persist())},this.logger=Je.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class h5{constructor(e,t){this.core=e,this.logger=t,this.name=LI,this.version=jI,this.events=new Bu,this.initialized=!1,this.storagePrefix=Mi,this.ignoredPayloadTypes=[hn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Du(),o=await this.core.crypto.setSymKey(s),c=Wr(ve.FIVE_MINUTES),l={protocol:rg},f={topic:o,expiry:c,relay:l,active:!1},y=p3({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:l}=qf(s.uri);let f;if(this.pairings.keys.includes(o)&&(f=this.pairings.get(o),f.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const y=Wr(ve.FIVE_MINUTES),p={topic:o,relay:l,expiry:y,active:!1};return await this.pairings.set(o,p),this.core.expirer.set(o,y),s.activatePairing&&await this.activate({topic:o}),this.events.emit(Es.create,p),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l})),p},this.activate=async({topic:s})=>{this.isInitialized();const o=Wr(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:f,reject:y}=Un();this.events.once(Ht("pairing_ping",c),({error:p})=>{p?y(p):f()}),await l()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",At("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const l=qn(o,c),f=await this.core.crypto.encode(s,l),y=ys[o].req;return this.core.history.set(s,l),this.core.relayer.publish(s,f,y),l.id},this.sendResult=async(s,o,c)=>{const l=pa(s,c),f=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),p=ys[y.request.method].res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.sendError=async(s,o,c)=>{const l=ga(s,c),f=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),p=ys[y.request.method]?ys[y.request.method].res:ys.unregistered_method.res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,At("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>ji(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,l=(await this.core.history.get(o,c.id)).request.method;switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit(Es.ping,{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{Di(o)?this.events.emit(Ht("pairing_ping",c),{}):Yr(o)&&this.events.emit(Ht("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(Es.delete,{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const f=At("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,s,f),this.logger.error(f)}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(At("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var o;if(!wr(s)){const{message:l}=ue("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(l)}if(!D3(s.uri)){const{message:l}=ue("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(l)}const c=qf(s.uri);if(!((o=c==null?void 0:c.relay)!=null&&o.protocol)){const{message:l}=ue("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=ue("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(l)}},this.isValidPing=async s=>{if(!wr(s)){const{message:c}=ue("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!wr(s)){const{message:c}=ue("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Wt(s,!1)){const{message:o}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(ji(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ue("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.pairings=new _a(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Je.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);try{sh(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ya(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(qr.expired,async e=>{const{topic:t}=Ep(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Es.expire,{topic:t}))})}}class l5 extends SS{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Fr.EventEmitter,this.name=MI,this.version=qI,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Wr(ve.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(ni.created,l)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Yr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ni.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ni.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:qn(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ni.created,e=>{const t=ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.updated,e=>{const t=ni.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.deleted,e=>{const t=ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ve.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class f5 extends AS{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Fr.EventEmitter,this.name=FI,this.version=zI,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(qr.created,{target:c,expiration:l})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(qr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return r3(e);if(typeof e=="number")return i3(e);const{message:t}=ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(qr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(qr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(qr.created,e=>{const t=qr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(qr.expired,e=>{const t=qr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(qr.deleted,e=>{const t=qr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class d5 extends TS{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=iu,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||Bn()||!Kn())return;const o=this.getVerifyUrl(s==null?void 0:s.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ju;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(s==null?void 0:s.verifyUrl);let c;try{c=await this.fetchAttestation(s.attestationId,o)}catch(l){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${o}`),this.logger.info(l),c=await this.fetchAttestation(s.attestationId,ju)}return c},this.fetchAttestation=async(s,o)=>{this.logger.info(`resolving attestation: ${s} from url: ${o}`);const c=this.startAbortTimer(ve.ONE_SECOND*2),l=await fetch(`${o}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const o=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),s())};await Promise.race([new Promise(c=>{if(document.getElementById(iu))return c();window.addEventListener("message",o);const l=document.createElement("iframe");l.id=iu,l.src=`${this.verifyUrl}/${this.projectId}`,l.style.display="none",document.body.append(l),this.iframe=l,s=c}),new Promise((c,l)=>setTimeout(()=>{window.removeEventListener("message",o),l("verify iframe load timeout")},ve.toMiliseconds(ve.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let o=s||Ln;return HI.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${Ln}`),o=Ln),o},this.logger=Je.generateChildLogger(t,this.name),this.verifyUrl=Ln,this.abortController=new AbortController,this.isDevEnv=Zu()&&B2.IS_VITEST}get context(){return Je.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}class p5 extends RS{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=BI,this.registerDeviceToken=async s=>{const{clientId:o,token:c,notificationType:l,enableEncrypted:f=!1}=s,y=`${KI}/${this.projectId}/clients`;await H2(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,type:l,token:c,always_raw:f})})},this.logger=Je.generateChildLogger(t,this.context)}}var g5=Object.defineProperty,Cd=Object.getOwnPropertySymbols,y5=Object.prototype.hasOwnProperty,v5=Object.prototype.propertyIsEnumerable,Ad=(i,e,t)=>e in i?g5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Td=(i,e)=>{for(var t in e||(e={}))y5.call(e,t)&&Ad(i,t,e[t]);if(Cd)for(var t of Cd(e))v5.call(e,t)&&Ad(i,t,e[t]);return i};class ah extends DS{constructor(e){super(e),this.protocol=tg,this.version=pI,this.name=oh,this.events=new Fr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||ig,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||gI.logger}));this.logger=Je.generateChildLogger(t,this.name),this.heartbeat=new kn.HeartBeat,this.crypto=new kI(this,this.logger,e==null?void 0:e.keychain),this.history=new l5(this,this.logger),this.expirer=new f5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new OD(Td(Td({},yI),e==null?void 0:e.storageOptions)),this.relayer=new o5({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new h5(this,this.logger),this.verify=new d5(this.projectId||"",this.logger),this.echoClient=new p5(this.projectId||"",this.logger)}static async init(e){const t=new ah(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(RI,s),t}get context(){return Je.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const _5=ah,ng="wc",sg=2,og="client",ch=`${ng}@${sg}:${og}:`,su={name:og,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Rd="WALLETCONNECT_DEEPLINK_CHOICE",m5="proposal",ag="Proposal expired",w5="session",ko=ve.SEVEN_DAYS,b5="engine",_s={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},ou={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},Ei={idle:"IDLE",active:"ACTIVE"},E5="request",D5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var S5=Object.defineProperty,I5=Object.defineProperties,x5=Object.getOwnPropertyDescriptors,Nd=Object.getOwnPropertySymbols,O5=Object.prototype.hasOwnProperty,P5=Object.prototype.propertyIsEnumerable,$d=(i,e,t)=>e in i?S5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,_r=(i,e)=>{for(var t in e||(e={}))O5.call(e,t)&&$d(i,t,e[t]);if(Nd)for(var t of Nd(e))P5.call(e,t)&&$d(i,t,e[t]);return i},ms=(i,e)=>I5(i,x5(e));class C5 extends $S{constructor(e){super(e),this.name=b5,this.events=new Bu,this.initialized=!1,this.ignoredPayloadTypes=[hn],this.requestQueue={state:Ei.idle,queue:[]},this.sessionRequestQueue={state:Ei.idle,queue:[]},this.requestQueueDelay=ve.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(_s)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const s=ms(_r({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:f,relays:y}=s;let p=o,v,S=!1;if(p&&(S=this.client.core.pairing.pairings.get(p).active),!p||!S){const{topic:L,uri:P}=await this.client.core.pairing.create();p=L,v=P}const D=await this.client.core.crypto.generateKeyPair(),x=_r({requiredNamespaces:c,optionalNamespaces:l,relays:y??[{protocol:rg}],proposer:{publicKey:D,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:O,resolve:z,done:B}=Un(ve.FIVE_MINUTES,ag);if(this.events.once(Ht("session_connect"),async({error:L,session:P})=>{if(L)O(L);else if(P){P.self.publicKey=D;const R=ms(_r({},P),{requiredNamespaces:P.requiredNamespaces,optionalNamespaces:P.optionalNamespaces});await this.client.session.set(P.topic,R),await this.setExpiry(P.topic,P.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:P.peer.metadata}),z(R)}}),!p){const{message:L}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(L)}const ne=await this.sendRequest({topic:p,method:"wc_sessionPropose",params:x}),$=Wr(ve.FIVE_MINUTES);return await this.setProposal(ne,_r({id:ne,expiry:$},x)),{uri:v,approval:B}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:l}=t,f=this.client.proposal.get(s);let{pairingTopic:y,proposer:p,requiredNamespaces:v,optionalNamespaces:S}=f;y=y||"",Mn(v)||(v=_3(c,"approve()"));const D=await this.client.core.crypto.generateKeyPair(),x=p.publicKey,O=await this.client.core.crypto.generateSharedKey(D,x);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:p.metadata}),await this.sendResult({id:s,topic:y,result:{relay:{protocol:o??"irn"},responderPublicKey:D}}),await this.client.proposal.delete(s,At("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const z=_r({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:v,optionalNamespaces:S,pairingTopic:y,controller:{publicKey:D,metadata:this.client.metadata},expiry:Wr(ko)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(O),await this.sendRequest({topic:O,method:"wc_sessionSettle",params:z,throwOnFailedPublish:!0});const B=ms(_r({},z),{topic:O,pairingTopic:y,acknowledged:!1,self:z.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:D});return await this.client.session.set(O,B),await this.setExpiry(O,Wr(ko)),{topic:O,acknowledged:()=>new Promise(ne=>setTimeout(()=>ne(this.client.session.get(O)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,At("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:l,resolve:f,reject:y}=Un();return this.events.once(Ht("session_update",c),({error:p})=>{p?y(p):f()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:c,resolve:l,reject:f}=Un();return this.events.once(Ht("session_extend",o),({error:y})=>{y?f(y):l()}),await this.setExpiry(s,Wr(ko)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:l}=t,f=nh(),{done:y,resolve:p,reject:v}=Un(l,"Request expired. Please try again.");return this.events.once(Ht("session_request",f),({error:S,result:D})=>{S?v(S):p(D)}),await Promise.all([new Promise(async S=>{await this.sendRequest({clientRpcId:f,topic:c,method:"wc_sessionRequest",params:{request:o,chainId:s},expiry:l,throwOnFailedPublish:!0}).catch(D=>v(D)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:f}),S()}),new Promise(async S=>{const D=await s3(this.client.core.storage,Rd);n3({id:f,topic:c,wcDeepLink:D}),S()}),y()]).then(S=>S[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;Di(o)?await this.sendResult({id:c,topic:s,result:o.result,throwOnFailedPublish:!0}):Yr(o)&&await this.sendError(c,s,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:c,resolve:l,reject:f}=Un();this.events.once(Ht("session_ping",o),({error:y})=>{y?f(y):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:o,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:At("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>b3(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,f;return((l=c.peerMetadata)==null?void 0:l.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,At("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t),this.client.core.storage.removeItem(Rd).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===t&&this.deletePendingSessionRequest(c.id,At("USER_DISCONNECTED"))})},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,At("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),o&&(this.sessionRequestQueue.state=Ei.idle)},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=_s.wc_sessionRequest.req.ttl,{id:o,topic:c,params:l,verifyContext:f}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:l,verifyContext:f}),s&&this.client.core.expirer.set(o,Wr(s))},this.sendRequest=async t=>{const{topic:s,method:o,params:c,expiry:l,relayRpcId:f,clientRpcId:y,throwOnFailedPublish:p}=t,v=qn(o,c,y);if(Kn()&&D5.includes(o)){const x=jn(JSON.stringify(v));this.client.core.verify.register({attestationId:x})}const S=await this.client.core.crypto.encode(s,v),D=_s[o].req;return l&&(D.ttl=l),f&&(D.id=f),this.client.core.history.set(s,v),p?(D.internal=ms(_r({},D.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,S,D)):this.client.core.relayer.publish(s,S,D).catch(x=>this.client.logger.error(x)),v.id},this.sendResult=async t=>{const{id:s,topic:o,result:c,throwOnFailedPublish:l}=t,f=pa(s,c),y=await this.client.core.crypto.encode(o,f),p=await this.client.core.history.get(o,s),v=_s[p.request.method].res;l?(v.internal=ms(_r({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,y,v)):this.client.core.relayer.publish(o,y,v).catch(S=>this.client.logger.error(S)),await this.client.core.history.resolve(f)},this.sendError=async(t,s,o)=>{const c=ga(t,o),l=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),y=_s[f.request.method].res;this.client.core.relayer.publish(s,l,y),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{ji(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{ji(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Ei.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ei.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=Ei.idle},this.processRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(_r({},s.params));const l=Wr(ve.FIVE_MINUTES),f=_r({id:c,pairingTopic:t,expiry:l},o);await this.setProposal(c,f);const y=jn(JSON.stringify(s)),p=await this.getVerifyContext(y,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:p})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(Di(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const f=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const y=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const p=await this.client.core.crypto.generateSharedKey(f,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const v=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),await this.client.core.pairing.activate({topic:t})}else Yr(s)&&(await this.client.proposal.delete(o,At("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:f,expiry:y,namespaces:p,requiredNamespaces:v,optionalNamespaces:S,sessionProperties:D,pairingTopic:x}=s.params,O=_r({topic:t,relay:l,expiry:y,namespaces:p,acknowledged:!0,pairingTopic:x,requiredNamespaces:v,optionalNamespaces:S,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},D&&{sessionProperties:D});await this.sendResult({id:s.id,topic:t,result:!0}),this.events.emit(Ht("session_connect"),{session:O}),this.cleanupDuplicatePairings(O)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;Di(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ht("session_approve",o),{})):Yr(s)&&(await this.client.session.delete(t,At("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{const l=`${t}_session_update`,f=Bo.get(l);if(f&&this.isRequestOutOfSync(f,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(_r({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:o}),Bo.set(l,c)}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.isRequestOutOfSync=(t,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ht("session_update",o),{}):Yr(s)&&this.events.emit(Ht("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Wr(ko)),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ht("session_extend",o),{}):Yr(s)&&this.events.emit(Ht("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{Di(s)?this.events.emit(Ht("session_ping",o),{}):Yr(s)&&this.events.emit(Ht("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(tr.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult({id:o,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(_r({topic:t},c));const l=jn(JSON.stringify(qn("wc_sessionRequest",c,o))),f=this.client.session.get(t),y=await this.getVerifyContext(l,f.peer.metadata),p={id:o,topic:t,params:c,verifyContext:y};await this.setPendingSessionRequest(p),this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue()}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ht("session_request",o),{result:s.result}):Yr(s)&&this.events.emit(Ht("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{const l=`${t}_session_event_${c.event.name}`,f=Bo.get(l);if(f&&this.isRequestOutOfSync(f,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(_r({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c}),Bo.set(l,o)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ei.idle,this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Ei.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ei.active,this.client.events.emit("session_request",t)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=t=>{if(t.active)return;const s=this.client.proposal.getAll().find(o=>o.pairingTopic===t.topic);s&&this.onSessionProposeRequest(t.topic,qn("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async t=>{if(!wr(t)){const{message:y}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:f}=t;if(ur(s)||await this.isValidPairingTopic(s),!N3(f,!0)){const{message:y}=ue("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(y)}!ur(o)&&Mn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ur(c)&&Mn(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ur(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=R3(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!wr(t))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(s);const f=this.client.proposal.get(s),y=Jo(o,"approve()");if(y)throw new Error(y.message);const p=Hf(f.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Wt(c,!0)){const{message:v}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(v)}ur(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!wr(t)){const{message:c}=ue("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!U3(o)){const{message:c}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!wr(t)){const{message:p}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:l}=t;if(!Sp(s)){const{message:p}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const f=x3(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const y=Jo(c,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(ji(l)){const{message:p}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!wr(t)){const{message:y}=ue("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),l=Jo(o,"update()");if(l)throw new Error(l.message);const f=Hf(c.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!wr(t)){const{message:o}=ue("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!wr(t)){const{message:y}=ue("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:s,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!zf(f,c)){const{message:y}=ue("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(y)}if(!L3(o)){const{message:y}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(y)}if(!q3(f,c,o.method)){const{message:y}=ue("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(y)}if(l&&!B3(l,ou)){const{message:y}=ue("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${ou.min} and ${ou.max}`);throw new Error(y)}},this.isValidRespond=async t=>{var s;if(!wr(t)){const{message:l}=ue("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(l)}const{topic:o,response:c}=t;try{await this.isValidSessionTopic(o)}catch(l){throw(s=t==null?void 0:t.response)!=null&&s.id&&this.cleanupAfterResponse(t),l}if(!j3(c)){const{message:l}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(l)}},this.isValidPing=async t=>{if(!wr(t)){const{message:o}=ue("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!wr(t)){const{message:f}=ue("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!zf(l,c)){const{message:f}=ue("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!M3(o)){const{message:f}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!F3(l,c,o.name)){const{message:f}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!wr(t)){const{message:o}=ue("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||Ln,validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c.origin,o.verified.isScam=c.isScam,o.verified.validation=c.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Wt(o,!1)){const{message:c}=ue("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);try{sh(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ya(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(qr.expired,async e=>{const{topic:t,id:s}=Ep(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ue("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(Es.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Wt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(ji(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ue("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Wt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(ji(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ue("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Wt(e,!1)){const{message:t}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!$3(e)){const{message:t}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(ji(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ue("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class A5 extends _a{constructor(e,t){super(e,t,m5,ch),this.core=e,this.logger=t}}class T5 extends _a{constructor(e,t){super(e,t,w5,ch),this.core=e,this.logger=t}}class R5 extends _a{constructor(e,t){super(e,t,E5,ch,s=>s.id),this.core=e,this.logger=t}}let N5=class cg extends NS{constructor(e){super(e),this.protocol=ng,this.version=sg,this.name=su.name,this.events=new Fr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||su.name,this.metadata=(e==null?void 0:e.metadata)||QE();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||su.logger}));this.core=(e==null?void 0:e.core)||new _5(e),this.logger=Je.generateChildLogger(t,this.name),this.session=new T5(this.core,this.logger),this.proposal=new A5(this.core,this.logger),this.pendingRequest=new R5(this.core,this.logger),this.engine=new C5(this)}static async init(e){const t=new cg(e);return await t.initialize(),t}get context(){return Je.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Mu={exports:{}};(function(i,e){var t=typeof self<"u"?self:Jr,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function y(b){return b&&DataView.prototype.isPrototypeOf(b)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(b){return b&&p.indexOf(Object.prototype.toString.call(b))>-1};function S(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function D(b){return typeof b!="string"&&(b=String(b)),b}function x(b){var A={next:function(){var ee=b.shift();return{done:ee===void 0,value:ee}}};return f.iterable&&(A[Symbol.iterator]=function(){return A}),A}function O(b){this.map={},b instanceof O?b.forEach(function(A,ee){this.append(ee,A)},this):Array.isArray(b)?b.forEach(function(A){this.append(A[0],A[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(A){this.append(A,b[A])},this)}O.prototype.append=function(b,A){b=S(b),A=D(A);var ee=this.map[b];this.map[b]=ee?ee+", "+A:A},O.prototype.delete=function(b){delete this.map[S(b)]},O.prototype.get=function(b){return b=S(b),this.has(b)?this.map[b]:null},O.prototype.has=function(b){return this.map.hasOwnProperty(S(b))},O.prototype.set=function(b,A){this.map[S(b)]=D(A)},O.prototype.forEach=function(b,A){for(var ee in this.map)this.map.hasOwnProperty(ee)&&b.call(A,this.map[ee],ee,this)},O.prototype.keys=function(){var b=[];return this.forEach(function(A,ee){b.push(ee)}),x(b)},O.prototype.values=function(){var b=[];return this.forEach(function(A){b.push(A)}),x(b)},O.prototype.entries=function(){var b=[];return this.forEach(function(A,ee){b.push([ee,A])}),x(b)},f.iterable&&(O.prototype[Symbol.iterator]=O.prototype.entries);function z(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function B(b){return new Promise(function(A,ee){b.onload=function(){A(b.result)},b.onerror=function(){ee(b.error)}})}function ne(b){var A=new FileReader,ee=B(A);return A.readAsArrayBuffer(b),ee}function $(b){var A=new FileReader,ee=B(A);return A.readAsText(b),ee}function L(b){for(var A=new Uint8Array(b),ee=new Array(A.length),Q=0;Q<A.length;Q++)ee[Q]=String.fromCharCode(A[Q]);return ee.join("")}function P(b){if(b.slice)return b.slice(0);var A=new Uint8Array(b.byteLength);return A.set(new Uint8Array(b)),A.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(b){this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:f.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:f.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():f.arrayBuffer&&f.blob&&y(b)?(this._bodyArrayBuffer=P(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||v(b))?this._bodyArrayBuffer=P(b):this._bodyText=b=Object.prototype.toString.call(b):this._bodyText="",this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var b=z(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ne)}),this.text=function(){var b=z(this);if(b)return b;if(this._bodyBlob)return $(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(L(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(b){var A=b.toUpperCase();return E.indexOf(A)>-1?A:b}function w(b,A){A=A||{};var ee=A.body;if(b instanceof w){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,A.headers||(this.headers=new O(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!ee&&b._bodyInit!=null&&(ee=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new O(A.headers)),this.method=u(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function G(b){var A=new FormData;return b.trim().split("&").forEach(function(ee){if(ee){var Q=ee.split("="),V=Q.shift().replace(/\+/g," "),k=Q.join("=").replace(/\+/g," ");A.append(decodeURIComponent(V),decodeURIComponent(k))}}),A}function W(b){var A=new O,ee=b.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(Q){var V=Q.split(":"),k=V.shift().trim();if(k){var J=V.join(":").trim();A.append(k,J)}}),A}R.call(w.prototype);function se(b,A){A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new O(A.headers),this.url=A.url||"",this._initBody(b)}R.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new O(this.headers),url:this.url})},se.error=function(){var b=new se(null,{status:0,statusText:""});return b.type="error",b};var ce=[301,302,303,307,308];se.redirect=function(b,A){if(ce.indexOf(A)===-1)throw new RangeError("Invalid status code");return new se(null,{status:A,headers:{location:b}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(A,ee){this.message=A,this.name=ee;var Q=Error(A);this.stack=Q.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function de(b,A){return new Promise(function(ee,Q){var V=new w(b,A);if(V.signal&&V.signal.aborted)return Q(new l.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function J(){k.abort()}k.onload=function(){var re={status:k.status,statusText:k.statusText,headers:W(k.getAllResponseHeaders()||"")};re.url="responseURL"in k?k.responseURL:re.headers.get("X-Request-URL");var we="response"in k?k.response:k.responseText;ee(new se(we,re))},k.onerror=function(){Q(new TypeError("Network request failed"))},k.ontimeout=function(){Q(new TypeError("Network request failed"))},k.onabort=function(){Q(new l.DOMException("Aborted","AbortError"))},k.open(V.method,V.url,!0),V.credentials==="include"?k.withCredentials=!0:V.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&f.blob&&(k.responseType="blob"),V.headers.forEach(function(re,we){k.setRequestHeader(we,re)}),V.signal&&(V.signal.addEventListener("abort",J),k.onreadystatechange=function(){k.readyState===4&&V.signal.removeEventListener("abort",J)}),k.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=O,c.Request=w,c.Response=se),l.Headers=O,l.Request=w,l.Response=se,l.fetch=de,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(Mu,Mu.exports);var $5=Mu.exports;const Ud=Hu($5),U5={Accept:"application/json","Content-Type":"application/json"},L5="POST",Ld={headers:U5,method:L5},jd=10;class zi{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Fr.EventEmitter,this.isAvailable=!1,this.registering=!1,!ud(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=cn(e),c=await(await Ud(this.url,Object.assign(Object.assign({},Ld),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!ud(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=cn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Ud(e,Object.assign(Object.assign({},Ld),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ls(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ga(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Mp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>jd&&this.events.setMaxListeners(jd)}}const Md="error",j5="wss://relay.walletconnect.com",M5="wc",q5="universal_provider",qd=`${M5}@2:${q5}:`,F5="https://rpc.walletconnect.com/v1/",Ii={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof st<"u"?st:typeof self<"u"?self:{},qu={exports:{}};(function(i,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",f="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",p=500,v="__lodash_placeholder__",S=1,D=2,x=4,O=1,z=2,B=1,ne=2,$=4,L=8,P=16,R=32,E=64,u=128,w=256,G=512,W=30,se="...",ce=800,de=16,b=1,A=2,ee=3,Q=1/0,V=9007199254740991,k=17976931348623157e292,J=NaN,re=4294967295,we=re-1,oe=re>>>1,be=[["ary",u],["bind",B],["bindKey",ne],["curry",L],["curryRight",P],["flip",G],["partial",R],["partialRight",E],["rearg",w]],le="[object Arguments]",_e="[object Array]",H="[object AsyncFunction]",F="[object Boolean]",U="[object Date]",d="[object DOMException]",T="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",Ie="[object Map]",He="[object Number]",Ve="[object Null]",je="[object Object]",gt="[object Promise]",yt="[object Proxy]",qe="[object RegExp]",xe="[object Set]",Ne="[object String]",$e="[object Symbol]",Fe="[object Undefined]",Pe="[object WeakMap]",Ue="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Qe="[object Uint8ClampedArray]",rr="[object Uint16Array]",fr="[object Uint32Array]",Qr=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xi=/&(?:amp|lt|gt|quot|#39);/g,Hi=/[&<>"']/g,Dt=RegExp(xi.source),vt=RegExp(Hi.source),St=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xt=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(xt.source),Ot=/^\s+/,Tt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ma=/[()=,{}\[\]\/\s]/,wa=/\\(\\)?/g,ba=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,Ea=/^[-+]0x[0-9a-f]+$/i,Da=/^0b[01]+$/i,Sa=/^\[object .+?Constructor\]$/,Ia=/^0o[0-7]+$/i,xa=/^(?:0|[1-9]\d*)$/,ci=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pn=/($^)/,Oa=/['\n\r\u2028\u2029\\]/g,gn="\\ud800-\\udfff",Pa="\\u0300-\\u036f",Ca="\\ufe20-\\ufe2f",yn="\\u20d0-\\u20ff",Ms=Pa+Ca+yn,qs="\\u2700-\\u27bf",zr="a-z\\xdf-\\xf6\\xf8-\\xff",Aa="\\xac\\xb1\\xd7\\xf7",Ta="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ra="\\u2000-\\u206f",Na=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fs="A-Z\\xc0-\\xd6\\xd8-\\xde",zs="\\ufe0e\\ufe0f",Bi=Aa+Ta+Ra+Na,Gn="['’]",Ki="["+gn+"]",Wn="["+Bi+"]",Vi="["+Ms+"]",Hs="\\d+",$a="["+qs+"]",Bs="["+zr+"]",Ks="[^"+gn+Bi+Hs+qs+zr+Fs+"]",vn="\\ud83c[\\udffb-\\udfff]",Ua="(?:"+Vi+"|"+vn+")",Vs="[^"+gn+"]",_n="(?:\\ud83c[\\udde6-\\uddff]){2}",Oi="[\\ud800-\\udbff][\\udc00-\\udfff]",Er="["+Fs+"]",ks="\\u200d",Gs="(?:"+Bs+"|"+Ks+")",Xr="(?:"+Er+"|"+Ks+")",Ws="(?:"+Gn+"(?:d|ll|m|re|s|t|ve))?",Ys="(?:"+Gn+"(?:D|LL|M|RE|S|T|VE))?",Js=Ua+"?",Qs="["+zs+"]?",La="(?:"+ks+"(?:"+[Vs,_n,Oi].join("|")+")"+Qs+Js+")*",ui="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zs=Qs+Js+La,mn="(?:"+[$a,_n,Oi].join("|")+")"+Zs,ja="(?:"+[Vs+Vi+"?",Vi,_n,Oi,Ki].join("|")+")",Yn=RegExp(Gn,"g"),Ma=RegExp(Vi,"g"),wn=RegExp(vn+"(?="+vn+")|"+ja+Zs,"g"),eo=RegExp([Er+"?"+Bs+"+"+Ws+"(?="+[Wn,Er,"$"].join("|")+")",Xr+"+"+Ys+"(?="+[Wn,Er+Gs,"$"].join("|")+")",Er+"?"+Gs+"+"+Ws,Er+"+"+Ys,Xs,ui,Hs,mn].join("|"),"g"),to=RegExp("["+ks+gn+Ms+zs+"]"),ki=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ro=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qa=-1,at={};at[Be]=at[Oe]=at[ke]=at[We]=at[et]=at[tt]=at[Qe]=at[rr]=at[fr]=!0,at[le]=at[_e]=at[Se]=at[F]=at[Ce]=at[U]=at[T]=at[ae]=at[Ie]=at[He]=at[je]=at[qe]=at[xe]=at[Ne]=at[Pe]=!1;var ot={};ot[le]=ot[_e]=ot[Se]=ot[Ce]=ot[F]=ot[U]=ot[Be]=ot[Oe]=ot[ke]=ot[We]=ot[et]=ot[Ie]=ot[He]=ot[je]=ot[qe]=ot[xe]=ot[Ne]=ot[$e]=ot[tt]=ot[Qe]=ot[rr]=ot[fr]=!0,ot[T]=ot[ae]=ot[Pe]=!1;var I={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof ws=="object"&&ws&&ws.Object===Object&&ws,Ft=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||Ft||Function("return this")(),ut=e&&!e.nodeType&&e,Rt=ut&&!0&&i&&!i.nodeType&&i,dr=Rt&&Rt.exports===ut,zt=dr&&dt.process,pt=function(){try{var M=Rt&&Rt.require&&Rt.require("util").types;return M||zt&&zt.binding&&zt.binding("util")}catch{}}(),nr=pt&&pt.isArrayBuffer,Hr=pt&&pt.isDate,Tr=pt&&pt.isMap,Zr=pt&&pt.isRegExp,Jn=pt&&pt.isSet,Gi=pt&&pt.isTypedArray;function Vt(M,Y,K){switch(K.length){case 0:return M.call(Y);case 1:return M.call(Y,K[0]);case 2:return M.call(Y,K[0],K[1]);case 3:return M.call(Y,K[0],K[1],K[2])}return M.apply(Y,K)}function lg(M,Y,K,ge){for(var Ae=-1,rt=M==null?0:M.length;++Ae<rt;){var Bt=M[Ae];Y(ge,Bt,K(Bt),M)}return ge}function Rr(M,Y){for(var K=-1,ge=M==null?0:M.length;++K<ge&&Y(M[K],K,M)!==!1;);return M}function fg(M,Y){for(var K=M==null?0:M.length;K--&&Y(M[K],K,M)!==!1;);return M}function lh(M,Y){for(var K=-1,ge=M==null?0:M.length;++K<ge;)if(!Y(M[K],K,M))return!1;return!0}function Pi(M,Y){for(var K=-1,ge=M==null?0:M.length,Ae=0,rt=[];++K<ge;){var Bt=M[K];Y(Bt,K,M)&&(rt[Ae++]=Bt)}return rt}function io(M,Y){var K=M==null?0:M.length;return!!K&&bn(M,Y,0)>-1}function Fa(M,Y,K){for(var ge=-1,Ae=M==null?0:M.length;++ge<Ae;)if(K(Y,M[ge]))return!0;return!1}function mt(M,Y){for(var K=-1,ge=M==null?0:M.length,Ae=Array(ge);++K<ge;)Ae[K]=Y(M[K],K,M);return Ae}function Ci(M,Y){for(var K=-1,ge=Y.length,Ae=M.length;++K<ge;)M[Ae+K]=Y[K];return M}function za(M,Y,K,ge){var Ae=-1,rt=M==null?0:M.length;for(ge&&rt&&(K=M[++Ae]);++Ae<rt;)K=Y(K,M[Ae],Ae,M);return K}function dg(M,Y,K,ge){var Ae=M==null?0:M.length;for(ge&&Ae&&(K=M[--Ae]);Ae--;)K=Y(K,M[Ae],Ae,M);return K}function Ha(M,Y){for(var K=-1,ge=M==null?0:M.length;++K<ge;)if(Y(M[K],K,M))return!0;return!1}var pg=Ba("length");function gg(M){return M.split("")}function yg(M){return M.match(qt)||[]}function fh(M,Y,K){var ge;return K(M,function(Ae,rt,Bt){if(Y(Ae,rt,Bt))return ge=rt,!1}),ge}function no(M,Y,K,ge){for(var Ae=M.length,rt=K+(ge?1:-1);ge?rt--:++rt<Ae;)if(Y(M[rt],rt,M))return rt;return-1}function bn(M,Y,K){return Y===Y?Pg(M,Y,K):no(M,dh,K)}function vg(M,Y,K,ge){for(var Ae=K-1,rt=M.length;++Ae<rt;)if(ge(M[Ae],Y))return Ae;return-1}function dh(M){return M!==M}function ph(M,Y){var K=M==null?0:M.length;return K?Va(M,Y)/K:J}function Ba(M){return function(Y){return Y==null?t:Y[M]}}function Ka(M){return function(Y){return M==null?t:M[Y]}}function gh(M,Y,K,ge,Ae){return Ae(M,function(rt,Bt,ht){K=ge?(ge=!1,rt):Y(K,rt,Bt,ht)}),K}function _g(M,Y){var K=M.length;for(M.sort(Y);K--;)M[K]=M[K].value;return M}function Va(M,Y){for(var K,ge=-1,Ae=M.length;++ge<Ae;){var rt=Y(M[ge]);rt!==t&&(K=K===t?rt:K+rt)}return K}function ka(M,Y){for(var K=-1,ge=Array(M);++K<M;)ge[K]=Y(K);return ge}function mg(M,Y){return mt(Y,function(K){return[K,M[K]]})}function yh(M){return M&&M.slice(0,wh(M)+1).replace(Ot,"")}function Dr(M){return function(Y){return M(Y)}}function Ga(M,Y){return mt(Y,function(K){return M[K]})}function Qn(M,Y){return M.has(Y)}function vh(M,Y){for(var K=-1,ge=M.length;++K<ge&&bn(Y,M[K],0)>-1;);return K}function _h(M,Y){for(var K=M.length;K--&&bn(Y,M[K],0)>-1;);return K}function wg(M,Y){for(var K=M.length,ge=0;K--;)M[K]===Y&&++ge;return ge}var bg=Ka(I),Eg=Ka(j);function Dg(M){return"\\"+pe[M]}function Sg(M,Y){return M==null?t:M[Y]}function En(M){return to.test(M)}function Ig(M){return ki.test(M)}function xg(M){for(var Y,K=[];!(Y=M.next()).done;)K.push(Y.value);return K}function Wa(M){var Y=-1,K=Array(M.size);return M.forEach(function(ge,Ae){K[++Y]=[Ae,ge]}),K}function mh(M,Y){return function(K){return M(Y(K))}}function Ai(M,Y){for(var K=-1,ge=M.length,Ae=0,rt=[];++K<ge;){var Bt=M[K];(Bt===Y||Bt===v)&&(M[K]=v,rt[Ae++]=K)}return rt}function so(M){var Y=-1,K=Array(M.size);return M.forEach(function(ge){K[++Y]=ge}),K}function Og(M){var Y=-1,K=Array(M.size);return M.forEach(function(ge){K[++Y]=[ge,ge]}),K}function Pg(M,Y,K){for(var ge=K-1,Ae=M.length;++ge<Ae;)if(M[ge]===Y)return ge;return-1}function Cg(M,Y,K){for(var ge=K+1;ge--;)if(M[ge]===Y)return ge;return ge}function Dn(M){return En(M)?Tg(M):pg(M)}function Br(M){return En(M)?Rg(M):gg(M)}function wh(M){for(var Y=M.length;Y--&&Tt.test(M.charAt(Y)););return Y}var Ag=Ka(te);function Tg(M){for(var Y=wn.lastIndex=0;wn.test(M);)++Y;return Y}function Rg(M){return M.match(wn)||[]}function Ng(M){return M.match(eo)||[]}var $g=function M(Y){Y=Y==null?Xe:Sn.defaults(Xe.Object(),Y,Sn.pick(Xe,ro));var K=Y.Array,ge=Y.Date,Ae=Y.Error,rt=Y.Function,Bt=Y.Math,ht=Y.Object,Ya=Y.RegExp,Ug=Y.String,Nr=Y.TypeError,oo=K.prototype,Lg=rt.prototype,In=ht.prototype,ao=Y["__core-js_shared__"],co=Lg.toString,nt=In.hasOwnProperty,jg=0,bh=function(){var r=/[^.]+$/.exec(ao&&ao.keys&&ao.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),uo=In.toString,Mg=co.call(ht),qg=Xe._,Fg=Ya("^"+co.call(nt).replace(xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ho=dr?Y.Buffer:t,Ti=Y.Symbol,lo=Y.Uint8Array,Eh=ho?ho.allocUnsafe:t,fo=mh(ht.getPrototypeOf,ht),Dh=ht.create,Sh=In.propertyIsEnumerable,po=oo.splice,Ih=Ti?Ti.isConcatSpreadable:t,Xn=Ti?Ti.iterator:t,Wi=Ti?Ti.toStringTag:t,go=function(){try{var r=Zi(ht,"defineProperty");return r({},"",{}),r}catch{}}(),zg=Y.clearTimeout!==Xe.clearTimeout&&Y.clearTimeout,Hg=ge&&ge.now!==Xe.Date.now&&ge.now,Bg=Y.setTimeout!==Xe.setTimeout&&Y.setTimeout,yo=Bt.ceil,vo=Bt.floor,Ja=ht.getOwnPropertySymbols,Kg=ho?ho.isBuffer:t,xh=Y.isFinite,Vg=oo.join,kg=mh(ht.keys,ht),Kt=Bt.max,Xt=Bt.min,Gg=ge.now,Wg=Y.parseInt,Oh=Bt.random,Yg=oo.reverse,Qa=Zi(Y,"DataView"),Zn=Zi(Y,"Map"),Xa=Zi(Y,"Promise"),xn=Zi(Y,"Set"),es=Zi(Y,"WeakMap"),ts=Zi(ht,"create"),_o=es&&new es,On={},Jg=en(Qa),Qg=en(Zn),Xg=en(Xa),Zg=en(xn),e0=en(es),mo=Ti?Ti.prototype:t,rs=mo?mo.valueOf:t,Ph=mo?mo.toString:t;function _(r){if(Ct(r)&&!Re(r)&&!(r instanceof Ye)){if(r instanceof $r)return r;if(nt.call(r,"__wrapped__"))return Cl(r)}return new $r(r)}var Pn=function(){function r(){}return function(n){if(!Et(n))return{};if(Dh)return Dh(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function wo(){}function $r(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}_.templateSettings={escape:St,evaluate:It,interpolate:bt,variable:"",imports:{_}},_.prototype=wo.prototype,_.prototype.constructor=_,$r.prototype=Pn(wo.prototype),$r.prototype.constructor=$r;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function t0(){var r=new Ye(this.__wrapped__);return r.__actions__=pr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=pr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=pr(this.__views__),r}function r0(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function i0(){var r=this.__wrapped__.value(),n=this.__dir__,a=Re(r),h=n<0,g=a?r.length:0,m=gy(0,g,this.__views__),C=m.start,N=m.end,q=N-C,X=h?N:C-1,Z=this.__iteratees__,ie=Z.length,he=0,ye=Xt(q,this.__takeCount__);if(!a||!h&&g==q&&ye==q)return Xh(r,this.__actions__);var Ee=[];e:for(;q--&&he<ye;){X+=n;for(var ze=-1,De=r[X];++ze<ie;){var Ge=Z[ze],Ze=Ge.iteratee,xr=Ge.type,ar=Ze(De);if(xr==A)De=ar;else if(!ar){if(xr==b)continue e;break e}}Ee[he++]=De}return Ee}Ye.prototype=Pn(wo.prototype),Ye.prototype.constructor=Ye;function Yi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function n0(){this.__data__=ts?ts(null):{},this.size=0}function s0(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function o0(r){var n=this.__data__;if(ts){var a=n[r];return a===y?t:a}return nt.call(n,r)?n[r]:t}function a0(r){var n=this.__data__;return ts?n[r]!==t:nt.call(n,r)}function c0(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=ts&&n===t?y:n,this}Yi.prototype.clear=n0,Yi.prototype.delete=s0,Yi.prototype.get=o0,Yi.prototype.has=a0,Yi.prototype.set=c0;function hi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function u0(){this.__data__=[],this.size=0}function h0(r){var n=this.__data__,a=bo(n,r);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():po.call(n,a,1),--this.size,!0}function l0(r){var n=this.__data__,a=bo(n,r);return a<0?t:n[a][1]}function f0(r){return bo(this.__data__,r)>-1}function d0(r,n){var a=this.__data__,h=bo(a,r);return h<0?(++this.size,a.push([r,n])):a[h][1]=n,this}hi.prototype.clear=u0,hi.prototype.delete=h0,hi.prototype.get=l0,hi.prototype.has=f0,hi.prototype.set=d0;function li(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function p0(){this.size=0,this.__data__={hash:new Yi,map:new(Zn||hi),string:new Yi}}function g0(r){var n=No(this,r).delete(r);return this.size-=n?1:0,n}function y0(r){return No(this,r).get(r)}function v0(r){return No(this,r).has(r)}function _0(r,n){var a=No(this,r),h=a.size;return a.set(r,n),this.size+=a.size==h?0:1,this}li.prototype.clear=p0,li.prototype.delete=g0,li.prototype.get=y0,li.prototype.has=v0,li.prototype.set=_0;function Ji(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new li;++n<a;)this.add(r[n])}function m0(r){return this.__data__.set(r,y),this}function w0(r){return this.__data__.has(r)}Ji.prototype.add=Ji.prototype.push=m0,Ji.prototype.has=w0;function Kr(r){var n=this.__data__=new hi(r);this.size=n.size}function b0(){this.__data__=new hi,this.size=0}function E0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function D0(r){return this.__data__.get(r)}function S0(r){return this.__data__.has(r)}function I0(r,n){var a=this.__data__;if(a instanceof hi){var h=a.__data__;if(!Zn||h.length<o-1)return h.push([r,n]),this.size=++a.size,this;a=this.__data__=new li(h)}return a.set(r,n),this.size=a.size,this}Kr.prototype.clear=b0,Kr.prototype.delete=E0,Kr.prototype.get=D0,Kr.prototype.has=S0,Kr.prototype.set=I0;function Ch(r,n){var a=Re(r),h=!a&&tn(r),g=!a&&!h&&Li(r),m=!a&&!h&&!g&&Rn(r),C=a||h||g||m,N=C?ka(r.length,Ug):[],q=N.length;for(var X in r)(n||nt.call(r,X))&&!(C&&(X=="length"||g&&(X=="offset"||X=="parent")||m&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||gi(X,q)))&&N.push(X);return N}function Ah(r){var n=r.length;return n?r[uc(0,n-1)]:t}function x0(r,n){return $o(pr(r),Qi(n,0,r.length))}function O0(r){return $o(pr(r))}function Za(r,n,a){(a!==t&&!Vr(r[n],a)||a===t&&!(n in r))&&fi(r,n,a)}function is(r,n,a){var h=r[n];(!(nt.call(r,n)&&Vr(h,a))||a===t&&!(n in r))&&fi(r,n,a)}function bo(r,n){for(var a=r.length;a--;)if(Vr(r[a][0],n))return a;return-1}function P0(r,n,a,h){return Ri(r,function(g,m,C){n(h,g,a(g),C)}),h}function Th(r,n){return r&&ti(n,kt(n),r)}function C0(r,n){return r&&ti(n,yr(n),r)}function fi(r,n,a){n=="__proto__"&&go?go(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function ec(r,n){for(var a=-1,h=n.length,g=K(h),m=r==null;++a<h;)g[a]=m?t:$c(r,n[a]);return g}function Qi(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function Ur(r,n,a,h,g,m){var C,N=n&S,q=n&D,X=n&x;if(a&&(C=g?a(r,h,g,m):a(r)),C!==t)return C;if(!Et(r))return r;var Z=Re(r);if(Z){if(C=vy(r),!N)return pr(r,C)}else{var ie=Zt(r),he=ie==ae||ie==fe;if(Li(r))return tl(r,N);if(ie==je||ie==le||he&&!g){if(C=q||he?{}:wl(r),!N)return q?oy(r,C0(C,r)):sy(r,Th(C,r))}else{if(!ot[ie])return g?r:{};C=_y(r,ie,N)}}m||(m=new Kr);var ye=m.get(r);if(ye)return ye;m.set(r,C),Yl(r)?r.forEach(function(De){C.add(Ur(De,n,a,De,r,m))}):Gl(r)&&r.forEach(function(De,Ge){C.set(Ge,Ur(De,n,a,Ge,r,m))});var Ee=X?q?wc:mc:q?yr:kt,ze=Z?t:Ee(r);return Rr(ze||r,function(De,Ge){ze&&(Ge=De,De=r[Ge]),is(C,Ge,Ur(De,n,a,Ge,r,m))}),C}function A0(r){var n=kt(r);return function(a){return Rh(a,r,n)}}function Rh(r,n,a){var h=a.length;if(r==null)return!h;for(r=ht(r);h--;){var g=a[h],m=n[g],C=r[g];if(C===t&&!(g in r)||!m(C))return!1}return!0}function Nh(r,n,a){if(typeof r!="function")throw new Nr(l);return hs(function(){r.apply(t,a)},n)}function ns(r,n,a,h){var g=-1,m=io,C=!0,N=r.length,q=[],X=n.length;if(!N)return q;a&&(n=mt(n,Dr(a))),h?(m=Fa,C=!1):n.length>=o&&(m=Qn,C=!1,n=new Ji(n));e:for(;++g<N;){var Z=r[g],ie=a==null?Z:a(Z);if(Z=h||Z!==0?Z:0,C&&ie===ie){for(var he=X;he--;)if(n[he]===ie)continue e;q.push(Z)}else m(n,ie,h)||q.push(Z)}return q}var Ri=ol(ei),$h=ol(rc,!0);function T0(r,n){var a=!0;return Ri(r,function(h,g,m){return a=!!n(h,g,m),a}),a}function Eo(r,n,a){for(var h=-1,g=r.length;++h<g;){var m=r[h],C=n(m);if(C!=null&&(N===t?C===C&&!Ir(C):a(C,N)))var N=C,q=m}return q}function R0(r,n,a,h){var g=r.length;for(a=Me(a),a<0&&(a=-a>g?0:g+a),h=h===t||h>g?g:Me(h),h<0&&(h+=g),h=a>h?0:Ql(h);a<h;)r[a++]=n;return r}function Uh(r,n){var a=[];return Ri(r,function(h,g,m){n(h,g,m)&&a.push(h)}),a}function Yt(r,n,a,h,g){var m=-1,C=r.length;for(a||(a=wy),g||(g=[]);++m<C;){var N=r[m];n>0&&a(N)?n>1?Yt(N,n-1,a,h,g):Ci(g,N):h||(g[g.length]=N)}return g}var tc=al(),Lh=al(!0);function ei(r,n){return r&&tc(r,n,kt)}function rc(r,n){return r&&Lh(r,n,kt)}function Do(r,n){return Pi(n,function(a){return yi(r[a])})}function Xi(r,n){n=$i(n,r);for(var a=0,h=n.length;r!=null&&a<h;)r=r[ri(n[a++])];return a&&a==h?r:t}function jh(r,n,a){var h=n(r);return Re(r)?h:Ci(h,a(r))}function sr(r){return r==null?r===t?Fe:Ve:Wi&&Wi in ht(r)?py(r):Oy(r)}function ic(r,n){return r>n}function N0(r,n){return r!=null&&nt.call(r,n)}function $0(r,n){return r!=null&&n in ht(r)}function U0(r,n,a){return r>=Xt(n,a)&&r<Kt(n,a)}function nc(r,n,a){for(var h=a?Fa:io,g=r[0].length,m=r.length,C=m,N=K(m),q=1/0,X=[];C--;){var Z=r[C];C&&n&&(Z=mt(Z,Dr(n))),q=Xt(Z.length,q),N[C]=!a&&(n||g>=120&&Z.length>=120)?new Ji(C&&Z):t}Z=r[0];var ie=-1,he=N[0];e:for(;++ie<g&&X.length<q;){var ye=Z[ie],Ee=n?n(ye):ye;if(ye=a||ye!==0?ye:0,!(he?Qn(he,Ee):h(X,Ee,a))){for(C=m;--C;){var ze=N[C];if(!(ze?Qn(ze,Ee):h(r[C],Ee,a)))continue e}he&&he.push(Ee),X.push(ye)}}return X}function L0(r,n,a,h){return ei(r,function(g,m,C){n(h,a(g),m,C)}),h}function ss(r,n,a){n=$i(n,r),r=Sl(r,n);var h=r==null?r:r[ri(jr(n))];return h==null?t:Vt(h,r,a)}function Mh(r){return Ct(r)&&sr(r)==le}function j0(r){return Ct(r)&&sr(r)==Se}function M0(r){return Ct(r)&&sr(r)==U}function os(r,n,a,h,g){return r===n?!0:r==null||n==null||!Ct(r)&&!Ct(n)?r!==r&&n!==n:q0(r,n,a,h,os,g)}function q0(r,n,a,h,g,m){var C=Re(r),N=Re(n),q=C?_e:Zt(r),X=N?_e:Zt(n);q=q==le?je:q,X=X==le?je:X;var Z=q==je,ie=X==je,he=q==X;if(he&&Li(r)){if(!Li(n))return!1;C=!0,Z=!1}if(he&&!Z)return m||(m=new Kr),C||Rn(r)?vl(r,n,a,h,g,m):fy(r,n,q,a,h,g,m);if(!(a&O)){var ye=Z&&nt.call(r,"__wrapped__"),Ee=ie&&nt.call(n,"__wrapped__");if(ye||Ee){var ze=ye?r.value():r,De=Ee?n.value():n;return m||(m=new Kr),g(ze,De,a,h,m)}}return he?(m||(m=new Kr),dy(r,n,a,h,g,m)):!1}function F0(r){return Ct(r)&&Zt(r)==Ie}function sc(r,n,a,h){var g=a.length,m=g,C=!h;if(r==null)return!m;for(r=ht(r);g--;){var N=a[g];if(C&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++g<m;){N=a[g];var q=N[0],X=r[q],Z=N[1];if(C&&N[2]){if(X===t&&!(q in r))return!1}else{var ie=new Kr;if(h)var he=h(X,Z,q,r,n,ie);if(!(he===t?os(Z,X,O|z,h,ie):he))return!1}}return!0}function qh(r){if(!Et(r)||Ey(r))return!1;var n=yi(r)?Fg:Sa;return n.test(en(r))}function z0(r){return Ct(r)&&sr(r)==qe}function H0(r){return Ct(r)&&Zt(r)==xe}function B0(r){return Ct(r)&&Fo(r.length)&&!!at[sr(r)]}function Fh(r){return typeof r=="function"?r:r==null?vr:typeof r=="object"?Re(r)?Bh(r[0],r[1]):Hh(r):uf(r)}function oc(r){if(!us(r))return kg(r);var n=[];for(var a in ht(r))nt.call(r,a)&&a!="constructor"&&n.push(a);return n}function K0(r){if(!Et(r))return xy(r);var n=us(r),a=[];for(var h in r)h=="constructor"&&(n||!nt.call(r,h))||a.push(h);return a}function ac(r,n){return r<n}function zh(r,n){var a=-1,h=gr(r)?K(r.length):[];return Ri(r,function(g,m,C){h[++a]=n(g,m,C)}),h}function Hh(r){var n=Ec(r);return n.length==1&&n[0][2]?El(n[0][0],n[0][1]):function(a){return a===r||sc(a,r,n)}}function Bh(r,n){return Sc(r)&&bl(n)?El(ri(r),n):function(a){var h=$c(a,r);return h===t&&h===n?Uc(a,r):os(n,h,O|z)}}function So(r,n,a,h,g){r!==n&&tc(n,function(m,C){if(g||(g=new Kr),Et(m))V0(r,n,C,a,So,h,g);else{var N=h?h(xc(r,C),m,C+"",r,n,g):t;N===t&&(N=m),Za(r,C,N)}},yr)}function V0(r,n,a,h,g,m,C){var N=xc(r,a),q=xc(n,a),X=C.get(q);if(X){Za(r,a,X);return}var Z=m?m(N,q,a+"",r,n,C):t,ie=Z===t;if(ie){var he=Re(q),ye=!he&&Li(q),Ee=!he&&!ye&&Rn(q);Z=q,he||ye||Ee?Re(N)?Z=N:Nt(N)?Z=pr(N):ye?(ie=!1,Z=tl(q,!0)):Ee?(ie=!1,Z=rl(q,!0)):Z=[]:ls(q)||tn(q)?(Z=N,tn(N)?Z=Xl(N):(!Et(N)||yi(N))&&(Z=wl(q))):ie=!1}ie&&(C.set(q,Z),g(Z,q,h,m,C),C.delete(q)),Za(r,a,Z)}function Kh(r,n){var a=r.length;if(a)return n+=n<0?a:0,gi(n,a)?r[n]:t}function Vh(r,n,a){n.length?n=mt(n,function(m){return Re(m)?function(C){return Xi(C,m.length===1?m[0]:m)}:m}):n=[vr];var h=-1;n=mt(n,Dr(me()));var g=zh(r,function(m,C,N){var q=mt(n,function(X){return X(m)});return{criteria:q,index:++h,value:m}});return _g(g,function(m,C){return ny(m,C,a)})}function k0(r,n){return kh(r,n,function(a,h){return Uc(r,h)})}function kh(r,n,a){for(var h=-1,g=n.length,m={};++h<g;){var C=n[h],N=Xi(r,C);a(N,C)&&as(m,$i(C,r),N)}return m}function G0(r){return function(n){return Xi(n,r)}}function cc(r,n,a,h){var g=h?vg:bn,m=-1,C=n.length,N=r;for(r===n&&(n=pr(n)),a&&(N=mt(r,Dr(a)));++m<C;)for(var q=0,X=n[m],Z=a?a(X):X;(q=g(N,Z,q,h))>-1;)N!==r&&po.call(N,q,1),po.call(r,q,1);return r}function Gh(r,n){for(var a=r?n.length:0,h=a-1;a--;){var g=n[a];if(a==h||g!==m){var m=g;gi(g)?po.call(r,g,1):fc(r,g)}}return r}function uc(r,n){return r+vo(Oh()*(n-r+1))}function W0(r,n,a,h){for(var g=-1,m=Kt(yo((n-r)/(a||1)),0),C=K(m);m--;)C[h?m:++g]=r,r+=a;return C}function hc(r,n){var a="";if(!r||n<1||n>V)return a;do n%2&&(a+=r),n=vo(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return Oc(Dl(r,n,vr),r+"")}function Y0(r){return Ah(Nn(r))}function J0(r,n){var a=Nn(r);return $o(a,Qi(n,0,a.length))}function as(r,n,a,h){if(!Et(r))return r;n=$i(n,r);for(var g=-1,m=n.length,C=m-1,N=r;N!=null&&++g<m;){var q=ri(n[g]),X=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return r;if(g!=C){var Z=N[q];X=h?h(Z,q,N):t,X===t&&(X=Et(Z)?Z:gi(n[g+1])?[]:{})}is(N,q,X),N=N[q]}return r}var Wh=_o?function(r,n){return _o.set(r,n),r}:vr,Q0=go?function(r,n){return go(r,"toString",{configurable:!0,enumerable:!1,value:jc(n),writable:!0})}:vr;function X0(r){return $o(Nn(r))}function Lr(r,n,a){var h=-1,g=r.length;n<0&&(n=-n>g?0:g+n),a=a>g?g:a,a<0&&(a+=g),g=n>a?0:a-n>>>0,n>>>=0;for(var m=K(g);++h<g;)m[h]=r[h+n];return m}function Z0(r,n){var a;return Ri(r,function(h,g,m){return a=n(h,g,m),!a}),!!a}function Io(r,n,a){var h=0,g=r==null?h:r.length;if(typeof n=="number"&&n===n&&g<=oe){for(;h<g;){var m=h+g>>>1,C=r[m];C!==null&&!Ir(C)&&(a?C<=n:C<n)?h=m+1:g=m}return g}return lc(r,n,vr,a)}function lc(r,n,a,h){var g=0,m=r==null?0:r.length;if(m===0)return 0;n=a(n);for(var C=n!==n,N=n===null,q=Ir(n),X=n===t;g<m;){var Z=vo((g+m)/2),ie=a(r[Z]),he=ie!==t,ye=ie===null,Ee=ie===ie,ze=Ir(ie);if(C)var De=h||Ee;else X?De=Ee&&(h||he):N?De=Ee&&he&&(h||!ye):q?De=Ee&&he&&!ye&&(h||!ze):ye||ze?De=!1:De=h?ie<=n:ie<n;De?g=Z+1:m=Z}return Xt(m,we)}function Yh(r,n){for(var a=-1,h=r.length,g=0,m=[];++a<h;){var C=r[a],N=n?n(C):C;if(!a||!Vr(N,q)){var q=N;m[g++]=C===0?0:C}}return m}function Jh(r){return typeof r=="number"?r:Ir(r)?J:+r}function Sr(r){if(typeof r=="string")return r;if(Re(r))return mt(r,Sr)+"";if(Ir(r))return Ph?Ph.call(r):"";var n=r+"";return n=="0"&&1/r==-Q?"-0":n}function Ni(r,n,a){var h=-1,g=io,m=r.length,C=!0,N=[],q=N;if(a)C=!1,g=Fa;else if(m>=o){var X=n?null:hy(r);if(X)return so(X);C=!1,g=Qn,q=new Ji}else q=n?[]:N;e:for(;++h<m;){var Z=r[h],ie=n?n(Z):Z;if(Z=a||Z!==0?Z:0,C&&ie===ie){for(var he=q.length;he--;)if(q[he]===ie)continue e;n&&q.push(ie),N.push(Z)}else g(q,ie,a)||(q!==N&&q.push(ie),N.push(Z))}return N}function fc(r,n){return n=$i(n,r),r=Sl(r,n),r==null||delete r[ri(jr(n))]}function Qh(r,n,a,h){return as(r,n,a(Xi(r,n)),h)}function xo(r,n,a,h){for(var g=r.length,m=h?g:-1;(h?m--:++m<g)&&n(r[m],m,r););return a?Lr(r,h?0:m,h?m+1:g):Lr(r,h?m+1:0,h?g:m)}function Xh(r,n){var a=r;return a instanceof Ye&&(a=a.value()),za(n,function(h,g){return g.func.apply(g.thisArg,Ci([h],g.args))},a)}function dc(r,n,a){var h=r.length;if(h<2)return h?Ni(r[0]):[];for(var g=-1,m=K(h);++g<h;)for(var C=r[g],N=-1;++N<h;)N!=g&&(m[g]=ns(m[g]||C,r[N],n,a));return Ni(Yt(m,1),n,a)}function Zh(r,n,a){for(var h=-1,g=r.length,m=n.length,C={};++h<g;){var N=h<m?n[h]:t;a(C,r[h],N)}return C}function pc(r){return Nt(r)?r:[]}function gc(r){return typeof r=="function"?r:vr}function $i(r,n){return Re(r)?r:Sc(r,n)?[r]:Pl(it(r))}var ey=Ke;function Ui(r,n,a){var h=r.length;return a=a===t?h:a,!n&&a>=h?r:Lr(r,n,a)}var el=zg||function(r){return Xe.clearTimeout(r)};function tl(r,n){if(n)return r.slice();var a=r.length,h=Eh?Eh(a):new r.constructor(a);return r.copy(h),h}function yc(r){var n=new r.constructor(r.byteLength);return new lo(n).set(new lo(r)),n}function ty(r,n){var a=n?yc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function ry(r){var n=new r.constructor(r.source,Ar.exec(r));return n.lastIndex=r.lastIndex,n}function iy(r){return rs?ht(rs.call(r)):{}}function rl(r,n){var a=n?yc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function il(r,n){if(r!==n){var a=r!==t,h=r===null,g=r===r,m=Ir(r),C=n!==t,N=n===null,q=n===n,X=Ir(n);if(!N&&!X&&!m&&r>n||m&&C&&q&&!N&&!X||h&&C&&q||!a&&q||!g)return 1;if(!h&&!m&&!X&&r<n||X&&a&&g&&!h&&!m||N&&a&&g||!C&&g||!q)return-1}return 0}function ny(r,n,a){for(var h=-1,g=r.criteria,m=n.criteria,C=g.length,N=a.length;++h<C;){var q=il(g[h],m[h]);if(q){if(h>=N)return q;var X=a[h];return q*(X=="desc"?-1:1)}}return r.index-n.index}function nl(r,n,a,h){for(var g=-1,m=r.length,C=a.length,N=-1,q=n.length,X=Kt(m-C,0),Z=K(q+X),ie=!h;++N<q;)Z[N]=n[N];for(;++g<C;)(ie||g<m)&&(Z[a[g]]=r[g]);for(;X--;)Z[N++]=r[g++];return Z}function sl(r,n,a,h){for(var g=-1,m=r.length,C=-1,N=a.length,q=-1,X=n.length,Z=Kt(m-N,0),ie=K(Z+X),he=!h;++g<Z;)ie[g]=r[g];for(var ye=g;++q<X;)ie[ye+q]=n[q];for(;++C<N;)(he||g<m)&&(ie[ye+a[C]]=r[g++]);return ie}function pr(r,n){var a=-1,h=r.length;for(n||(n=K(h));++a<h;)n[a]=r[a];return n}function ti(r,n,a,h){var g=!a;a||(a={});for(var m=-1,C=n.length;++m<C;){var N=n[m],q=h?h(a[N],r[N],N,a,r):t;q===t&&(q=r[N]),g?fi(a,N,q):is(a,N,q)}return a}function sy(r,n){return ti(r,Dc(r),n)}function oy(r,n){return ti(r,_l(r),n)}function Oo(r,n){return function(a,h){var g=Re(a)?lg:P0,m=n?n():{};return g(a,r,me(h,2),m)}}function Cn(r){return Ke(function(n,a){var h=-1,g=a.length,m=g>1?a[g-1]:t,C=g>2?a[2]:t;for(m=r.length>3&&typeof m=="function"?(g--,m):t,C&&or(a[0],a[1],C)&&(m=g<3?t:m,g=1),n=ht(n);++h<g;){var N=a[h];N&&r(n,N,h,m)}return n})}function ol(r,n){return function(a,h){if(a==null)return a;if(!gr(a))return r(a,h);for(var g=a.length,m=n?g:-1,C=ht(a);(n?m--:++m<g)&&h(C[m],m,C)!==!1;);return a}}function al(r){return function(n,a,h){for(var g=-1,m=ht(n),C=h(n),N=C.length;N--;){var q=C[r?N:++g];if(a(m[q],q,m)===!1)break}return n}}function ay(r,n,a){var h=n&B,g=cs(r);function m(){var C=this&&this!==Xe&&this instanceof m?g:r;return C.apply(h?a:this,arguments)}return m}function cl(r){return function(n){n=it(n);var a=En(n)?Br(n):t,h=a?a[0]:n.charAt(0),g=a?Ui(a,1).join(""):n.slice(1);return h[r]()+g}}function An(r){return function(n){return za(af(of(n).replace(Yn,"")),r,"")}}function cs(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Pn(r.prototype),h=r.apply(a,n);return Et(h)?h:a}}function cy(r,n,a){var h=cs(r);function g(){for(var m=arguments.length,C=K(m),N=m,q=Tn(g);N--;)C[N]=arguments[N];var X=m<3&&C[0]!==q&&C[m-1]!==q?[]:Ai(C,q);if(m-=X.length,m<a)return dl(r,n,Po,g.placeholder,t,C,X,t,t,a-m);var Z=this&&this!==Xe&&this instanceof g?h:r;return Vt(Z,this,C)}return g}function ul(r){return function(n,a,h){var g=ht(n);if(!gr(n)){var m=me(a,3);n=kt(n),a=function(N){return m(g[N],N,g)}}var C=r(n,a,h);return C>-1?g[m?n[C]:C]:t}}function hl(r){return pi(function(n){var a=n.length,h=a,g=$r.prototype.thru;for(r&&n.reverse();h--;){var m=n[h];if(typeof m!="function")throw new Nr(l);if(g&&!C&&Ro(m)=="wrapper")var C=new $r([],!0)}for(h=C?h:a;++h<a;){m=n[h];var N=Ro(m),q=N=="wrapper"?bc(m):t;q&&Ic(q[0])&&q[1]==(u|L|R|w)&&!q[4].length&&q[9]==1?C=C[Ro(q[0])].apply(C,q[3]):C=m.length==1&&Ic(m)?C[N]():C.thru(m)}return function(){var X=arguments,Z=X[0];if(C&&X.length==1&&Re(Z))return C.plant(Z).value();for(var ie=0,he=a?n[ie].apply(this,X):Z;++ie<a;)he=n[ie].call(this,he);return he}})}function Po(r,n,a,h,g,m,C,N,q,X){var Z=n&u,ie=n&B,he=n&ne,ye=n&(L|P),Ee=n&G,ze=he?t:cs(r);function De(){for(var Ge=arguments.length,Ze=K(Ge),xr=Ge;xr--;)Ze[xr]=arguments[xr];if(ye)var ar=Tn(De),Or=wg(Ze,ar);if(h&&(Ze=nl(Ze,h,g,ye)),m&&(Ze=sl(Ze,m,C,ye)),Ge-=Or,ye&&Ge<X){var $t=Ai(Ze,ar);return dl(r,n,Po,De.placeholder,a,Ze,$t,N,q,X-Ge)}var kr=ie?a:this,_i=he?kr[r]:r;return Ge=Ze.length,N?Ze=Py(Ze,N):Ee&&Ge>1&&Ze.reverse(),Z&&q<Ge&&(Ze.length=q),this&&this!==Xe&&this instanceof De&&(_i=ze||cs(_i)),_i.apply(kr,Ze)}return De}function ll(r,n){return function(a,h){return L0(a,r,n(h),{})}}function Co(r,n){return function(a,h){var g;if(a===t&&h===t)return n;if(a!==t&&(g=a),h!==t){if(g===t)return h;typeof a=="string"||typeof h=="string"?(a=Sr(a),h=Sr(h)):(a=Jh(a),h=Jh(h)),g=r(a,h)}return g}}function vc(r){return pi(function(n){return n=mt(n,Dr(me())),Ke(function(a){var h=this;return r(n,function(g){return Vt(g,h,a)})})})}function Ao(r,n){n=n===t?" ":Sr(n);var a=n.length;if(a<2)return a?hc(n,r):n;var h=hc(n,yo(r/Dn(n)));return En(n)?Ui(Br(h),0,r).join(""):h.slice(0,r)}function uy(r,n,a,h){var g=n&B,m=cs(r);function C(){for(var N=-1,q=arguments.length,X=-1,Z=h.length,ie=K(Z+q),he=this&&this!==Xe&&this instanceof C?m:r;++X<Z;)ie[X]=h[X];for(;q--;)ie[X++]=arguments[++N];return Vt(he,g?a:this,ie)}return C}function fl(r){return function(n,a,h){return h&&typeof h!="number"&&or(n,a,h)&&(a=h=t),n=vi(n),a===t?(a=n,n=0):a=vi(a),h=h===t?n<a?1:-1:vi(h),W0(n,a,h,r)}}function To(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Mr(n),a=Mr(a)),r(n,a)}}function dl(r,n,a,h,g,m,C,N,q,X){var Z=n&L,ie=Z?C:t,he=Z?t:C,ye=Z?m:t,Ee=Z?t:m;n|=Z?R:E,n&=~(Z?E:R),n&$||(n&=~(B|ne));var ze=[r,n,g,ye,ie,Ee,he,N,q,X],De=a.apply(t,ze);return Ic(r)&&Il(De,ze),De.placeholder=h,xl(De,r,n)}function _c(r){var n=Bt[r];return function(a,h){if(a=Mr(a),h=h==null?0:Xt(Me(h),292),h&&xh(a)){var g=(it(a)+"e").split("e"),m=n(g[0]+"e"+(+g[1]+h));return g=(it(m)+"e").split("e"),+(g[0]+"e"+(+g[1]-h))}return n(a)}}var hy=xn&&1/so(new xn([,-0]))[1]==Q?function(r){return new xn(r)}:Fc;function pl(r){return function(n){var a=Zt(n);return a==Ie?Wa(n):a==xe?Og(n):mg(n,r(n))}}function di(r,n,a,h,g,m,C,N){var q=n&ne;if(!q&&typeof r!="function")throw new Nr(l);var X=h?h.length:0;if(X||(n&=~(R|E),h=g=t),C=C===t?C:Kt(Me(C),0),N=N===t?N:Me(N),X-=g?g.length:0,n&E){var Z=h,ie=g;h=g=t}var he=q?t:bc(r),ye=[r,n,a,h,g,Z,ie,m,C,N];if(he&&Iy(ye,he),r=ye[0],n=ye[1],a=ye[2],h=ye[3],g=ye[4],N=ye[9]=ye[9]===t?q?0:r.length:Kt(ye[9]-X,0),!N&&n&(L|P)&&(n&=~(L|P)),!n||n==B)var Ee=ay(r,n,a);else n==L||n==P?Ee=cy(r,n,N):(n==R||n==(B|R))&&!g.length?Ee=uy(r,n,a,h):Ee=Po.apply(t,ye);var ze=he?Wh:Il;return xl(ze(Ee,ye),r,n)}function gl(r,n,a,h){return r===t||Vr(r,In[a])&&!nt.call(h,a)?n:r}function yl(r,n,a,h,g,m){return Et(r)&&Et(n)&&(m.set(n,r),So(r,n,t,yl,m),m.delete(n)),r}function ly(r){return ls(r)?t:r}function vl(r,n,a,h,g,m){var C=a&O,N=r.length,q=n.length;if(N!=q&&!(C&&q>N))return!1;var X=m.get(r),Z=m.get(n);if(X&&Z)return X==n&&Z==r;var ie=-1,he=!0,ye=a&z?new Ji:t;for(m.set(r,n),m.set(n,r);++ie<N;){var Ee=r[ie],ze=n[ie];if(h)var De=C?h(ze,Ee,ie,n,r,m):h(Ee,ze,ie,r,n,m);if(De!==t){if(De)continue;he=!1;break}if(ye){if(!Ha(n,function(Ge,Ze){if(!Qn(ye,Ze)&&(Ee===Ge||g(Ee,Ge,a,h,m)))return ye.push(Ze)})){he=!1;break}}else if(!(Ee===ze||g(Ee,ze,a,h,m))){he=!1;break}}return m.delete(r),m.delete(n),he}function fy(r,n,a,h,g,m,C){switch(a){case Ce:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case Se:return!(r.byteLength!=n.byteLength||!m(new lo(r),new lo(n)));case F:case U:case He:return Vr(+r,+n);case T:return r.name==n.name&&r.message==n.message;case qe:case Ne:return r==n+"";case Ie:var N=Wa;case xe:var q=h&O;if(N||(N=so),r.size!=n.size&&!q)return!1;var X=C.get(r);if(X)return X==n;h|=z,C.set(r,n);var Z=vl(N(r),N(n),h,g,m,C);return C.delete(r),Z;case $e:if(rs)return rs.call(r)==rs.call(n)}return!1}function dy(r,n,a,h,g,m){var C=a&O,N=mc(r),q=N.length,X=mc(n),Z=X.length;if(q!=Z&&!C)return!1;for(var ie=q;ie--;){var he=N[ie];if(!(C?he in n:nt.call(n,he)))return!1}var ye=m.get(r),Ee=m.get(n);if(ye&&Ee)return ye==n&&Ee==r;var ze=!0;m.set(r,n),m.set(n,r);for(var De=C;++ie<q;){he=N[ie];var Ge=r[he],Ze=n[he];if(h)var xr=C?h(Ze,Ge,he,n,r,m):h(Ge,Ze,he,r,n,m);if(!(xr===t?Ge===Ze||g(Ge,Ze,a,h,m):xr)){ze=!1;break}De||(De=he=="constructor")}if(ze&&!De){var ar=r.constructor,Or=n.constructor;ar!=Or&&"constructor"in r&&"constructor"in n&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(ze=!1)}return m.delete(r),m.delete(n),ze}function pi(r){return Oc(Dl(r,t,Rl),r+"")}function mc(r){return jh(r,kt,Dc)}function wc(r){return jh(r,yr,_l)}var bc=_o?function(r){return _o.get(r)}:Fc;function Ro(r){for(var n=r.name+"",a=On[n],h=nt.call(On,n)?a.length:0;h--;){var g=a[h],m=g.func;if(m==null||m==r)return g.name}return n}function Tn(r){var n=nt.call(_,"placeholder")?_:r;return n.placeholder}function me(){var r=_.iteratee||Mc;return r=r===Mc?Fh:r,arguments.length?r(arguments[0],arguments[1]):r}function No(r,n){var a=r.__data__;return by(n)?a[typeof n=="string"?"string":"hash"]:a.map}function Ec(r){for(var n=kt(r),a=n.length;a--;){var h=n[a],g=r[h];n[a]=[h,g,bl(g)]}return n}function Zi(r,n){var a=Sg(r,n);return qh(a)?a:t}function py(r){var n=nt.call(r,Wi),a=r[Wi];try{r[Wi]=t;var h=!0}catch{}var g=uo.call(r);return h&&(n?r[Wi]=a:delete r[Wi]),g}var Dc=Ja?function(r){return r==null?[]:(r=ht(r),Pi(Ja(r),function(n){return Sh.call(r,n)}))}:zc,_l=Ja?function(r){for(var n=[];r;)Ci(n,Dc(r)),r=fo(r);return n}:zc,Zt=sr;(Qa&&Zt(new Qa(new ArrayBuffer(1)))!=Ce||Zn&&Zt(new Zn)!=Ie||Xa&&Zt(Xa.resolve())!=gt||xn&&Zt(new xn)!=xe||es&&Zt(new es)!=Pe)&&(Zt=function(r){var n=sr(r),a=n==je?r.constructor:t,h=a?en(a):"";if(h)switch(h){case Jg:return Ce;case Qg:return Ie;case Xg:return gt;case Zg:return xe;case e0:return Pe}return n});function gy(r,n,a){for(var h=-1,g=a.length;++h<g;){var m=a[h],C=m.size;switch(m.type){case"drop":r+=C;break;case"dropRight":n-=C;break;case"take":n=Xt(n,r+C);break;case"takeRight":r=Kt(r,n-C);break}}return{start:r,end:n}}function yy(r){var n=r.match(lt);return n?n[1].split(Mt):[]}function ml(r,n,a){n=$i(n,r);for(var h=-1,g=n.length,m=!1;++h<g;){var C=ri(n[h]);if(!(m=r!=null&&a(r,C)))break;r=r[C]}return m||++h!=g?m:(g=r==null?0:r.length,!!g&&Fo(g)&&gi(C,g)&&(Re(r)||tn(r)))}function vy(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&nt.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function wl(r){return typeof r.constructor=="function"&&!us(r)?Pn(fo(r)):{}}function _y(r,n,a){var h=r.constructor;switch(n){case Se:return yc(r);case F:case U:return new h(+r);case Ce:return ty(r,a);case Be:case Oe:case ke:case We:case et:case tt:case Qe:case rr:case fr:return rl(r,a);case Ie:return new h;case He:case Ne:return new h(r);case qe:return ry(r);case xe:return new h;case $e:return iy(r)}}function my(r,n){var a=n.length;if(!a)return r;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),r.replace(Pt,`{
/* [wrapped with `+n+`] */
`)}function wy(r){return Re(r)||tn(r)||!!(Ih&&r&&r[Ih])}function gi(r,n){var a=typeof r;return n=n??V,!!n&&(a=="number"||a!="symbol"&&xa.test(r))&&r>-1&&r%1==0&&r<n}function or(r,n,a){if(!Et(a))return!1;var h=typeof n;return(h=="number"?gr(a)&&gi(n,a.length):h=="string"&&n in a)?Vr(a[n],r):!1}function Sc(r,n){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Ir(r)?!0:Ut.test(r)||!_t.test(r)||n!=null&&r in ht(n)}function by(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function Ic(r){var n=Ro(r),a=_[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(r===a)return!0;var h=bc(a);return!!h&&r===h[0]}function Ey(r){return!!bh&&bh in r}var Dy=ao?yi:Hc;function us(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||In;return r===a}function bl(r){return r===r&&!Et(r)}function El(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ht(a))}}function Sy(r){var n=Mo(r,function(h){return a.size===p&&a.clear(),h}),a=n.cache;return n}function Iy(r,n){var a=r[1],h=n[1],g=a|h,m=g<(B|ne|u),C=h==u&&a==L||h==u&&a==w&&r[7].length<=n[8]||h==(u|w)&&n[7].length<=n[8]&&a==L;if(!(m||C))return r;h&B&&(r[2]=n[2],g|=a&B?0:$);var N=n[3];if(N){var q=r[3];r[3]=q?nl(q,N,n[4]):N,r[4]=q?Ai(r[3],v):n[4]}return N=n[5],N&&(q=r[5],r[5]=q?sl(q,N,n[6]):N,r[6]=q?Ai(r[5],v):n[6]),N=n[7],N&&(r[7]=N),h&u&&(r[8]=r[8]==null?n[8]:Xt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=g,r}function xy(r){var n=[];if(r!=null)for(var a in ht(r))n.push(a);return n}function Oy(r){return uo.call(r)}function Dl(r,n,a){return n=Kt(n===t?r.length-1:n,0),function(){for(var h=arguments,g=-1,m=Kt(h.length-n,0),C=K(m);++g<m;)C[g]=h[n+g];g=-1;for(var N=K(n+1);++g<n;)N[g]=h[g];return N[n]=a(C),Vt(r,this,N)}}function Sl(r,n){return n.length<2?r:Xi(r,Lr(n,0,-1))}function Py(r,n){for(var a=r.length,h=Xt(n.length,a),g=pr(r);h--;){var m=n[h];r[h]=gi(m,a)?g[m]:t}return r}function xc(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var Il=Ol(Wh),hs=Bg||function(r,n){return Xe.setTimeout(r,n)},Oc=Ol(Q0);function xl(r,n,a){var h=n+"";return Oc(r,my(h,Cy(yy(h),a)))}function Ol(r){var n=0,a=0;return function(){var h=Gg(),g=de-(h-a);if(a=h,g>0){if(++n>=ce)return arguments[0]}else n=0;return r.apply(t,arguments)}}function $o(r,n){var a=-1,h=r.length,g=h-1;for(n=n===t?h:n;++a<n;){var m=uc(a,g),C=r[m];r[m]=r[a],r[a]=C}return r.length=n,r}var Pl=Sy(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(Lt,function(a,h,g,m){n.push(g?m.replace(wa,"$1"):h||a)}),n});function ri(r){if(typeof r=="string"||Ir(r))return r;var n=r+"";return n=="0"&&1/r==-Q?"-0":n}function en(r){if(r!=null){try{return co.call(r)}catch{}try{return r+""}catch{}}return""}function Cy(r,n){return Rr(be,function(a){var h="_."+a[0];n&a[1]&&!io(r,h)&&r.push(h)}),r.sort()}function Cl(r){if(r instanceof Ye)return r.clone();var n=new $r(r.__wrapped__,r.__chain__);return n.__actions__=pr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function Ay(r,n,a){(a?or(r,n,a):n===t)?n=1:n=Kt(Me(n),0);var h=r==null?0:r.length;if(!h||n<1)return[];for(var g=0,m=0,C=K(yo(h/n));g<h;)C[m++]=Lr(r,g,g+=n);return C}function Ty(r){for(var n=-1,a=r==null?0:r.length,h=0,g=[];++n<a;){var m=r[n];m&&(g[h++]=m)}return g}function Ry(){var r=arguments.length;if(!r)return[];for(var n=K(r-1),a=arguments[0],h=r;h--;)n[h-1]=arguments[h];return Ci(Re(a)?pr(a):[a],Yt(n,1))}var Ny=Ke(function(r,n){return Nt(r)?ns(r,Yt(n,1,Nt,!0)):[]}),$y=Ke(function(r,n){var a=jr(n);return Nt(a)&&(a=t),Nt(r)?ns(r,Yt(n,1,Nt,!0),me(a,2)):[]}),Uy=Ke(function(r,n){var a=jr(n);return Nt(a)&&(a=t),Nt(r)?ns(r,Yt(n,1,Nt,!0),t,a):[]});function Ly(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),Lr(r,n<0?0:n,h)):[]}function jy(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,Lr(r,0,n<0?0:n)):[]}function My(r,n){return r&&r.length?xo(r,me(n,3),!0,!0):[]}function qy(r,n){return r&&r.length?xo(r,me(n,3),!0):[]}function Fy(r,n,a,h){var g=r==null?0:r.length;return g?(a&&typeof a!="number"&&or(r,n,a)&&(a=0,h=g),R0(r,n,a,h)):[]}function Al(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Kt(h+g,0)),no(r,me(n,3),g)}function Tl(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=h-1;return a!==t&&(g=Me(a),g=a<0?Kt(h+g,0):Xt(g,h-1)),no(r,me(n,3),g,!0)}function Rl(r){var n=r==null?0:r.length;return n?Yt(r,1):[]}function zy(r){var n=r==null?0:r.length;return n?Yt(r,Q):[]}function Hy(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:Me(n),Yt(r,n)):[]}function By(r){for(var n=-1,a=r==null?0:r.length,h={};++n<a;){var g=r[n];h[g[0]]=g[1]}return h}function Nl(r){return r&&r.length?r[0]:t}function Ky(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Kt(h+g,0)),bn(r,n,g)}function Vy(r){var n=r==null?0:r.length;return n?Lr(r,0,-1):[]}var ky=Ke(function(r){var n=mt(r,pc);return n.length&&n[0]===r[0]?nc(n):[]}),Gy=Ke(function(r){var n=jr(r),a=mt(r,pc);return n===jr(a)?n=t:a.pop(),a.length&&a[0]===r[0]?nc(a,me(n,2)):[]}),Wy=Ke(function(r){var n=jr(r),a=mt(r,pc);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?nc(a,t,n):[]});function Yy(r,n){return r==null?"":Vg.call(r,n)}function jr(r){var n=r==null?0:r.length;return n?r[n-1]:t}function Jy(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=h;return a!==t&&(g=Me(a),g=g<0?Kt(h+g,0):Xt(g,h-1)),n===n?Cg(r,n,g):no(r,dh,g,!0)}function Qy(r,n){return r&&r.length?Kh(r,Me(n)):t}var Xy=Ke($l);function $l(r,n){return r&&r.length&&n&&n.length?cc(r,n):r}function Zy(r,n,a){return r&&r.length&&n&&n.length?cc(r,n,me(a,2)):r}function ev(r,n,a){return r&&r.length&&n&&n.length?cc(r,n,t,a):r}var tv=pi(function(r,n){var a=r==null?0:r.length,h=ec(r,n);return Gh(r,mt(n,function(g){return gi(g,a)?+g:g}).sort(il)),h});function rv(r,n){var a=[];if(!(r&&r.length))return a;var h=-1,g=[],m=r.length;for(n=me(n,3);++h<m;){var C=r[h];n(C,h,r)&&(a.push(C),g.push(h))}return Gh(r,g),a}function Pc(r){return r==null?r:Yg.call(r)}function iv(r,n,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&or(r,n,a)?(n=0,a=h):(n=n==null?0:Me(n),a=a===t?h:Me(a)),Lr(r,n,a)):[]}function nv(r,n){return Io(r,n)}function sv(r,n,a){return lc(r,n,me(a,2))}function ov(r,n){var a=r==null?0:r.length;if(a){var h=Io(r,n);if(h<a&&Vr(r[h],n))return h}return-1}function av(r,n){return Io(r,n,!0)}function cv(r,n,a){return lc(r,n,me(a,2),!0)}function uv(r,n){var a=r==null?0:r.length;if(a){var h=Io(r,n,!0)-1;if(Vr(r[h],n))return h}return-1}function hv(r){return r&&r.length?Yh(r):[]}function lv(r,n){return r&&r.length?Yh(r,me(n,2)):[]}function fv(r){var n=r==null?0:r.length;return n?Lr(r,1,n):[]}function dv(r,n,a){return r&&r.length?(n=a||n===t?1:Me(n),Lr(r,0,n<0?0:n)):[]}function pv(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,Lr(r,n<0?0:n,h)):[]}function gv(r,n){return r&&r.length?xo(r,me(n,3),!1,!0):[]}function yv(r,n){return r&&r.length?xo(r,me(n,3)):[]}var vv=Ke(function(r){return Ni(Yt(r,1,Nt,!0))}),_v=Ke(function(r){var n=jr(r);return Nt(n)&&(n=t),Ni(Yt(r,1,Nt,!0),me(n,2))}),mv=Ke(function(r){var n=jr(r);return n=typeof n=="function"?n:t,Ni(Yt(r,1,Nt,!0),t,n)});function wv(r){return r&&r.length?Ni(r):[]}function bv(r,n){return r&&r.length?Ni(r,me(n,2)):[]}function Ev(r,n){return n=typeof n=="function"?n:t,r&&r.length?Ni(r,t,n):[]}function Cc(r){if(!(r&&r.length))return[];var n=0;return r=Pi(r,function(a){if(Nt(a))return n=Kt(a.length,n),!0}),ka(n,function(a){return mt(r,Ba(a))})}function Ul(r,n){if(!(r&&r.length))return[];var a=Cc(r);return n==null?a:mt(a,function(h){return Vt(n,t,h)})}var Dv=Ke(function(r,n){return Nt(r)?ns(r,n):[]}),Sv=Ke(function(r){return dc(Pi(r,Nt))}),Iv=Ke(function(r){var n=jr(r);return Nt(n)&&(n=t),dc(Pi(r,Nt),me(n,2))}),xv=Ke(function(r){var n=jr(r);return n=typeof n=="function"?n:t,dc(Pi(r,Nt),t,n)}),Ov=Ke(Cc);function Pv(r,n){return Zh(r||[],n||[],is)}function Cv(r,n){return Zh(r||[],n||[],as)}var Av=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Ul(r,a)});function Ll(r){var n=_(r);return n.__chain__=!0,n}function Tv(r,n){return n(r),r}function Uo(r,n){return n(r)}var Rv=pi(function(r){var n=r.length,a=n?r[0]:0,h=this.__wrapped__,g=function(m){return ec(m,r)};return n>1||this.__actions__.length||!(h instanceof Ye)||!gi(a)?this.thru(g):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:Uo,args:[g],thisArg:t}),new $r(h,this.__chain__).thru(function(m){return n&&!m.length&&m.push(t),m}))});function Nv(){return Ll(this)}function $v(){return new $r(this.value(),this.__chain__)}function Uv(){this.__values__===t&&(this.__values__=Jl(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function Lv(){return this}function jv(r){for(var n,a=this;a instanceof wo;){var h=Cl(a);h.__index__=0,h.__values__=t,n?g.__wrapped__=h:n=h;var g=h;a=a.__wrapped__}return g.__wrapped__=r,n}function Mv(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:Uo,args:[Pc],thisArg:t}),new $r(n,this.__chain__)}return this.thru(Pc)}function qv(){return Xh(this.__wrapped__,this.__actions__)}var Fv=Oo(function(r,n,a){nt.call(r,a)?++r[a]:fi(r,a,1)});function zv(r,n,a){var h=Re(r)?lh:T0;return a&&or(r,n,a)&&(n=t),h(r,me(n,3))}function Hv(r,n){var a=Re(r)?Pi:Uh;return a(r,me(n,3))}var Bv=ul(Al),Kv=ul(Tl);function Vv(r,n){return Yt(Lo(r,n),1)}function kv(r,n){return Yt(Lo(r,n),Q)}function Gv(r,n,a){return a=a===t?1:Me(a),Yt(Lo(r,n),a)}function jl(r,n){var a=Re(r)?Rr:Ri;return a(r,me(n,3))}function Ml(r,n){var a=Re(r)?fg:$h;return a(r,me(n,3))}var Wv=Oo(function(r,n,a){nt.call(r,a)?r[a].push(n):fi(r,a,[n])});function Yv(r,n,a,h){r=gr(r)?r:Nn(r),a=a&&!h?Me(a):0;var g=r.length;return a<0&&(a=Kt(g+a,0)),zo(r)?a<=g&&r.indexOf(n,a)>-1:!!g&&bn(r,n,a)>-1}var Jv=Ke(function(r,n,a){var h=-1,g=typeof n=="function",m=gr(r)?K(r.length):[];return Ri(r,function(C){m[++h]=g?Vt(n,C,a):ss(C,n,a)}),m}),Qv=Oo(function(r,n,a){fi(r,a,n)});function Lo(r,n){var a=Re(r)?mt:zh;return a(r,me(n,3))}function Xv(r,n,a,h){return r==null?[]:(Re(n)||(n=n==null?[]:[n]),a=h?t:a,Re(a)||(a=a==null?[]:[a]),Vh(r,n,a))}var Zv=Oo(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function e_(r,n,a){var h=Re(r)?za:gh,g=arguments.length<3;return h(r,me(n,4),a,g,Ri)}function t_(r,n,a){var h=Re(r)?dg:gh,g=arguments.length<3;return h(r,me(n,4),a,g,$h)}function r_(r,n){var a=Re(r)?Pi:Uh;return a(r,qo(me(n,3)))}function i_(r){var n=Re(r)?Ah:Y0;return n(r)}function n_(r,n,a){(a?or(r,n,a):n===t)?n=1:n=Me(n);var h=Re(r)?x0:J0;return h(r,n)}function s_(r){var n=Re(r)?O0:X0;return n(r)}function o_(r){if(r==null)return 0;if(gr(r))return zo(r)?Dn(r):r.length;var n=Zt(r);return n==Ie||n==xe?r.size:oc(r).length}function a_(r,n,a){var h=Re(r)?Ha:Z0;return a&&or(r,n,a)&&(n=t),h(r,me(n,3))}var c_=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&or(r,n[0],n[1])?n=[]:a>2&&or(n[0],n[1],n[2])&&(n=[n[0]]),Vh(r,Yt(n,1),[])}),jo=Hg||function(){return Xe.Date.now()};function u_(r,n){if(typeof n!="function")throw new Nr(l);return r=Me(r),function(){if(--r<1)return n.apply(this,arguments)}}function ql(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,di(r,u,t,t,t,t,n)}function Fl(r,n){var a;if(typeof n!="function")throw new Nr(l);return r=Me(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var Ac=Ke(function(r,n,a){var h=B;if(a.length){var g=Ai(a,Tn(Ac));h|=R}return di(r,h,n,a,g)}),zl=Ke(function(r,n,a){var h=B|ne;if(a.length){var g=Ai(a,Tn(zl));h|=R}return di(n,h,r,a,g)});function Hl(r,n,a){n=a?t:n;var h=di(r,L,t,t,t,t,t,n);return h.placeholder=Hl.placeholder,h}function Bl(r,n,a){n=a?t:n;var h=di(r,P,t,t,t,t,t,n);return h.placeholder=Bl.placeholder,h}function Kl(r,n,a){var h,g,m,C,N,q,X=0,Z=!1,ie=!1,he=!0;if(typeof r!="function")throw new Nr(l);n=Mr(n)||0,Et(a)&&(Z=!!a.leading,ie="maxWait"in a,m=ie?Kt(Mr(a.maxWait)||0,n):m,he="trailing"in a?!!a.trailing:he);function ye($t){var kr=h,_i=g;return h=g=t,X=$t,C=r.apply(_i,kr),C}function Ee($t){return X=$t,N=hs(Ge,n),Z?ye($t):C}function ze($t){var kr=$t-q,_i=$t-X,hf=n-kr;return ie?Xt(hf,m-_i):hf}function De($t){var kr=$t-q,_i=$t-X;return q===t||kr>=n||kr<0||ie&&_i>=m}function Ge(){var $t=jo();if(De($t))return Ze($t);N=hs(Ge,ze($t))}function Ze($t){return N=t,he&&h?ye($t):(h=g=t,C)}function xr(){N!==t&&el(N),X=0,h=q=g=N=t}function ar(){return N===t?C:Ze(jo())}function Or(){var $t=jo(),kr=De($t);if(h=arguments,g=this,q=$t,kr){if(N===t)return Ee(q);if(ie)return el(N),N=hs(Ge,n),ye(q)}return N===t&&(N=hs(Ge,n)),C}return Or.cancel=xr,Or.flush=ar,Or}var h_=Ke(function(r,n){return Nh(r,1,n)}),l_=Ke(function(r,n,a){return Nh(r,Mr(n)||0,a)});function f_(r){return di(r,G)}function Mo(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Nr(l);var a=function(){var h=arguments,g=n?n.apply(this,h):h[0],m=a.cache;if(m.has(g))return m.get(g);var C=r.apply(this,h);return a.cache=m.set(g,C)||m,C};return a.cache=new(Mo.Cache||li),a}Mo.Cache=li;function qo(r){if(typeof r!="function")throw new Nr(l);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function d_(r){return Fl(2,r)}var p_=ey(function(r,n){n=n.length==1&&Re(n[0])?mt(n[0],Dr(me())):mt(Yt(n,1),Dr(me()));var a=n.length;return Ke(function(h){for(var g=-1,m=Xt(h.length,a);++g<m;)h[g]=n[g].call(this,h[g]);return Vt(r,this,h)})}),Tc=Ke(function(r,n){var a=Ai(n,Tn(Tc));return di(r,R,t,n,a)}),Vl=Ke(function(r,n){var a=Ai(n,Tn(Vl));return di(r,E,t,n,a)}),g_=pi(function(r,n){return di(r,w,t,t,t,n)});function y_(r,n){if(typeof r!="function")throw new Nr(l);return n=n===t?n:Me(n),Ke(r,n)}function v_(r,n){if(typeof r!="function")throw new Nr(l);return n=n==null?0:Kt(Me(n),0),Ke(function(a){var h=a[n],g=Ui(a,0,n);return h&&Ci(g,h),Vt(r,this,g)})}function __(r,n,a){var h=!0,g=!0;if(typeof r!="function")throw new Nr(l);return Et(a)&&(h="leading"in a?!!a.leading:h,g="trailing"in a?!!a.trailing:g),Kl(r,n,{leading:h,maxWait:n,trailing:g})}function m_(r){return ql(r,1)}function w_(r,n){return Tc(gc(n),r)}function b_(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function E_(r){return Ur(r,x)}function D_(r,n){return n=typeof n=="function"?n:t,Ur(r,x,n)}function S_(r){return Ur(r,S|x)}function I_(r,n){return n=typeof n=="function"?n:t,Ur(r,S|x,n)}function x_(r,n){return n==null||Rh(r,n,kt(n))}function Vr(r,n){return r===n||r!==r&&n!==n}var O_=To(ic),P_=To(function(r,n){return r>=n}),tn=Mh(function(){return arguments}())?Mh:function(r){return Ct(r)&&nt.call(r,"callee")&&!Sh.call(r,"callee")},Re=K.isArray,C_=nr?Dr(nr):j0;function gr(r){return r!=null&&Fo(r.length)&&!yi(r)}function Nt(r){return Ct(r)&&gr(r)}function A_(r){return r===!0||r===!1||Ct(r)&&sr(r)==F}var Li=Kg||Hc,T_=Hr?Dr(Hr):M0;function R_(r){return Ct(r)&&r.nodeType===1&&!ls(r)}function N_(r){if(r==null)return!0;if(gr(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||Li(r)||Rn(r)||tn(r)))return!r.length;var n=Zt(r);if(n==Ie||n==xe)return!r.size;if(us(r))return!oc(r).length;for(var a in r)if(nt.call(r,a))return!1;return!0}function $_(r,n){return os(r,n)}function U_(r,n,a){a=typeof a=="function"?a:t;var h=a?a(r,n):t;return h===t?os(r,n,t,a):!!h}function Rc(r){if(!Ct(r))return!1;var n=sr(r);return n==T||n==d||typeof r.message=="string"&&typeof r.name=="string"&&!ls(r)}function L_(r){return typeof r=="number"&&xh(r)}function yi(r){if(!Et(r))return!1;var n=sr(r);return n==ae||n==fe||n==H||n==yt}function kl(r){return typeof r=="number"&&r==Me(r)}function Fo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=V}function Et(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function Ct(r){return r!=null&&typeof r=="object"}var Gl=Tr?Dr(Tr):F0;function j_(r,n){return r===n||sc(r,n,Ec(n))}function M_(r,n,a){return a=typeof a=="function"?a:t,sc(r,n,Ec(n),a)}function q_(r){return Wl(r)&&r!=+r}function F_(r){if(Dy(r))throw new Ae(c);return qh(r)}function z_(r){return r===null}function H_(r){return r==null}function Wl(r){return typeof r=="number"||Ct(r)&&sr(r)==He}function ls(r){if(!Ct(r)||sr(r)!=je)return!1;var n=fo(r);if(n===null)return!0;var a=nt.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&co.call(a)==Mg}var Nc=Zr?Dr(Zr):z0;function B_(r){return kl(r)&&r>=-V&&r<=V}var Yl=Jn?Dr(Jn):H0;function zo(r){return typeof r=="string"||!Re(r)&&Ct(r)&&sr(r)==Ne}function Ir(r){return typeof r=="symbol"||Ct(r)&&sr(r)==$e}var Rn=Gi?Dr(Gi):B0;function K_(r){return r===t}function V_(r){return Ct(r)&&Zt(r)==Pe}function k_(r){return Ct(r)&&sr(r)==Ue}var G_=To(ac),W_=To(function(r,n){return r<=n});function Jl(r){if(!r)return[];if(gr(r))return zo(r)?Br(r):pr(r);if(Xn&&r[Xn])return xg(r[Xn]());var n=Zt(r),a=n==Ie?Wa:n==xe?so:Nn;return a(r)}function vi(r){if(!r)return r===0?r:0;if(r=Mr(r),r===Q||r===-Q){var n=r<0?-1:1;return n*k}return r===r?r:0}function Me(r){var n=vi(r),a=n%1;return n===n?a?n-a:n:0}function Ql(r){return r?Qi(Me(r),0,re):0}function Mr(r){if(typeof r=="number")return r;if(Ir(r))return J;if(Et(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=Et(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=yh(r);var a=Da.test(r);return a||Ia.test(r)?Te(r.slice(2),a?2:8):Ea.test(r)?J:+r}function Xl(r){return ti(r,yr(r))}function Y_(r){return r?Qi(Me(r),-V,V):r===0?r:0}function it(r){return r==null?"":Sr(r)}var J_=Cn(function(r,n){if(us(n)||gr(n)){ti(n,kt(n),r);return}for(var a in n)nt.call(n,a)&&is(r,a,n[a])}),Zl=Cn(function(r,n){ti(n,yr(n),r)}),Ho=Cn(function(r,n,a,h){ti(n,yr(n),r,h)}),Q_=Cn(function(r,n,a,h){ti(n,kt(n),r,h)}),X_=pi(ec);function Z_(r,n){var a=Pn(r);return n==null?a:Th(a,n)}var em=Ke(function(r,n){r=ht(r);var a=-1,h=n.length,g=h>2?n[2]:t;for(g&&or(n[0],n[1],g)&&(h=1);++a<h;)for(var m=n[a],C=yr(m),N=-1,q=C.length;++N<q;){var X=C[N],Z=r[X];(Z===t||Vr(Z,In[X])&&!nt.call(r,X))&&(r[X]=m[X])}return r}),tm=Ke(function(r){return r.push(t,yl),Vt(ef,t,r)});function rm(r,n){return fh(r,me(n,3),ei)}function im(r,n){return fh(r,me(n,3),rc)}function nm(r,n){return r==null?r:tc(r,me(n,3),yr)}function sm(r,n){return r==null?r:Lh(r,me(n,3),yr)}function om(r,n){return r&&ei(r,me(n,3))}function am(r,n){return r&&rc(r,me(n,3))}function cm(r){return r==null?[]:Do(r,kt(r))}function um(r){return r==null?[]:Do(r,yr(r))}function $c(r,n,a){var h=r==null?t:Xi(r,n);return h===t?a:h}function hm(r,n){return r!=null&&ml(r,n,N0)}function Uc(r,n){return r!=null&&ml(r,n,$0)}var lm=ll(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=uo.call(n)),r[n]=a},jc(vr)),fm=ll(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=uo.call(n)),nt.call(r,n)?r[n].push(a):r[n]=[a]},me),dm=Ke(ss);function kt(r){return gr(r)?Ch(r):oc(r)}function yr(r){return gr(r)?Ch(r,!0):K0(r)}function pm(r,n){var a={};return n=me(n,3),ei(r,function(h,g,m){fi(a,n(h,g,m),h)}),a}function gm(r,n){var a={};return n=me(n,3),ei(r,function(h,g,m){fi(a,g,n(h,g,m))}),a}var ym=Cn(function(r,n,a){So(r,n,a)}),ef=Cn(function(r,n,a,h){So(r,n,a,h)}),vm=pi(function(r,n){var a={};if(r==null)return a;var h=!1;n=mt(n,function(m){return m=$i(m,r),h||(h=m.length>1),m}),ti(r,wc(r),a),h&&(a=Ur(a,S|D|x,ly));for(var g=n.length;g--;)fc(a,n[g]);return a});function _m(r,n){return tf(r,qo(me(n)))}var mm=pi(function(r,n){return r==null?{}:k0(r,n)});function tf(r,n){if(r==null)return{};var a=mt(wc(r),function(h){return[h]});return n=me(n),kh(r,a,function(h,g){return n(h,g[0])})}function wm(r,n,a){n=$i(n,r);var h=-1,g=n.length;for(g||(g=1,r=t);++h<g;){var m=r==null?t:r[ri(n[h])];m===t&&(h=g,m=a),r=yi(m)?m.call(r):m}return r}function bm(r,n,a){return r==null?r:as(r,n,a)}function Em(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:as(r,n,a,h)}var rf=pl(kt),nf=pl(yr);function Dm(r,n,a){var h=Re(r),g=h||Li(r)||Rn(r);if(n=me(n,4),a==null){var m=r&&r.constructor;g?a=h?new m:[]:Et(r)?a=yi(m)?Pn(fo(r)):{}:a={}}return(g?Rr:ei)(r,function(C,N,q){return n(a,C,N,q)}),a}function Sm(r,n){return r==null?!0:fc(r,n)}function Im(r,n,a){return r==null?r:Qh(r,n,gc(a))}function xm(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:Qh(r,n,gc(a),h)}function Nn(r){return r==null?[]:Ga(r,kt(r))}function Om(r){return r==null?[]:Ga(r,yr(r))}function Pm(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=Mr(a),a=a===a?a:0),n!==t&&(n=Mr(n),n=n===n?n:0),Qi(Mr(r),n,a)}function Cm(r,n,a){return n=vi(n),a===t?(a=n,n=0):a=vi(a),r=Mr(r),U0(r,n,a)}function Am(r,n,a){if(a&&typeof a!="boolean"&&or(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=vi(r),n===t?(n=r,r=0):n=vi(n)),r>n){var h=r;r=n,n=h}if(a||r%1||n%1){var g=Oh();return Xt(r+g*(n-r+ct("1e-"+((g+"").length-1))),n)}return uc(r,n)}var Tm=An(function(r,n,a){return n=n.toLowerCase(),r+(a?sf(n):n)});function sf(r){return Lc(it(r).toLowerCase())}function of(r){return r=it(r),r&&r.replace(ci,bg).replace(Ma,"")}function Rm(r,n,a){r=it(r),n=Sr(n);var h=r.length;a=a===t?h:Qi(Me(a),0,h);var g=a;return a-=n.length,a>=0&&r.slice(a,g)==n}function Nm(r){return r=it(r),r&&vt.test(r)?r.replace(Hi,Eg):r}function $m(r){return r=it(r),r&&jt.test(r)?r.replace(xt,"\\$&"):r}var Um=An(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),Lm=An(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),jm=cl("toLowerCase");function Mm(r,n,a){r=it(r),n=Me(n);var h=n?Dn(r):0;if(!n||h>=n)return r;var g=(n-h)/2;return Ao(vo(g),a)+r+Ao(yo(g),a)}function qm(r,n,a){r=it(r),n=Me(n);var h=n?Dn(r):0;return n&&h<n?r+Ao(n-h,a):r}function Fm(r,n,a){r=it(r),n=Me(n);var h=n?Dn(r):0;return n&&h<n?Ao(n-h,a)+r:r}function zm(r,n,a){return a||n==null?n=0:n&&(n=+n),Wg(it(r).replace(Ot,""),n||0)}function Hm(r,n,a){return(a?or(r,n,a):n===t)?n=1:n=Me(n),hc(it(r),n)}function Bm(){var r=arguments,n=it(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var Km=An(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function Vm(r,n,a){return a&&typeof a!="number"&&or(r,n,a)&&(n=a=t),a=a===t?re:a>>>0,a?(r=it(r),r&&(typeof n=="string"||n!=null&&!Nc(n))&&(n=Sr(n),!n&&En(r))?Ui(Br(r),0,a):r.split(n,a)):[]}var km=An(function(r,n,a){return r+(a?" ":"")+Lc(n)});function Gm(r,n,a){return r=it(r),a=a==null?0:Qi(Me(a),0,r.length),n=Sr(n),r.slice(a,a+n.length)==n}function Wm(r,n,a){var h=_.templateSettings;a&&or(r,n,a)&&(n=t),r=it(r),n=Ho({},n,h,gl);var g=Ho({},n.imports,h.imports,gl),m=kt(g),C=Ga(g,m),N,q,X=0,Z=n.interpolate||pn,ie="__p += '",he=Ya((n.escape||pn).source+"|"+Z.source+"|"+(Z===bt?ba:pn).source+"|"+(n.evaluate||pn).source+"|$","g"),ye="//# sourceURL="+(nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qa+"]")+`
`;r.replace(he,function(De,Ge,Ze,xr,ar,Or){return Ze||(Ze=xr),ie+=r.slice(X,Or).replace(Oa,Dg),Ge&&(N=!0,ie+=`' +
__e(`+Ge+`) +
'`),ar&&(q=!0,ie+=`';
`+ar+`;
__p += '`),Ze&&(ie+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),X=Or+De.length,De}),ie+=`';
`;var Ee=nt.call(n,"variable")&&n.variable;if(!Ee)ie=`with (obj) {
`+ie+`
}
`;else if(ma.test(Ee))throw new Ae(f);ie=(q?ie.replace(Qr,""):ie).replace(ir,"$1").replace(ai,"$1;"),ie="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var ze=cf(function(){return rt(m,ye+"return "+ie).apply(t,C)});if(ze.source=ie,Rc(ze))throw ze;return ze}function Ym(r){return it(r).toLowerCase()}function Jm(r){return it(r).toUpperCase()}function Qm(r,n,a){if(r=it(r),r&&(a||n===t))return yh(r);if(!r||!(n=Sr(n)))return r;var h=Br(r),g=Br(n),m=vh(h,g),C=_h(h,g)+1;return Ui(h,m,C).join("")}function Xm(r,n,a){if(r=it(r),r&&(a||n===t))return r.slice(0,wh(r)+1);if(!r||!(n=Sr(n)))return r;var h=Br(r),g=_h(h,Br(n))+1;return Ui(h,0,g).join("")}function Zm(r,n,a){if(r=it(r),r&&(a||n===t))return r.replace(Ot,"");if(!r||!(n=Sr(n)))return r;var h=Br(r),g=vh(h,Br(n));return Ui(h,g).join("")}function ew(r,n){var a=W,h=se;if(Et(n)){var g="separator"in n?n.separator:g;a="length"in n?Me(n.length):a,h="omission"in n?Sr(n.omission):h}r=it(r);var m=r.length;if(En(r)){var C=Br(r);m=C.length}if(a>=m)return r;var N=a-Dn(h);if(N<1)return h;var q=C?Ui(C,0,N).join(""):r.slice(0,N);if(g===t)return q+h;if(C&&(N+=q.length-N),Nc(g)){if(r.slice(N).search(g)){var X,Z=q;for(g.global||(g=Ya(g.source,it(Ar.exec(g))+"g")),g.lastIndex=0;X=g.exec(Z);)var ie=X.index;q=q.slice(0,ie===t?N:ie)}}else if(r.indexOf(Sr(g),N)!=N){var he=q.lastIndexOf(g);he>-1&&(q=q.slice(0,he))}return q+h}function tw(r){return r=it(r),r&&Dt.test(r)?r.replace(xi,Ag):r}var rw=An(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),Lc=cl("toUpperCase");function af(r,n,a){return r=it(r),n=a?t:n,n===t?Ig(r)?Ng(r):yg(r):r.match(n)||[]}var cf=Ke(function(r,n){try{return Vt(r,t,n)}catch(a){return Rc(a)?a:new Ae(a)}}),iw=pi(function(r,n){return Rr(n,function(a){a=ri(a),fi(r,a,Ac(r[a],r))}),r});function nw(r){var n=r==null?0:r.length,a=me();return r=n?mt(r,function(h){if(typeof h[1]!="function")throw new Nr(l);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var g=-1;++g<n;){var m=r[g];if(Vt(m[0],this,h))return Vt(m[1],this,h)}})}function sw(r){return A0(Ur(r,S))}function jc(r){return function(){return r}}function ow(r,n){return r==null||r!==r?n:r}var aw=hl(),cw=hl(!0);function vr(r){return r}function Mc(r){return Fh(typeof r=="function"?r:Ur(r,S))}function uw(r){return Hh(Ur(r,S))}function hw(r,n){return Bh(r,Ur(n,S))}var lw=Ke(function(r,n){return function(a){return ss(a,r,n)}}),fw=Ke(function(r,n){return function(a){return ss(r,a,n)}});function qc(r,n,a){var h=kt(n),g=Do(n,h);a==null&&!(Et(n)&&(g.length||!h.length))&&(a=n,n=r,r=this,g=Do(n,kt(n)));var m=!(Et(a)&&"chain"in a)||!!a.chain,C=yi(r);return Rr(g,function(N){var q=n[N];r[N]=q,C&&(r.prototype[N]=function(){var X=this.__chain__;if(m||X){var Z=r(this.__wrapped__),ie=Z.__actions__=pr(this.__actions__);return ie.push({func:q,args:arguments,thisArg:r}),Z.__chain__=X,Z}return q.apply(r,Ci([this.value()],arguments))})}),r}function dw(){return Xe._===this&&(Xe._=qg),this}function Fc(){}function pw(r){return r=Me(r),Ke(function(n){return Kh(n,r)})}var gw=vc(mt),yw=vc(lh),vw=vc(Ha);function uf(r){return Sc(r)?Ba(ri(r)):G0(r)}function _w(r){return function(n){return r==null?t:Xi(r,n)}}var mw=fl(),ww=fl(!0);function zc(){return[]}function Hc(){return!1}function bw(){return{}}function Ew(){return""}function Dw(){return!0}function Sw(r,n){if(r=Me(r),r<1||r>V)return[];var a=re,h=Xt(r,re);n=me(n),r-=re;for(var g=ka(h,n);++a<r;)n(a);return g}function Iw(r){return Re(r)?mt(r,ri):Ir(r)?[r]:pr(Pl(it(r)))}function xw(r){var n=++jg;return it(r)+n}var Ow=Co(function(r,n){return r+n},0),Pw=_c("ceil"),Cw=Co(function(r,n){return r/n},1),Aw=_c("floor");function Tw(r){return r&&r.length?Eo(r,vr,ic):t}function Rw(r,n){return r&&r.length?Eo(r,me(n,2),ic):t}function Nw(r){return ph(r,vr)}function $w(r,n){return ph(r,me(n,2))}function Uw(r){return r&&r.length?Eo(r,vr,ac):t}function Lw(r,n){return r&&r.length?Eo(r,me(n,2),ac):t}var jw=Co(function(r,n){return r*n},1),Mw=_c("round"),qw=Co(function(r,n){return r-n},0);function Fw(r){return r&&r.length?Va(r,vr):0}function zw(r,n){return r&&r.length?Va(r,me(n,2)):0}return _.after=u_,_.ary=ql,_.assign=J_,_.assignIn=Zl,_.assignInWith=Ho,_.assignWith=Q_,_.at=X_,_.before=Fl,_.bind=Ac,_.bindAll=iw,_.bindKey=zl,_.castArray=b_,_.chain=Ll,_.chunk=Ay,_.compact=Ty,_.concat=Ry,_.cond=nw,_.conforms=sw,_.constant=jc,_.countBy=Fv,_.create=Z_,_.curry=Hl,_.curryRight=Bl,_.debounce=Kl,_.defaults=em,_.defaultsDeep=tm,_.defer=h_,_.delay=l_,_.difference=Ny,_.differenceBy=$y,_.differenceWith=Uy,_.drop=Ly,_.dropRight=jy,_.dropRightWhile=My,_.dropWhile=qy,_.fill=Fy,_.filter=Hv,_.flatMap=Vv,_.flatMapDeep=kv,_.flatMapDepth=Gv,_.flatten=Rl,_.flattenDeep=zy,_.flattenDepth=Hy,_.flip=f_,_.flow=aw,_.flowRight=cw,_.fromPairs=By,_.functions=cm,_.functionsIn=um,_.groupBy=Wv,_.initial=Vy,_.intersection=ky,_.intersectionBy=Gy,_.intersectionWith=Wy,_.invert=lm,_.invertBy=fm,_.invokeMap=Jv,_.iteratee=Mc,_.keyBy=Qv,_.keys=kt,_.keysIn=yr,_.map=Lo,_.mapKeys=pm,_.mapValues=gm,_.matches=uw,_.matchesProperty=hw,_.memoize=Mo,_.merge=ym,_.mergeWith=ef,_.method=lw,_.methodOf=fw,_.mixin=qc,_.negate=qo,_.nthArg=pw,_.omit=vm,_.omitBy=_m,_.once=d_,_.orderBy=Xv,_.over=gw,_.overArgs=p_,_.overEvery=yw,_.overSome=vw,_.partial=Tc,_.partialRight=Vl,_.partition=Zv,_.pick=mm,_.pickBy=tf,_.property=uf,_.propertyOf=_w,_.pull=Xy,_.pullAll=$l,_.pullAllBy=Zy,_.pullAllWith=ev,_.pullAt=tv,_.range=mw,_.rangeRight=ww,_.rearg=g_,_.reject=r_,_.remove=rv,_.rest=y_,_.reverse=Pc,_.sampleSize=n_,_.set=bm,_.setWith=Em,_.shuffle=s_,_.slice=iv,_.sortBy=c_,_.sortedUniq=hv,_.sortedUniqBy=lv,_.split=Vm,_.spread=v_,_.tail=fv,_.take=dv,_.takeRight=pv,_.takeRightWhile=gv,_.takeWhile=yv,_.tap=Tv,_.throttle=__,_.thru=Uo,_.toArray=Jl,_.toPairs=rf,_.toPairsIn=nf,_.toPath=Iw,_.toPlainObject=Xl,_.transform=Dm,_.unary=m_,_.union=vv,_.unionBy=_v,_.unionWith=mv,_.uniq=wv,_.uniqBy=bv,_.uniqWith=Ev,_.unset=Sm,_.unzip=Cc,_.unzipWith=Ul,_.update=Im,_.updateWith=xm,_.values=Nn,_.valuesIn=Om,_.without=Dv,_.words=af,_.wrap=w_,_.xor=Sv,_.xorBy=Iv,_.xorWith=xv,_.zip=Ov,_.zipObject=Pv,_.zipObjectDeep=Cv,_.zipWith=Av,_.entries=rf,_.entriesIn=nf,_.extend=Zl,_.extendWith=Ho,qc(_,_),_.add=Ow,_.attempt=cf,_.camelCase=Tm,_.capitalize=sf,_.ceil=Pw,_.clamp=Pm,_.clone=E_,_.cloneDeep=S_,_.cloneDeepWith=I_,_.cloneWith=D_,_.conformsTo=x_,_.deburr=of,_.defaultTo=ow,_.divide=Cw,_.endsWith=Rm,_.eq=Vr,_.escape=Nm,_.escapeRegExp=$m,_.every=zv,_.find=Bv,_.findIndex=Al,_.findKey=rm,_.findLast=Kv,_.findLastIndex=Tl,_.findLastKey=im,_.floor=Aw,_.forEach=jl,_.forEachRight=Ml,_.forIn=nm,_.forInRight=sm,_.forOwn=om,_.forOwnRight=am,_.get=$c,_.gt=O_,_.gte=P_,_.has=hm,_.hasIn=Uc,_.head=Nl,_.identity=vr,_.includes=Yv,_.indexOf=Ky,_.inRange=Cm,_.invoke=dm,_.isArguments=tn,_.isArray=Re,_.isArrayBuffer=C_,_.isArrayLike=gr,_.isArrayLikeObject=Nt,_.isBoolean=A_,_.isBuffer=Li,_.isDate=T_,_.isElement=R_,_.isEmpty=N_,_.isEqual=$_,_.isEqualWith=U_,_.isError=Rc,_.isFinite=L_,_.isFunction=yi,_.isInteger=kl,_.isLength=Fo,_.isMap=Gl,_.isMatch=j_,_.isMatchWith=M_,_.isNaN=q_,_.isNative=F_,_.isNil=H_,_.isNull=z_,_.isNumber=Wl,_.isObject=Et,_.isObjectLike=Ct,_.isPlainObject=ls,_.isRegExp=Nc,_.isSafeInteger=B_,_.isSet=Yl,_.isString=zo,_.isSymbol=Ir,_.isTypedArray=Rn,_.isUndefined=K_,_.isWeakMap=V_,_.isWeakSet=k_,_.join=Yy,_.kebabCase=Um,_.last=jr,_.lastIndexOf=Jy,_.lowerCase=Lm,_.lowerFirst=jm,_.lt=G_,_.lte=W_,_.max=Tw,_.maxBy=Rw,_.mean=Nw,_.meanBy=$w,_.min=Uw,_.minBy=Lw,_.stubArray=zc,_.stubFalse=Hc,_.stubObject=bw,_.stubString=Ew,_.stubTrue=Dw,_.multiply=jw,_.nth=Qy,_.noConflict=dw,_.noop=Fc,_.now=jo,_.pad=Mm,_.padEnd=qm,_.padStart=Fm,_.parseInt=zm,_.random=Am,_.reduce=e_,_.reduceRight=t_,_.repeat=Hm,_.replace=Bm,_.result=wm,_.round=Mw,_.runInContext=M,_.sample=i_,_.size=o_,_.snakeCase=Km,_.some=a_,_.sortedIndex=nv,_.sortedIndexBy=sv,_.sortedIndexOf=ov,_.sortedLastIndex=av,_.sortedLastIndexBy=cv,_.sortedLastIndexOf=uv,_.startCase=km,_.startsWith=Gm,_.subtract=qw,_.sum=Fw,_.sumBy=zw,_.template=Wm,_.times=Sw,_.toFinite=vi,_.toInteger=Me,_.toLength=Ql,_.toLower=Ym,_.toNumber=Mr,_.toSafeInteger=Y_,_.toString=it,_.toUpper=Jm,_.trim=Qm,_.trimEnd=Xm,_.trimStart=Zm,_.truncate=ew,_.unescape=tw,_.uniqueId=xw,_.upperCase=rw,_.upperFirst=Lc,_.each=jl,_.eachRight=Ml,_.first=Nl,qc(_,function(){var r={};return ei(_,function(n,a){nt.call(_.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),_.VERSION=s,Rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){_[r].placeholder=_}),Rr(["drop","take"],function(r,n){Ye.prototype[r]=function(a){a=a===t?1:Kt(Me(a),0);var h=this.__filtered__&&!n?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Xt(a,h.__takeCount__):h.__views__.push({size:Xt(a,re),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Rr(["filter","map","takeWhile"],function(r,n){var a=n+1,h=a==b||a==ee;Ye.prototype[r]=function(g){var m=this.clone();return m.__iteratees__.push({iteratee:me(g,3),type:a}),m.__filtered__=m.__filtered__||h,m}}),Rr(["head","last"],function(r,n){var a="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Rr(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(vr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(a){return ss(a,r,n)})}),Ye.prototype.reject=function(r){return this.filter(qo(me(r)))},Ye.prototype.slice=function(r,n){r=Me(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=Me(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(re)},ei(Ye.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),g=_[h?"take"+(n=="last"?"Right":""):n],m=h||/^find/.test(n);g&&(_.prototype[n]=function(){var C=this.__wrapped__,N=h?[1]:arguments,q=C instanceof Ye,X=N[0],Z=q||Re(C),ie=function(Ge){var Ze=g.apply(_,Ci([Ge],N));return h&&he?Ze[0]:Ze};Z&&a&&typeof X=="function"&&X.length!=1&&(q=Z=!1);var he=this.__chain__,ye=!!this.__actions__.length,Ee=m&&!he,ze=q&&!ye;if(!m&&Z){C=ze?C:new Ye(this);var De=r.apply(C,N);return De.__actions__.push({func:Uo,args:[ie],thisArg:t}),new $r(De,he)}return Ee&&ze?r.apply(this,N):(De=this.thru(ie),Ee?h?De.value()[0]:De.value():De)})}),Rr(["pop","push","shift","sort","splice","unshift"],function(r){var n=oo[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);_.prototype[r]=function(){var g=arguments;if(h&&!this.__chain__){var m=this.value();return n.apply(Re(m)?m:[],g)}return this[a](function(C){return n.apply(Re(C)?C:[],g)})}}),ei(Ye.prototype,function(r,n){var a=_[n];if(a){var h=a.name+"";nt.call(On,h)||(On[h]=[]),On[h].push({name:n,func:a})}}),On[Po(t,ne).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=t0,Ye.prototype.reverse=r0,Ye.prototype.value=i0,_.prototype.at=Rv,_.prototype.chain=Nv,_.prototype.commit=$v,_.prototype.next=Uv,_.prototype.plant=jv,_.prototype.reverse=Mv,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=qv,_.prototype.first=_.prototype.head,Xn&&(_.prototype[Xn]=Lv),_},Sn=$g();Rt?((Rt.exports=Sn)._=Sn,ut._=Sn):Xe._=Sn}).call(ws)})(qu,qu.exports);var z5=Object.defineProperty,H5=Object.defineProperties,B5=Object.getOwnPropertyDescriptors,Fd=Object.getOwnPropertySymbols,K5=Object.prototype.hasOwnProperty,V5=Object.prototype.propertyIsEnumerable,zd=(i,e,t)=>e in i?z5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Go=(i,e)=>{for(var t in e||(e={}))K5.call(e,t)&&zd(i,t,e[t]);if(Fd)for(var t of Fd(e))V5.call(e,t)&&zd(i,t,e[t]);return i},k5=(i,e)=>H5(i,B5(e));function qi(i,e,t){var s;const o=NE(i);return((s=e.rpcMap)==null?void 0:s[o.reference])||`${F5}?chainId=${o.namespace}:${o.reference}&projectId=${t}`}function dn(i){return i.includes(":")?i.split(":")[1]:i}function ug(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function G5(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function W5(i={},e={}){const t=Hd(i),s=Hd(e);return qu.exports.merge(t,s)}function Hd(i){var e,t,s,o;const c={};if(!Mn(i))return c;for(const[l,f]of Object.entries(i)){const y=eh(l)?[l]:f.chains,p=f.methods||[],v=f.events||[],S=f.rpcMap||{},D=bs(l);c[D]=k5(Go(Go({},c[D]),f),{chains:Wc(y,(e=c[D])==null?void 0:e.chains),methods:Wc(p,(t=c[D])==null?void 0:t.methods),events:Wc(v,(s=c[D])==null?void 0:s.events),rpcMap:Go(Go({},S),(o=c[D])==null?void 0:o.rpcMap)})}return c}function Y5(i){return i.includes(":")?i.split(":")[2]:i}function J5(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],c=s.events||[],l=s.accounts||[],f=eh(t)?[t]:s.chains?s.chains:ug(s.accounts);e[t]={chains:f,methods:o,events:c,accounts:l}}return e}function au(i){return typeof i=="number"?i:i.includes("0x")?parseInt(i,16):i.includes(":")?Number(i.split(":")[1]):Number(i)}const hg={},wt=i=>hg[i],cu=(i,e)=>{hg[i]=e};class Q5{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class X5{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||qi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=parseInt(dn(t));e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class Z5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class ex{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class tx{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t),o=dn(t);e[o]=this.createHttpProvider(o,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class rx{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class ix{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class nx{constructor(e){this.name="near",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||qi(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace);return typeof s>"u"?void 0:new Si(new zi(s,wt("disableProviderPing")))}}var sx=Object.defineProperty,ox=Object.defineProperties,ax=Object.getOwnPropertyDescriptors,Bd=Object.getOwnPropertySymbols,cx=Object.prototype.hasOwnProperty,ux=Object.prototype.propertyIsEnumerable,Kd=(i,e,t)=>e in i?sx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Wo=(i,e)=>{for(var t in e||(e={}))cx.call(e,t)&&Kd(i,t,e[t]);if(Bd)for(var t of Bd(e))ux.call(e,t)&&Kd(i,t,e[t]);return i},uu=(i,e)=>ox(i,ax(e));class uh{constructor(e){this.events=new Bu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Md})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new uh(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Wo({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){const o=new Date().getTime();this.request(e,s).then(c=>t(null,pa(o,c))).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:At("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=J5(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==ag)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(oi(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await N5.init({logger:this.providerOpts.logger||Md,relayUrl:this.providerOpts.relayUrl||j5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>bs(t)))];cu("client",this.client),cu("events",this.events),cu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=G5(t,this.session),o=ug(s),c=W5(this.namespaces,this.optionalNamespaces),l=uu(Wo({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new X5({namespace:l});break;case"solana":this.rpcProviders[t]=new Z5({namespace:l});break;case"cosmos":this.rpcProviders[t]=new ex({namespace:l});break;case"polkadot":this.rpcProviders[t]=new Q5({namespace:l});break;case"cip34":this.rpcProviders[t]=new tx({namespace:l});break;case"elrond":this.rpcProviders[t]=new rx({namespace:l});break;case"multiversx":this.rpcProviders[t]=new ix({namespace:l});break;case"near":this.rpcProviders[t]=new nx({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&oi(o)&&this.events.emit("accountsChanged",o.map(Y5))}else if(s.name==="chainChanged"){const o=t.chainId,c=t.event.data,l=bs(o),f=au(o)!==au(c)?`${l}:${au(c)}`:o;this.onChainChanged(f)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=uu(Wo({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",uu(Wo({},At("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ii.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(l=>bs(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=bs(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${qd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${qd}/${e}`)}}const hx=uh,lx="wc",fx="ethereum_provider",dx=`${lx}@2:${fx}:`,px="https://rpc.walletconnect.com/v1/",Fu=["eth_sendTransaction","personal_sign"],gx=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],zu=["chainChanged","accountsChanged"],yx=["chainChanged","accountsChanged","message","disconnect","connect"];var vx=Object.defineProperty,_x=Object.defineProperties,mx=Object.getOwnPropertyDescriptors,Vd=Object.getOwnPropertySymbols,wx=Object.prototype.hasOwnProperty,bx=Object.prototype.propertyIsEnumerable,kd=(i,e,t)=>e in i?vx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ds=(i,e)=>{for(var t in e||(e={}))wx.call(e,t)&&kd(i,t,e[t]);if(Vd)for(var t of Vd(e))bx.call(e,t)&&kd(i,t,e[t]);return i},Gd=(i,e)=>_x(i,mx(e));function sa(i){return Number(i[0].split(":")[1])}function hu(i){return`0x${i.toString(16)}`}function Ex(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:l,rpcMap:f}=i;if(!oi(e))throw new Error("Invalid chains");const y={chains:e,methods:s||Fu,events:c||zu,rpcMap:Ds({},e.length?{[sa(e)]:f[sa(e)]}:{})},p=c==null?void 0:c.filter(x=>!zu.includes(x)),v=s==null?void 0:s.filter(x=>!Fu.includes(x));if(!t&&!l&&!o&&!(p!=null&&p.length)&&!(v!=null&&v.length))return{required:e.length?y:void 0};const S=(p==null?void 0:p.length)&&(v==null?void 0:v.length)||!t,D={chains:[...new Set(S?y.chains.concat(t||[]):t)],methods:[...new Set(y.methods.concat(o!=null&&o.length?o:gx))],events:[...new Set(y.events.concat(l!=null&&l.length?l:yx))],rpcMap:f};return{required:e.length?y:void 0,optional:t.length?D:void 0}}class hh{constructor(){this.events=new Fr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=dx,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new hh;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=Ex(this.rpc);try{const o=await new Promise(async(l,f)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Gd(Ds({namespaces:Ds({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(p=>{l(p)}).catch(p=>{f(new Error(p.message))})});if(!o)return;const c=$E(o.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:hu(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",hu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Gd(Ds({},At("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",hu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],l=o.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=o.length?(e==null?void 0:e.methods)||Fu:[],y=o.length?(e==null?void 0:e.events)||zu:[],p=(e==null?void 0:e.optionalMethods)||[],v=(e==null?void 0:e.optionalEvents)||[],S=(e==null?void 0:e.rpcMap)||this.buildRpcMap(l,e.projectId),D=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(x=>this.formatChainId(x)),optionalChains:c.map(x=>this.formatChainId(x)),methods:f,events:y,optionalMethods:p,optionalEvents:v,rpcMap:S,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:D,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?sa(this.rpc.chains):sa(this.rpc.optionalChains),this.signer=await hx.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await Bw(()=>import("./index-Dto53KbG.js").then(o=>o.i),__vite__mapDeps([0,1,2]));t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Ds({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&oi(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&oi(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${px}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const Fx=hh;export{Fx as EthereumProvider,yx as OPTIONAL_EVENTS,gx as OPTIONAL_METHODS,zu as REQUIRED_EVENTS,Fu as REQUIRED_METHODS,hh as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-Dto53KbG.js","assets/index-s6c4EPi7.js","assets/index-mGxsnoPc.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
